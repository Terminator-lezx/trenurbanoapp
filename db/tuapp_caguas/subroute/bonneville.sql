delete from ref.subroute where route = 'BO' and direction = 'BONNEVILLE';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.031881 18.23508,-66.031726 18.235338,-66.030852 18.235063,-66.030801 18.234956,-66.031163 18.233893,-66.031693 18.232783,-66.031859 18.232466,-66.03224 18.231946,-66.032919 18.230523,-66.033176 18.230073,-66.033958 18.229046,-66.034809 18.227735,-66.035055 18.227088,-66.035444 18.226446,-66.0359 18.226315,-66.03715 18.226918,-66.037339 18.226893,-66.037533 18.226595,-66.038315 18.225076,-66.039582 18.222885,-66.039762 18.222668,-66.046741 18.22454,-66.046775 18.224736,-66.046163 18.226773,-66.046346 18.2269,-66.046994 18.22702,-66.047962 18.226886,-66.048089 18.227096,-66.048295 18.227921,-66.048483 18.227945,-66.049167 18.227735,-66.04942 18.227438,-66.049986 18.226271,-66.05016 18.226255,-66.053356 18.228156)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BO','BONNEVILLE', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'BO' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.053542 18.228265,-66.055438 18.229347,-66.055759 18.229561,-66.056747 18.230112,-66.056791 18.230137,-66.056828 18.230128,-66.056847 18.230102,-66.056842 18.230084,-66.056794 18.23005,-66.053621 18.228226,-66.053532 18.228153,-66.05351 18.228079,-66.054159 18.225973,-66.054655 18.224211,-66.054551 18.224051,-66.051668 18.222496,-66.050935 18.22224,-66.05047 18.222125,-66.047765 18.221589,-66.047614 18.221741,-66.046876 18.224251,-66.046786 18.224445,-66.039767 18.222618,-66.039435 18.22281,-66.037662 18.226129,-66.037271 18.226768,-66.03712 18.227154,-66.036419 18.228413,-66.036155 18.228926,-66.035179 18.231225,-66.035144 18.23127,-66.03509 18.231279,-66.034881 18.231254,-66.034563 18.231316,-66.034486 18.231324,-66.034409 18.231348,-66.034381 18.23145,-66.034371 18.231556,-66.034312 18.231821,-66.034196 18.2322,-66.034121 18.232448,-66.033961 18.232988,-66.033732 18.233719,-66.033523 18.234331,-66.03347 18.234427,-66.033429 18.234472,-66.033276 18.234789,-66.033237 18.234837,-66.033167 18.234839,-66.032806 18.234708,-66.032538 18.234627,-66.032485 18.234631,-66.032402 18.234657,-66.032312 18.234635,-66.032085 18.234564,-66.032021 18.234579,-66.031872 18.235006)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BO','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'BO' and direction = 'BONNEVILLE'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'BO', 'BONNEVILLE'),(8006, 1, 'BO', 'BONNEVILLE');
delete from ref.subroute_stop where route = 'BO' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8006, 0, 'BO', 'TERM_CAGUAS'),(8000, 1, 'BO', 'TERM_CAGUAS');
