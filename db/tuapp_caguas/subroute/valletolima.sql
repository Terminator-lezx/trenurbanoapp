delete from ref.subroute where route = 'VT' and direction = 'VALLE_TOLIMA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.032467 18.234846,-66.03208 18.234732,-66.031981 18.234729,-66.031774 18.235276,-66.03184 18.235427,-66.03261 18.235694,-66.032753 18.235741,-66.032832 18.23576,-66.032931 18.235726,-66.034555 18.236309,-66.035034 18.236481,-66.035215 18.236517,-66.036063 18.236796,-66.036094 18.236823,-66.036088 18.236878,-66.036079 18.236974,-66.036119 18.237132,-66.036206 18.237263,-66.036452 18.237519,-66.036866 18.237856,-66.037001 18.237903,-66.03715 18.23787,-66.037346 18.23756,-66.037582 18.237138,-66.037817 18.236542,-66.037979 18.235939,-66.038118 18.234834,-66.038162 18.234706,-66.038243 18.234626,-66.038366 18.234579,-66.038535 18.234575,-66.038759 18.23455,-66.039235 18.234547,-66.039606 18.234538,-66.039814 18.234517,-66.040154 18.234515,-66.040443 18.234543,-66.040882 18.234577,-66.041497 18.234618,-66.041795 18.234569,-66.042222 18.234413,-66.042561 18.234292,-66.042956 18.234181,-66.043937 18.233928,-66.044669 18.233736,-66.045406 18.233541,-66.046178 18.23335,-66.046448 18.233312,-66.047325 18.233266,-66.049033 18.233223,-66.049533 18.233208,-66.049801 18.233231,-66.049961 18.233258,-66.050083 18.23337,-66.050145 18.233503,-66.050148 18.233636,-66.050035 18.234456,-66.049743 18.236648,-66.049691 18.237055,-66.049701 18.237604,-66.049697 18.237723,-66.049626 18.237781,-66.045984 18.238018,-66.045777 18.238037,-66.045601 18.238104,-66.045149 18.238289,-66.045102 18.238352,-66.045111 18.238408,-66.045996 18.240369,-66.046264 18.240948,-66.046369 18.241255,-66.046407 18.241504,-66.046393 18.241834,-66.046315 18.242081,-66.046295 18.242113)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'VT','VALLE_TOLIMA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'VT' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.046328 18.242131,-66.04635 18.242095,-66.04643 18.24184,-66.046445 18.241502,-66.046406 18.241247,-66.046299 18.240935,-66.046031 18.240355,-66.045148 18.238398,-66.045141 18.238361,-66.045174 18.238319,-66.045616 18.238137,-66.045786 18.238073,-66.045987 18.238054,-66.049625 18.237816,-66.049749 18.23779,-66.04981 18.23773,-66.049794 18.237559,-66.049784 18.237012,-66.049836 18.236607,-66.050128 18.234416,-66.050241 18.233593,-66.050275 18.233295,-66.050115 18.23308,-66.049864 18.233075,-66.049509 18.233088,-66.049034 18.233111,-66.047774 18.233141,-66.047328 18.233138,-66.046629 18.233166,-66.046145 18.233212,-66.0454 18.233427,-66.044641 18.233622,-66.043962 18.233805,-66.04301 18.234037,-66.042606 18.234145,-66.042209 18.234287,-66.041814 18.234437,-66.041536 18.234462,-66.041232 18.234451,-66.040678 18.234423,-66.040417 18.234407,-66.040205 18.234414,-66.039659 18.234457,-66.039367 18.23447,-66.038831 18.23448,-66.038367 18.23448,-66.038211 18.234487,-66.037984 18.234605,-66.037936 18.234745,-66.03782 18.23596,-66.037644 18.236572,-66.037414 18.237129,-66.037187 18.237517,-66.036979 18.23782,-66.036932 18.237832,-66.036829 18.237787,-66.036752 18.237728,-66.036474 18.237501,-66.036229 18.237244,-66.036144 18.237119,-66.036105 18.236972,-66.036248 18.236288,-66.036162 18.23623,-66.035366 18.235949,-66.03513 18.235863,-66.03414 18.235501,-66.033188 18.235111,-66.033078 18.23503,-66.032524 18.234864)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'VT','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'VT' and direction = 'VALLE_TOLIMA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'VT', 'VALLE_TOLIMA'),(8001, 1, 'VALLE_TOLIMA', 'VALLE_TOLIMA');
delete from ref.subroute_stop where route = 'VT' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8001, 0, 'VT', 'TERM_CAGUAS'),(8000, 1, 'VALLE_TOLIMA', 'TERM_CAGUAS');
