delete from ref.subroute where route = 'U2' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.058916 18.222207,-66.059124 18.221855,-66.059098 18.221758,-66.057312 18.220775,-66.057226 18.220757,-66.057155 18.220803,-66.056668 18.221617,-66.056595 18.221641,-66.056472 18.221589,-66.056395 18.22154,-66.056021 18.221339,-66.055906 18.221353,-66.055711 18.221698,-66.054573 18.223604,-66.054506 18.223631,-66.054424 18.223617,-66.052334 18.222472,-66.052236 18.222449,-66.05216 18.222485,-66.05208 18.222626,-66.051994 18.222666,-66.051814 18.222584,-66.051304 18.222306,-66.051106 18.222247,-66.050326 18.222074,-66.050282 18.222041,-66.050276 18.221984,-66.050301 18.221916,-66.052126 18.219752,-66.052207 18.219639,-66.052257 18.219506,-66.052251 18.219211,-66.052194 18.219021,-66.050117 18.215491,-66.050041 18.215428,-66.049949 18.215416,-66.048031 18.21646,-66.046111 18.217428,-66.045161 18.217891,-66.045109 18.217911,-66.045073 18.21788,-66.045021 18.217797,-66.04477 18.217329,-66.044706 18.217272,-66.044259 18.216872,-66.043646 18.216476,-66.043505 18.216447,-66.043373 18.216491,-66.043213 18.216692,-66.041745 18.218791,-66.041496 18.219094,-66.041367 18.219229,-66.041205 18.219378,-66.041116 18.219494,-66.041049 18.219669,-66.041012 18.219835,-66.040977 18.219932,-66.039634 18.222561,-66.037328 18.226743,-66.037129 18.227145,-66.036432 18.228407,-66.036162 18.228931,-66.035612 18.230205,-66.035167 18.231265,-66.035111 18.231277,-66.034879 18.231252,-66.034417 18.231325,-66.03431 18.231827,-66.034118 18.232441,-66.033969 18.232988,-66.03373 18.233717,-66.033503 18.234387,-66.033422 18.234439,-66.033222 18.234863,-66.033119 18.235035,-66.032763 18.234988,-66.032448 18.235016)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'U2','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'U2' and direction = 'TURABO_2';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.032334 18.235034,-66.031877 18.235038,-66.031749 18.235322,-66.030735 18.235051,-66.031324 18.233574,-66.031505 18.233171,-66.031832 18.232466,-66.031912 18.232384,-66.032211 18.232007,-66.03301 18.23034,-66.034564 18.228074,-66.034857 18.22758,-66.034906 18.227411,-66.034944 18.227254,-66.035028 18.227115,-66.035145 18.227022,-66.035421 18.226531,-66.035528 18.226415,-66.03572 18.226347,-66.035952 18.226364,-66.036416 18.226563,-66.036799 18.226724,-66.037118 18.226879,-66.037335 18.226863,-66.039676 18.222582,-66.04116 18.219905,-66.04127 18.219754,-66.041388 18.219609,-66.041474 18.21947,-66.041583 18.219278,-66.042243 18.218364,-66.042941 18.217368,-66.043365 18.216768,-66.043505 18.21657,-66.043588 18.216508,-66.04364 18.216514,-66.044252 18.216903,-66.044739 18.217345,-66.045 18.217847,-66.045058 18.217941,-66.045142 18.217962,-66.045194 18.217948,-66.046133 18.217468,-66.048054 18.216499,-66.049983 18.215483,-66.050031 18.215485,-66.050077 18.215504,-66.050111 18.215557,-66.051318 18.217593,-66.052163 18.21904,-66.052218 18.219218,-66.052225 18.219507,-66.052182 18.219629,-66.052103 18.219739,-66.051804 18.220099,-66.050449 18.221685,-66.05027 18.221903,-66.050239 18.22197,-66.050236 18.222034,-66.050279 18.22212,-66.050343 18.222144,-66.051099 18.2223,-66.051292 18.222367,-66.051823 18.222642,-66.051881 18.222667,-66.05195 18.2227,-66.05206 18.222692,-66.052117 18.222637,-66.052156 18.222577,-66.052197 18.2225,-66.052255 18.222477,-66.052327 18.222494,-66.054425 18.223646,-66.05451 18.223663,-66.054589 18.223624,-66.054788 18.223276,-66.055937 18.221375,-66.056007 18.221359,-66.056101 18.221405,-66.05656 18.221662,-66.057075 18.221944,-66.057166 18.221925,-66.057377 18.221549,-66.05743 18.221513,-66.057517 18.221526,-66.058878 18.222278)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'U2','TURABO_2', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'U2' and direction = 'TURABO_2'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'U2', 'TURABO_2'),(8019, 1, 'U2', 'TURABO_2');
delete from ref.subroute_stop where route = 'U2' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8019, 0, 'U2', 'TERM_CAGUAS'),(8000, 1, 'U2', 'TERM_CAGUAS');
