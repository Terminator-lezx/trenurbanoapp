delete from ref.subroute where route = 'CH' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.064704 18.292406,-66.064808 18.292431,-66.064822 18.292462,-66.064804 18.292539,-66.064733 18.292649,-66.064686 18.29276,-66.064698 18.292885,-66.064737 18.293036,-66.064822 18.293218,-66.064949 18.293369,-66.065105 18.293545,-66.065258 18.29374,-66.065399 18.293895,-66.065843 18.294347,-66.066112 18.294589,-66.066295 18.294806,-66.066462 18.295074,-66.066584 18.295401,-66.066609 18.295513,-66.066602 18.295701,-66.066564 18.295836,-66.066523 18.295921,-66.066462 18.295983,-66.066344 18.296047,-66.06616 18.296123,-66.065747 18.296312,-66.06561 18.296353,-66.065462 18.296387,-66.065022 18.296465,-66.064775 18.296502,-66.062637 18.297105,-66.062535 18.297149,-66.062468 18.297198,-66.061814 18.297836,-66.061761 18.297844,-66.0617 18.297797,-66.061578 18.297428,-66.061435 18.297246,-66.061085 18.296968,-66.060571 18.296565,-66.059431 18.295873,-66.059203 18.295776,-66.059027 18.2958,-66.058808 18.295908,-66.05851 18.295931,-66.057974 18.295684,-66.05742 18.295598,-66.057274 18.295556,-66.057192 18.295459,-66.05718 18.295305,-66.057127 18.295192,-66.056532 18.294755,-66.055457 18.294028,-66.05516 18.293827,-66.05485 18.293711,-66.053734 18.293328,-66.052383 18.292862,-66.050683 18.292279,-66.049825 18.292014,-66.04934 18.291859,-66.04908 18.291726,-66.048595 18.291436,-66.047852 18.291005,-66.047509 18.290823,-66.047196 18.2907,-66.046966 18.290622,-66.046827 18.290583,-66.046764 18.290558,-66.046609 18.290445,-66.04607 18.289896,-66.045279 18.288932,-66.044722 18.288118,-66.044215 18.287238,-66.043904 18.286606,-66.043655 18.28602,-66.04343 18.285454,-66.043221 18.284785,-66.043054 18.284158,-66.04293 18.283446,-66.042465 18.280453,-66.041984 18.27773,-66.04194 18.277427,-66.041758 18.276226,-66.041503 18.275022,-66.041428 18.274573,-66.041332 18.274078,-66.041247 18.273171,-66.041067 18.272403,-66.040823 18.271558,-66.040597 18.270867,-66.040041 18.268977,-66.039465 18.267067,-66.038354 18.263159,-66.038278 18.262837,-66.037948 18.261826,-66.037808 18.261405,-66.037533 18.260441,-66.037245 18.259491,-66.036967 18.258475,-66.036849 18.258006,-66.036688 18.257256,-66.036553 18.256495,-66.03642 18.255185,-66.036366 18.254648,-66.036334 18.253936,-66.035837 18.246462,-66.035737 18.244966,-66.035627 18.243314,-66.035473 18.241293,-66.035425 18.240734,-66.035397 18.240146,-66.035392 18.240022,-66.035397 18.239854,-66.035444 18.23966,-66.035532 18.239439,-66.035619 18.23932,-66.036012 18.239035,-66.03615 18.238916,-66.036602 18.238463,-66.03664 18.238378,-66.036938 18.238047,-66.036953 18.237966,-66.036928 18.237879,-66.036873 18.237813,-66.036788 18.237762,-66.036427 18.23745,-66.036227 18.237243,-66.036158 18.237145,-66.036116 18.237048,-66.036114 18.236912,-66.036118 18.236821,-66.036248 18.236302,-66.036214 18.236241,-66.036036 18.236188,-66.035359 18.235949,-66.034139 18.235498,-66.0332 18.235112,-66.033152 18.235083,-66.03316 18.235029,-66.033196 18.234918,-66.033193 18.234836,-66.033049 18.234781,-66.032509 18.23461,-66.032444 18.234647,-66.032296 18.23463,-66.03211 18.234574,-66.032032 18.234583,-66.032378 18.235102)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'CH','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'CH' and direction = 'CHANGA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.03234 18.23515,-66.031816 18.235178,-66.031746 18.235361,-66.032007 18.235497,-66.032627 18.235705,-66.032715 18.23574,-66.032805 18.235769,-66.032878 18.235762,-66.032931 18.235729,-66.032995 18.235735,-66.033253 18.235829,-66.03496 18.236462,-66.035069 18.236533,-66.035096 18.236643,-66.035155 18.237611,-66.035178 18.238273,-66.035194 18.238564,-66.035211 18.23901,-66.035215 18.239216,-66.035247 18.239705,-66.035275 18.240162,-66.035315 18.240711,-66.035571 18.244759,-66.035687 18.246479,-66.036187 18.253834,-66.036255 18.254697,-66.036296 18.255167,-66.036445 18.256498,-66.036563 18.257307,-66.036735 18.258012,-66.036871 18.258564,-66.037145 18.259499,-66.037428 18.260462,-66.037699 18.261426,-66.03777 18.26167,-66.03815 18.262942,-66.038209 18.263135,-66.0388 18.265144,-66.039363 18.26709,-66.039941 18.269043,-66.040504 18.270988,-66.040718 18.271762,-66.040933 18.272536,-66.041054 18.273197,-66.041276 18.274088,-66.041372 18.274582,-66.041447 18.27503,-66.04185 18.277435,-66.041909 18.277735,-66.042358 18.280564,-66.042823 18.283557,-66.042948 18.284272,-66.043116 18.284902,-66.043327 18.285581,-66.043552 18.286145,-66.044154 18.287367,-66.044685 18.288262,-66.045254 18.289077,-66.046011 18.290018,-66.046825 18.290776,-66.046921 18.290806,-66.047049 18.290806,-66.047188 18.290781,-66.047286 18.290767,-66.047499 18.290843,-66.04784 18.291024,-66.048582 18.291455,-66.049068 18.291745,-66.049331 18.29188,-66.049818 18.292035,-66.050675 18.2923,-66.052375 18.292883,-66.053726 18.293349,-66.054842 18.293732,-66.055148 18.293847,-66.055443 18.294046,-66.056518 18.294773,-66.057108 18.295207,-66.057157 18.29531,-66.057169 18.295468,-66.05726 18.295575,-66.057415 18.29562,-66.057967 18.295705,-66.058506 18.295954,-66.058814 18.29593,-66.059035 18.295821,-66.059199 18.2958,-66.05942 18.295893,-66.060557 18.296584,-66.06107 18.296985,-66.061418 18.297262,-66.061556 18.297438,-66.061679 18.297811,-66.061754 18.297867,-66.061825 18.297857,-66.062483 18.297215,-66.062547 18.297169,-66.062645 18.297126,-66.064781 18.296524,-66.065026 18.296487,-66.065467 18.296409,-66.065617 18.296374,-66.065756 18.296333,-66.06617 18.296143,-66.066354 18.296067,-66.066477 18.296001,-66.066543 18.295934,-66.066586 18.295844,-66.066626 18.295704,-66.066632 18.295511,-66.066607 18.295395,-66.066483 18.295065,-66.066314 18.294793,-66.066129 18.294574,-66.065859 18.294331,-66.065416 18.29388,-66.065277 18.293726,-66.065124 18.293531,-66.064967 18.293354,-66.064843 18.293206,-66.064759 18.293029,-66.064721 18.292882,-66.06471 18.292763,-66.064754 18.292659,-66.064826 18.292548,-66.064847 18.292459,-66.064825 18.292412,-66.06471 18.292384)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'CH','CHANGA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'CH' and direction = 'CHANGA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'CH', 'CHANGA'),(8017, 1, 'CH', 'CHANGA');
delete from ref.subroute_stop where route = 'CH' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8017, 0, 'CH', 'TERM_CAGUAS'),(8000, 1, 'CH', 'TERM_CAGUAS');
