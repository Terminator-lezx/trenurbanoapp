delete from ref.subroute where route = 'AB' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.102676 18.256211,-66.10265 18.256519,-66.102613 18.256521,-66.101744 18.256456,-66.10154 18.256416,-66.101443 18.256358,-66.101374 18.256284,-66.101303 18.256183,-66.10125 18.256017,-66.101253 18.255852,-66.101287 18.255671,-66.101312 18.255489,-66.101281 18.255314,-66.101216 18.255215,-66.101139 18.255133,-66.101014 18.255067,-66.100888 18.255058,-66.100053 18.255051,-66.099698 18.255146,-66.099053 18.255771,-66.098696 18.255903,-66.098408 18.256113,-66.097595 18.25626,-66.09732 18.2565,-66.096971 18.256536,-66.096638 18.25638,-66.094943 18.256055,-66.092873 18.255285,-66.092483 18.255378,-66.092088 18.255658,-66.09132 18.256051,-66.091015 18.256336,-66.090596 18.256593,-66.089963 18.256708,-66.089264 18.25653,-66.088612 18.256138,-66.088031 18.255715,-66.087605 18.255285,-66.086049 18.253168,-66.0856 18.252631,-66.085105 18.252136,-66.08456 18.251661,-66.083372 18.250796,-66.081478 18.249536,-66.080825 18.249174,-66.077956 18.247798,-66.077186 18.247488,-66.075118 18.246768,-66.074462 18.246383,-66.073375 18.245623,-66.072683 18.245395,-66.071068 18.24514,-66.070233 18.244863,-66.069393 18.244428,-66.067594 18.243074,-66.066492 18.242541,-66.065665 18.24239,-66.06473 18.242461,-66.062965 18.242756,-66.062276 18.242706,-66.061638 18.242483,-66.061026 18.242053,-66.060559 18.241466,-66.05949 18.239605,-66.059055 18.239079,-66.058015 18.2381,-66.056696 18.236588,-66.055392 18.235541,-66.055001 18.235276,-66.053259 18.234313,-66.052136 18.233628,-66.051171 18.233253,-66.050493 18.233106,-66.049953 18.233053,-66.046188 18.233191,-66.043325 18.233923,-66.041928 18.234361,-66.041556 18.23444,-66.040268 18.2344,-66.038696 18.234466,-66.037792 18.234415,-66.036648 18.234481,-66.036044 18.234343,-66.035898 18.234348,-66.03388 18.233766,-66.033745 18.233803,-66.033268 18.234768,-66.032903 18.234728,-66.032571 18.234633,-66.032005 18.234583,-66.032005 18.234708,-66.032165 18.234803,-66.032263 18.234941)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'AB','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'AB' and direction = 'AGUAS_BUENAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.032602 18.23491,-66.03223 18.23478,-66.032031 18.234801,-66.031936 18.234928,-66.031773 18.235321,-66.031813 18.235433,-66.03274 18.235751,-66.032905 18.235748,-66.033089 18.235811,-66.033204 18.235713,-66.033565 18.235053,-66.033705 18.234681,-66.033795 18.23458,-66.034338 18.23478,-66.03453 18.234791,-66.036835 18.235653,-66.037735 18.235901,-66.037927 18.235881,-66.038031 18.235738,-66.038173 18.234741,-66.03838 18.234601,-66.040009 18.23456,-66.041505 18.23465,-66.041883 18.234591,-66.042471 18.234381,-66.045406 18.233571,-66.046605 18.233334,-66.049983 18.233245,-66.050661 18.233328,-66.051176 18.233451,-66.051771 18.233645,-66.052368 18.23391,-66.054998 18.235408,-66.056473 18.236568,-66.056971 18.23701,-66.0579 18.238109,-66.059017 18.239191,-66.059518 18.239808,-66.060271 18.241133,-66.060669 18.241726,-66.061088 18.24224,-66.061584 18.242583,-66.062164 18.242821,-66.062871 18.242916,-66.063648 18.242831,-66.065248 18.242553,-66.065996 18.242573,-66.066658 18.242771,-66.06775 18.243341,-66.069281 18.24447,-66.069913 18.24485,-66.070565 18.245123,-66.07123 18.245308,-66.073046 18.245653,-66.073567 18.245931,-66.074563 18.24662,-66.075194 18.246956,-66.077935 18.247976,-66.080766 18.249306,-66.081438 18.249675,-66.082083 18.250095,-66.083968 18.251371,-66.084593 18.251851,-66.085173 18.252366,-66.085699 18.252914,-66.086173 18.253493,-66.087335 18.255181,-66.08774 18.255621,-66.088288 18.256053,-66.088933 18.256483,-66.089481 18.256781,-66.090002 18.256873,-66.090453 18.256805,-66.091049 18.2565,-66.091319 18.25621,-66.091526 18.256055,-66.09184 18.255938,-66.092748 18.255386,-66.09313 18.255435,-66.095185 18.256198,-66.095938 18.256346,-66.09663 18.256418,-66.096977 18.25658,-66.097301 18.256605,-66.097526 18.256359,-66.097871 18.256241,-66.098296 18.256201,-66.098585 18.256014,-66.098912 18.25594,-66.099216 18.25574,-66.099821 18.25516,-66.100179 18.255111,-66.100834 18.255141,-66.100976 18.255167,-66.101088 18.255231,-66.101202 18.255324,-66.101265 18.255482,-66.101254 18.255633,-66.101196 18.25593,-66.101202 18.256066,-66.101252 18.256199,-66.10133 18.256315,-66.1014 18.256373,-66.101506 18.256444,-66.1016 18.256474,-66.101742 18.256494,-66.102057 18.256524,-66.102578 18.256553,-66.102629 18.256579,-66.102638 18.256611,-66.102637 18.256653,-66.102573 18.257523,-66.102606 18.25756,-66.102693 18.257569,-66.103861 18.257572,-66.104232 18.257597,-66.104263 18.257571,-66.104315 18.256695,-66.104338 18.256381,-66.104326 18.256357,-66.104298 18.25635,-66.103965 18.256316,-66.103648 18.256282,-66.103075 18.256239,-66.102715 18.256209)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'AB','AGUAS_BUENAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'AB' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8005, 0, 'AB', 'TERM_CAGUAS'),(8000, 1, 'AB', 'TERM_CAGUAS');
delete from ref.subroute_stop where route = 'AB' and direction = 'AGUAS_BUENAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'AB', 'AGUAS_BUENAS'),(8005, 1, 'AB', 'AGUAS_BUENAS');
