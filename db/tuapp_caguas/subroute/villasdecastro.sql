delete from ref.subroute where route = 'VC' and direction = 'VILLAS_DE_CASTRO';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.031866 18.235009,-66.031763 18.23533,-66.031537 18.235269,-66.031006 18.235134,-66.03092 18.235109,-66.030834 18.235032,-66.030809 18.234971,-66.030814 18.234868,-66.031311 18.233604,-66.031324 18.233572,-66.031329 18.23356,-66.03134 18.233538,-66.031359 18.233495,-66.031369 18.233473,-66.031378 18.233454,-66.031419 18.233365,-66.031478 18.233235,-66.031485 18.233221,-66.031489 18.233211,-66.031508 18.233168,-66.031523 18.233134,-66.031533 18.233111,-66.031535 18.233108,-66.031542 18.233091,-66.031609 18.232939,-66.031621 18.232914,-66.03164 18.232869,-66.031675 18.23279,-66.031696 18.232744,-66.031793 18.232529,-66.031802 18.232509,-66.031811 18.232497,-66.031889 18.232395,-66.03192 18.232353,-66.031991 18.232257,-66.031995 18.232251,-66.032007 18.232235,-66.032074 18.232145,-66.032129 18.23207,-66.03216 18.232055,-66.032197 18.232036,-66.032208 18.232031,-66.032222 18.232002,-66.032236 18.231973,-66.032247 18.231947,-66.032258 18.231922,-66.032297 18.231831,-66.032298 18.231827,-66.032341 18.231725,-66.032357 18.231689,-66.032373 18.231653,-66.03242 18.231549,-66.032446 18.231494,-66.032478 18.231424,-66.032484 18.231412,-66.03249 18.231399,-66.032533 18.231322,-66.032537 18.231315,-66.032555 18.231273,-66.032578 18.231219,-66.032582 18.23121,-66.032582 18.231209,-66.032627 18.231105,-66.032657 18.231036,-66.032678 18.23099,-66.032696 18.230949,-66.032701 18.230938,-66.03276 18.230806,-66.032793 18.23074,-66.032814 18.230696,-66.032845 18.230633,-66.032856 18.23061,-66.032869 18.230585,-66.032878 18.230565,-66.032914 18.230492,-66.032938 18.230443,-66.032942 18.230435,-66.032963 18.230405,-66.032969 18.230396,-66.032982 18.23036,-66.03298 18.230339,-66.032972 18.230322,-66.032959 18.230299,-66.032944 18.230287,-66.032902 18.23025,-66.03286 18.230214,-66.032696 18.230081,-66.032607 18.23001,-66.032583 18.22999,-66.032531 18.229947,-66.032478 18.229901,-66.03241 18.229843,-66.032308 18.229756,-66.032258 18.229714,-66.032229 18.229691,-66.032223 18.22969,-66.032194 18.229669,-66.032109 18.229609,-66.032088 18.22959,-66.031957 18.229467,-66.031851 18.229378,-66.031827 18.229357,-66.031751 18.229293,-66.031691 18.229245,-66.031531 18.229114,-66.03143 18.229027,-66.031421 18.229023,-66.031416 18.22902,-66.031368 18.228981,-66.031116 18.228774,-66.0311 18.228757,-66.031096 18.228752,-66.031029 18.228693,-66.031 18.228681,-66.030995 18.228678,-66.03099 18.228675,-66.030953 18.228644,-66.030655 18.228401,-66.030644 18.228393,-66.030631 18.228384,-66.030566 18.228315,-66.030565 18.228314,-66.030562 18.228313,-66.030546 18.228306,-66.030532 18.228298,-66.030531 18.228297,-66.030516 18.228289,-66.030484 18.228263,-66.030482 18.228261,-66.030345 18.22815,-66.030225 18.228053,-66.030161 18.228,-66.030039 18.227901,-66.029995 18.227864,-66.029792 18.227694,-66.029727 18.227639,-66.029709 18.227622,-66.029606 18.227519,-66.02954 18.227435,-66.029525 18.227416,-66.029497 18.22738,-66.02946 18.227334,-66.029435 18.227302,-66.029387 18.22724,-66.029288 18.227157,-66.02907 18.226974,-66.028965 18.226894,-66.028817 18.226769,-66.028636 18.226615,-66.028572 18.226562,-66.028498 18.226501,-66.02838 18.226405,-66.028343 18.226372,-66.02827 18.226309,-66.027967 18.226052,-66.02794 18.22603,-66.027921 18.226014,-66.027899 18.226002,-66.027829 18.225953,-66.027759 18.225892,-66.027719 18.225857,-66.027654 18.225796,-66.027613 18.225757,-66.027581 18.225723,-66.027524 18.225664,-66.027504 18.225641,-66.027496 18.225632,-66.027428 18.225553,-66.027366 18.225482,-66.027287 18.22539,-66.027214 18.2253,-66.027187 18.225262,-66.027122 18.225173,-66.027048 18.225068,-66.027028 18.225037,-66.027017 18.225021,-66.026923 18.224877,-66.026901 18.224843,-66.026895 18.224834,-66.026797 18.224684,-66.026754 18.224617,-66.026733 18.224585,-66.02673 18.22458,-66.026714 18.224556,-66.026601 18.224382,-66.026584 18.224356,-66.026579 18.224349,-66.026556 18.224316,-66.026501 18.224238,-66.026451 18.224177,-66.026435 18.224152,-66.026392 18.224095,-66.026318 18.223998,-66.02626 18.223922,-66.026241 18.223912,-66.026154 18.223846,-66.025969 18.223725,-66.025852 18.223667,-66.025819 18.22365,-66.025812 18.223647,-66.025718 18.223614,-66.02538 18.223558,-66.025377 18.223557,-66.025137 18.223518,-66.024924 18.223481,-66.0249 18.223477,-66.024789 18.223457,-66.024734 18.223444,-66.024704 18.22344,-66.024606 18.22343,-66.024524 18.223428,-66.024433 18.223425,-66.02439 18.223423,-66.024312 18.223437,-66.02424 18.223445,-66.024216 18.223449,-66.024166 18.223459,-66.024144 18.223463,-66.024009 18.223482,-66.023961 18.223489,-66.023915 18.223499,-66.023587 18.223557,-66.022375 18.223761,-66.022319 18.223769,-66.022108 18.223802,-66.022012 18.223816,-66.022009 18.223817,-66.021424 18.223908,-66.021129 18.223957,-66.021044 18.223971,-66.020977 18.223979,-66.020875 18.223992,-66.020609 18.224013,-66.020404 18.224019,-66.020353 18.224022,-66.020097 18.224034,-66.020061 18.224034,-66.019778 18.224041,-66.019711 18.224043,-66.018886 18.224038,-66.018834 18.224038,-66.018621 18.224041,-66.01827 18.224048,-66.017693 18.22405,-66.017649 18.224049,-66.017562 18.224048,-66.017311 18.224044,-66.017059 18.22404,-66.016744 18.224044,-66.016617 18.224046,-66.016559 18.224047,-66.016281 18.224051,-66.016117 18.224051,-66.015759 18.224051,-66.015602 18.224051,-66.01554 18.224053,-66.015475 18.224055,-66.015418 18.224057,-66.015232 18.224057,-66.015163 18.224057,-66.01508 18.224056,-66.014995 18.224052,-66.014858 18.224045,-66.014796 18.224041,-66.01472 18.224031,-66.014601 18.22401,-66.014514 18.223989,-66.014494 18.223984,-66.014415 18.223962,-66.014281 18.223919,-66.01421 18.223896,-66.014038 18.223823,-66.013957 18.22378,-66.013816 18.223692,-66.013778 18.223664,-66.013566 18.223506,-66.013366 18.223301,-66.013248 18.223138,-66.013117 18.2229,-66.01309 18.222832,-66.013017 18.222647,-66.012961 18.222501,-66.012932 18.222425,-66.012908 18.22236,-66.012798 18.222138,-66.012755 18.222051,-66.012755 18.222031,-66.012759 18.222012,-66.012773 18.221995,-66.013665 18.221485,-66.014689 18.220895,-66.014896 18.220769,-66.015016 18.220691,-66.015089 18.220625,-66.015198 18.220493,-66.015256 18.220404,-66.015311 18.220299,-66.01534 18.220201,-66.015385 18.219886,-66.015425 18.219467,-66.015499 18.218798,-66.015576 18.218187,-66.015582 18.218115,-66.015587 18.218029,-66.015577 18.217849,-66.015553 18.21767,-66.01553 18.217543,-66.015473 18.217381,-66.015374 18.217151,-66.015194 18.216892,-66.014638 18.216151,-66.014622 18.216137,-66.014597 18.216129,-66.014575 18.216129,-66.014541 18.216133,-66.014335 18.216277,-66.01408 18.216466,-66.014025 18.216511,-66.013961 18.216572,-66.013904 18.216642,-66.013862 18.216716,-66.013844 18.216785,-66.01384 18.216855,-66.013846 18.216907,-66.013882 18.217002,-66.014181 18.217552,-66.014254 18.217717,-66.014309 18.21786,-66.014367 18.218057,-66.014372 18.218101,-66.014368 18.218196,-66.014354 18.218309,-66.014323 18.21843,-66.014124 18.218958,-66.013917 18.2195,-66.013837 18.219708,-66.013813 18.219764,-66.013788 18.219809,-66.013664 18.220006,-66.013616 18.22007,-66.013546 18.220152,-66.013434 18.220248,-66.013195 18.220418,-66.012954 18.220571,-66.012652 18.220753,-66.012288 18.220975,-66.012205 18.221029,-66.012168 18.221054,-66.012153 18.221061,-66.01214 18.221059,-66.012126 18.221055,-66.012101 18.221044,-66.012079 18.221015,-66.011997 18.22091,-66.01167 18.220458,-66.011665 18.220451,-66.01151 18.22022,-66.011507 18.220214,-66.011471 18.220155,-66.011446 18.220123,-66.011421 18.220091,-66.011415 18.220067,-66.011413 18.220042,-66.011419 18.220013,-66.01144 18.219986,-66.011757 18.219658,-66.011897 18.219498,-66.011967 18.219399,-66.011991 18.219368,-66.012014 18.219355,-66.012036 18.219349,-66.012068 18.219349,-66.012138 18.219376,-66.012413 18.21957,-66.012465 18.219612,-66.012485 18.21962,-66.012521 18.219616,-66.012551 18.219595,-66.012577 18.219559,-66.01266 18.219435,-66.01278 18.219221,-66.012873 18.219051,-66.012949 18.218898,-66.013057 18.218748,-66.01316 18.218636,-66.013288 18.218524,-66.013453 18.218393,-66.013521 18.218335,-66.013546 18.218304,-66.013546 18.218276,-66.013504 18.218242,-66.013174 18.218007,-66.012502 18.217559,-66.012235 18.217377,-66.011296 18.216748,-66.010722 18.216358,-66.010442 18.216173,-66.010385 18.216139,-66.010345 18.21613,-66.010312 18.216134,-66.010272 18.216151,-66.00987 18.2167,-66.009637 18.217013,-66.009584 18.217106,-66.009421 18.21745,-66.009386 18.217533,-66.009366 18.217555,-66.009328 18.217562,-66.009258 18.217557,-66.009091 18.217499,-66.008893 18.217427,-66.008841 18.217412,-66.008831 18.217388,-66.008851 18.2173,-66.008897 18.217182,-66.008921 18.217121,-66.009002 18.216963,-66.009029 18.216899,-66.009027 18.216861,-66.009025 18.21683,-66.009005 18.216798,-66.008965 18.21677,-66.008918 18.216752,-66.008518 18.216598)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'VC','VILLAS_DE_CASTRO', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'VC' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.008459 18.216575,-66.008166 18.216463,-66.008063 18.216423,-66.008013 18.216414,-66.007975 18.216416,-66.007948 18.216428,-66.007925 18.216457,-66.007922 18.216463,-66.007804 18.216749,-66.007627 18.217179,-66.00748 18.217536,-66.007467 18.21756,-66.007434 18.217579,-66.007362 18.217574,-66.006514 18.217355,-66.006409 18.217328,-66.006364 18.217316,-66.006334 18.217294,-66.00633 18.217266,-66.00633 18.217223,-66.006347 18.217176,-66.006486 18.216807,-66.006486 18.216788,-66.006471 18.216755,-66.006446 18.21673,-66.006033 18.216573,-66.006029 18.216565,-66.006022 18.216554,-66.006017 18.216533,-66.00603 18.216471,-66.006033 18.216458,-66.006033 18.216456,-66.006038 18.216445,-66.006075 18.216356,-66.006133 18.216219,-66.006265 18.215907,-66.00633 18.215752,-66.006389 18.215609,-66.006415 18.215565,-66.006433 18.215554,-66.00647 18.215554,-66.006538 18.215574,-66.007318 18.215873,-66.007382 18.215896,-66.007411 18.215903,-66.00743 18.215903,-66.007457 18.215899,-66.007495 18.215883,-66.007531 18.215852,-66.007695 18.215456,-66.007697 18.215435,-66.007691 18.21541,-66.007668 18.215395,-66.00736 18.215276,-66.007256 18.215232,-66.007217 18.21521,-66.007207 18.215188,-66.007201 18.215157,-66.007214 18.2151,-66.007304 18.214876,-66.00736 18.214737,-66.007362 18.214722,-66.007366 18.214699,-66.007352 18.214674,-66.00733 18.214649,-66.007277 18.214625,-66.007066 18.21455,-66.006929 18.214499,-66.006896 18.214477,-66.006871 18.214451,-66.006866 18.214417,-66.006871 18.214372,-66.007059 18.21393,-66.007302 18.21334,-66.007322 18.213292,-66.007324 18.213254,-66.007312 18.213225,-66.007269 18.213192,-66.00691 18.21306,-66.006867 18.213052,-66.00684 18.213062,-66.006779 18.213215,-66.00615 18.21472,-66.006136 18.214753,-66.006136 18.214765,-66.006142 18.214778,-66.00616 18.2148,-66.006198 18.214825,-66.006562 18.214974,-66.006572 18.214986,-66.006573 18.215004,-66.006568 18.215028,-66.006493 18.215213,-66.006153 18.216028,-66.006149 18.216037,-66.005927 18.216564,-66.005606 18.217339,-66.0056 18.21736,-66.005595 18.217397,-66.005606 18.217442,-66.00563 18.21748,-66.005708 18.217534,-66.005772 18.217576,-66.00583 18.217602,-66.005962 18.217652,-66.005981 18.21766,-66.005996 18.217665,-66.006003 18.217667,-66.006207 18.217723,-66.006327 18.217754,-66.006499 18.217799,-66.006513 18.217803,-66.006825 18.217884,-66.006985 18.21793,-66.007117 18.217969,-66.007264 18.218012,-66.007694 18.218147,-66.007865 18.218199,-66.007912 18.218213,-66.007982 18.218234,-66.008326 18.218355,-66.008495 18.218425,-66.008693 18.218509,-66.008741 18.218534,-66.008788 18.218559,-66.008832 18.218584,-66.008999 18.21868,-66.009026 18.218687,-66.009255 18.218806,-66.009398 18.218892,-66.009454 18.218926,-66.009484 18.218945,-66.009491 18.218949,-66.009783 18.219143,-66.009834 18.219177,-66.009903 18.219223,-66.009936 18.219244,-66.00997 18.219267,-66.010218 18.21943,-66.010494 18.219613,-66.010553 18.219654,-66.010648 18.219719,-66.010792 18.219819,-66.010967 18.219928,-66.01113 18.220041,-66.011161 18.220069,-66.011274 18.220174,-66.0114 18.220316,-66.011559 18.220519,-66.011704 18.220705,-66.011901 18.220966,-66.012038 18.221149,-66.01206 18.221179,-66.012087 18.221217,-66.012224 18.221406,-66.01232 18.221542,-66.01241 18.221685,-66.012498 18.221835,-66.01253 18.221892,-66.012565 18.221956,-66.012605 18.22203,-66.012628 18.222081,-66.012647 18.22212,-66.012676 18.222176,-66.012701 18.222226,-66.012737 18.222306,-66.012749 18.222334,-66.012764 18.222365,-66.012824 18.222503,-66.012894 18.222685,-66.012951 18.222819,-66.013034 18.223007,-66.01311 18.22314,-66.013139 18.223184,-66.013193 18.223266,-66.013199 18.223274,-66.013299 18.223404,-66.013392 18.223509,-66.013446 18.22356,-66.013554 18.223654,-66.013661 18.223733,-66.013666 18.223737,-66.013763 18.223802,-66.013824 18.223835,-66.01389 18.223874,-66.013944 18.223906,-66.014154 18.224001,-66.014231 18.224028,-66.01433 18.224063,-66.014529 18.224108,-66.014694 18.224142,-66.014756 18.224157,-66.014833 18.22417,-66.014886 18.224172,-66.015024 18.224174,-66.015183 18.224175,-66.015234 18.224176,-66.015267 18.224176,-66.015493 18.224174,-66.015506 18.224174,-66.015585 18.224173,-66.015658 18.224176,-66.015686 18.224177,-66.015723 18.224178,-66.01576 18.224177,-66.015902 18.224177,-66.016282 18.224177,-66.016933 18.224168,-66.017059 18.224166,-66.017383 18.224172,-66.017693 18.224177,-66.01785 18.224176,-66.018073 18.224175,-66.018271 18.224174,-66.018639 18.224168,-66.018687 18.224167,-66.018834 18.224164,-66.019095 18.224166,-66.019146 18.224166,-66.019642 18.224169,-66.019713 18.22417,-66.019787 18.224168,-66.019797 18.224168,-66.019854 18.224166,-66.020538 18.224171,-66.020641 18.224164,-66.020666 18.224163,-66.020753 18.224157,-66.021078 18.22412,-66.021631 18.224047,-66.021976 18.224023,-66.022311 18.224,-66.02258 18.223956,-66.022693 18.223938,-66.02281 18.22391,-66.022975 18.223871,-66.023027 18.223858,-66.023131 18.223832,-66.023498 18.22377,-66.023956 18.223689,-66.024072 18.223657,-66.024097 18.223652,-66.024185 18.223638,-66.024363 18.223615,-66.024441 18.223612,-66.02452 18.223611,-66.024659 18.223613,-66.024708 18.223619,-66.024746 18.223624,-66.02479 18.22363,-66.024804 18.223632,-66.024899 18.223646,-66.025097 18.223675,-66.025341 18.22371,-66.025426 18.223726,-66.02551 18.223741,-66.025625 18.223769,-66.025667 18.223783,-66.025704 18.223795,-66.02573 18.223803,-66.025844 18.223849,-66.025928 18.223892,-66.025968 18.223916,-66.026054 18.223969,-66.026153 18.224045,-66.026205 18.224083,-66.026236 18.224112,-66.026247 18.224123,-66.026259 18.224137,-66.026304 18.224184,-66.026352 18.224239,-66.026374 18.224266,-66.026386 18.224281,-66.026397 18.224294,-66.026405 18.224304,-66.02648 18.224411,-66.026482 18.224414,-66.026502 18.224444,-66.026524 18.224478,-66.026593 18.224583,-66.026619 18.224624,-66.026629 18.224639,-66.026715 18.224771,-66.026755 18.224833,-66.026778 18.224868,-66.0268 18.224903,-66.026832 18.22495,-66.02687 18.22501,-66.026875 18.225017,-66.026899 18.225053,-66.026965 18.225154,-66.026994 18.225198,-66.027095 18.225361,-66.027138 18.22543,-66.027159 18.225465,-66.027167 18.225479,-66.027214 18.225557,-66.02723 18.225586,-66.027267 18.22565,-66.027302 18.225712,-66.027317 18.225739,-66.027348 18.225782,-66.027362 18.225801,-66.027404 18.225849,-66.027408 18.225853,-66.027428 18.22587,-66.027463 18.225901,-66.02752 18.225952,-66.027585 18.225996,-66.027699 18.226076,-66.027751 18.226112,-66.027765 18.226122,-66.027876 18.226199,-66.027878 18.2262,-66.028119 18.226398,-66.028166 18.226436,-66.028185 18.226452,-66.028427 18.226649,-66.028457 18.226673,-66.028526 18.226733,-66.028553 18.226756,-66.028775 18.226948,-66.028818 18.226982,-66.02882 18.226985,-66.028845 18.22702,-66.028909 18.227072,-66.028999 18.227145,-66.02913 18.227251,-66.029144 18.227264,-66.029182 18.227296,-66.02929 18.227387,-66.029416 18.227495,-66.029552 18.227614,-66.029642 18.227693,-66.029729 18.227761,-66.029739 18.22777,-66.029782 18.227804,-66.029818 18.227832,-66.030025 18.227996,-66.030157 18.228104,-66.03029 18.228212,-66.030487 18.228372,-66.030495 18.228378,-66.030596 18.22846,-66.030663 18.228515,-66.030699 18.228544,-66.030826 18.228647,-66.030991 18.228782,-66.031003 18.228794,-66.031021 18.228809,-66.031043 18.228827,-66.031123 18.228893,-66.031158 18.228921,-66.031239 18.228988,-66.031317 18.229052,-66.0314 18.22912,-66.031416 18.229132,-66.031446 18.229157,-66.031534 18.229229,-66.031559 18.229249,-66.031657 18.22933,-66.031761 18.229415,-66.031935 18.229558,-66.032057 18.229658,-66.032137 18.229723,-66.032187 18.229764,-66.0322 18.229774,-66.032217 18.229787,-66.032303 18.229864,-66.032403 18.229946,-66.032424 18.229962,-66.032504 18.230027,-66.032522 18.23004,-66.032526 18.230046,-66.032529 18.230056,-66.032531 18.230075,-66.032524 18.230088,-66.032519 18.2301,-66.032515 18.230108,-66.032439 18.230308,-66.032435 18.230319,-66.032404 18.230407,-66.032395 18.230435,-66.032338 18.230568,-66.032336 18.230573,-66.032326 18.230597,-66.032255 18.230776,-66.032235 18.230825,-66.032227 18.230846,-66.032217 18.23087,-66.032102 18.231148,-66.032081 18.231203,-66.032076 18.231216,-66.032016 18.231368,-66.031938 18.23157,-66.031933 18.231582,-66.031904 18.231653,-66.031855 18.231773,-66.031829 18.231848,-66.031818 18.231892,-66.031802 18.231951,-66.031802 18.231953,-66.03163 18.232414,-66.031583 18.232534,-66.03138 18.233061,-66.031342 18.233172,-66.031267 18.233393,-66.03123 18.233503,-66.031229 18.233531,-66.031235 18.233554,-66.031261 18.233588,-66.031282 18.233606,-66.03129 18.233613,-66.031334 18.23364,-66.031364 18.233656,-66.03188 18.233826,-66.031896 18.233846,-66.031905 18.233871,-66.0319 18.233897,-66.031709 18.234403,-66.031711 18.234428,-66.03173 18.234437,-66.03198 18.234514,-66.032007 18.234592,-66.031876 18.234967)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'VC','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'VC' and direction = 'VILLAS_DE_CASTRO'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'VC', 'VILLAS_DE_CASTRO'),(8031, 1, 'VC', 'VILLAS_DE_CASTRO');
delete from ref.subroute_stop where route = 'VC' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8031, 0, 'VC', 'TERM_CAGUAS'),(8000, 1, 'VC', 'TERM_CAGUAS');
