delete from ref.subroute where route = 'BE' and direction = 'BEATRIZ';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.035823 18.231403,-66.035303 18.231331,-66.03523 18.2313,-66.035214 18.231269,-66.035216 18.231241,-66.035227 18.231189,-66.036259 18.228774,-66.037466 18.226642,-66.038458 18.224777,-66.039539 18.222927,-66.041185 18.219834,-66.044615 18.21499,-66.046414 18.212529,-66.046625 18.212068,-66.046664 18.210442,-66.04689 18.209915,-66.047126 18.209669,-66.048534 18.208759,-66.048856 18.208414,-66.04897 18.208159,-66.049057 18.207674,-66.049041 18.207058,-66.049252 18.206391,-66.050498 18.204032,-66.051157 18.202952,-66.051793 18.202049,-66.053437 18.200591,-66.053576 18.200421,-66.05367 18.200215,-66.054092 18.198718,-66.054719 18.195534,-66.054845 18.195043,-66.054926 18.194881,-66.055704 18.194351,-66.057325 18.193412,-66.05768 18.193286,-66.057872 18.193071,-66.057991 18.192622,-66.057946 18.191441,-66.05738 18.190539,-66.057301 18.190242,-66.057506 18.188279,-66.057615 18.187885,-66.057739 18.18767,-66.057978 18.187517,-66.059187 18.187473,-66.059587 18.187395,-66.061117 18.186469,-66.061415 18.186396,-66.061597 18.186516,-66.061891 18.187274,-66.062043 18.187422,-66.062909 18.18725,-66.063106 18.187263,-66.063434 18.187375,-66.064457 18.187924,-66.064839 18.187987,-66.065104 18.187758,-66.065428 18.187652,-66.065526 18.187561,-66.06555 18.187417,-66.065375 18.187184,-66.065248 18.186792,-66.065285 18.186453,-66.065497 18.186018,-66.065772 18.1857,-66.065898 18.185475,-66.066046 18.185392,-66.066227 18.185423,-66.066296 18.185479,-66.066404 18.185647,-66.066461 18.185888,-66.066549 18.185991,-66.066901 18.186137,-66.067269 18.186421,-66.06778 18.186506,-66.068062 18.186633,-66.068517 18.187138,-66.068738 18.187127,-66.069093 18.186884,-66.069564 18.186873,-66.069892 18.186798,-66.070062 18.186817,-66.070254 18.186998,-66.070383 18.186995,-66.070491 18.186909,-66.070604 18.186425,-66.070731 18.186303,-66.07105 18.186183,-66.071104 18.186085,-66.071089 18.185982,-66.070591 18.185383,-66.070079 18.185155,-66.069403 18.184726,-66.069247 18.184536,-66.069246 18.184425,-66.069298 18.18439,-66.069523 18.184432,-66.070021 18.184636,-66.070231 18.184664,-66.070463 18.184588,-66.070796 18.184315,-66.070994 18.184341,-66.071417 18.184754,-66.07153 18.184812,-66.071916 18.184884,-66.072119 18.185,-66.072538 18.185535,-66.072872 18.18608,-66.072989 18.186193,-66.073126 18.186248,-66.073925 18.186323,-66.074482 18.186197,-66.074652 18.1862,-66.075159 18.186316,-66.076163 18.186199,-66.077594 18.186405,-66.077791 18.18631,-66.077922 18.185832,-66.078025 18.185688,-66.078424 18.185282,-66.078541 18.185222,-66.078636 18.18522,-66.078757 18.185297,-66.079259 18.185686,-66.079471 18.186059,-66.079593 18.186128,-66.079811 18.186111,-66.080167 18.185843,-66.080405 18.185795,-66.080593 18.185876,-66.080826 18.186064,-66.081002 18.186053,-66.081224 18.185933,-66.08247 18.184614,-66.083132 18.184335,-66.084997 18.184419,-66.085854 18.184304,-66.086021 18.184225,-66.086442 18.183598,-66.086568 18.183518,-66.088178 18.183582,-66.088512 18.183526,-66.088639 18.183402,-66.088775 18.182995,-66.088748 18.182651,-66.08864 18.182271,-66.088685 18.182006,-66.088789 18.181804,-66.089145 18.181461,-66.089811 18.181381,-66.090144 18.181262,-66.090368 18.181127,-66.090785 18.180592,-66.090849 18.180188,-66.091197 18.179979,-66.091263 18.179743,-66.091249 18.179353,-66.090812 18.178907,-66.09062 18.178799,-66.090401 18.178741,-66.09019 18.178748,-66.089879 18.17883,-66.089677 18.178802,-66.089443 18.178444,-66.08918 18.178238,-66.088829 18.17806,-66.088712 18.177933,-66.088639 18.177717,-66.088658 18.177498,-66.08918 18.175906,-66.089355 18.175559,-66.089549 18.175415,-66.089893 18.175387,-66.090374 18.175551,-66.090542 18.175495,-66.0913 18.17459,-66.091813 18.174025,-66.091983 18.173876,-66.092173 18.173745,-66.092576 18.173532,-66.092716 18.173477,-66.092842 18.173457,-66.093021 18.173483,-66.093191 18.173498,-66.093389 18.173493,-66.093513 18.173462,-66.093606 18.173388,-66.093692 18.173212,-66.093678 18.173027,-66.093591 18.172891,-66.093492 18.172816,-66.0934 18.172763,-66.093319 18.17267,-66.09321 18.172494,-66.093158 18.172368,-66.093129 18.172245,-66.093098 18.172047,-66.09309 18.171842,-66.09311 18.171678,-66.093151 18.171507,-66.093253 18.171336,-66.093434 18.171182,-66.093539 18.171056,-66.093568 18.170914,-66.093575 18.170781,-66.093593 18.170566,-66.093948 18.169845,-66.094155 18.169711,-66.09465 18.169597,-66.09509 18.169215)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BE','BEATRIZ', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'BE' and direction = 'GEORGETTI';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.095025 18.169106,-66.094633 18.169519,-66.094126 18.169642,-66.093866 18.169825,-66.093518 18.170543,-66.093467 18.171013,-66.093375 18.171155,-66.093183 18.171328,-66.09311 18.171468,-66.093041 18.171819,-66.093048 18.172042,-66.093104 18.172348,-66.093162 18.172501,-66.093273 18.1727,-66.093378 18.172808,-66.093545 18.172939,-66.093606 18.173027,-66.093629 18.173178,-66.093555 18.173345,-66.093464 18.173407,-66.093341 18.173432,-66.093108 18.173424,-66.092847 18.173391,-66.092697 18.173415,-66.092559 18.173466,-66.092137 18.17369,-66.091923 18.173854,-66.091777 18.173989,-66.0905 18.175443,-66.090381 18.175486,-66.089838 18.175314,-66.089527 18.175354,-66.0893 18.175521,-66.089117 18.175881,-66.088584 18.177519,-66.088578 18.177763,-66.088664 18.178023,-66.089118 18.178276,-66.089373 18.178472,-66.089556 18.178783,-66.089648 18.178861,-66.089884 18.178895,-66.090356 18.178803,-66.090736 18.178934,-66.091142 18.179356,-66.091196 18.179517,-66.091195 18.179737,-66.091148 18.179933,-66.090783 18.180147,-66.09069 18.180598,-66.090289 18.181092,-66.089735 18.181323,-66.089109 18.181393,-66.088719 18.181767,-66.088609 18.181982,-66.08856 18.18227,-66.08869 18.182776,-66.088696 18.182984,-66.088591 18.183319,-66.088476 18.183458,-66.088156 18.183496,-66.086547 18.183447,-66.086382 18.183552,-66.085962 18.184178,-66.085839 18.184232,-66.084994 18.184342,-66.083109 18.18426,-66.082419 18.184553,-66.081781 18.185244,-66.081688 18.18528,-66.081172 18.185874,-66.08098 18.185979,-66.080851 18.185988,-66.080644 18.185816,-66.080411 18.185717,-66.080133 18.185773,-66.079848 18.185993,-66.079612 18.186053,-66.079532 18.186008,-66.079319 18.185634,-66.079038 18.185395,-66.078598 18.185112,-66.078491 18.185127,-66.077961 18.18564,-66.077827 18.185862,-66.077756 18.186191,-66.07759 18.186327,-66.076069 18.186117,-66.075251 18.186235,-66.075045 18.186229,-66.074656 18.186127,-66.074235 18.186167,-66.073917 18.186264,-66.073143 18.186191,-66.072922 18.186046,-66.072589 18.185503,-66.072161 18.184957,-66.071933 18.184828,-66.071452 18.184705,-66.071027 18.184291,-66.07094 18.184252,-66.070773 18.18426,-66.070425 18.184541,-66.070228 18.184605,-66.07004 18.18458,-66.069544 18.184377,-66.06925 18.184317,-66.069173 18.184374,-66.069159 18.184474,-66.069258 18.184675,-66.069502 18.184882,-66.070049 18.185206,-66.070554 18.18543,-66.071032 18.186006,-66.071007 18.18614,-66.070625 18.186293,-66.070549 18.186398,-66.070444 18.186844,-66.070372 18.186941,-66.070262 18.186936,-66.070086 18.186741,-66.069968 18.186729,-66.069557 18.186815,-66.069074 18.186827,-66.068712 18.187078,-66.068541 18.187089,-66.068441 18.187007,-66.06825 18.186718,-66.068066 18.18657,-66.067797 18.186454,-66.067292 18.186371,-66.0669 18.186071,-66.066579 18.185945,-66.066516 18.185876,-66.066438 18.185587,-66.066324 18.185425,-66.066188 18.185352,-66.06601 18.185339,-66.065851 18.185444,-66.065705 18.185698,-66.06544 18.186006,-66.065217 18.186493,-66.065193 18.186804,-66.065309 18.187177,-66.065481 18.187422,-66.065483 18.187539,-66.065063 18.187706,-66.064827 18.187936,-66.064622 18.187928,-66.064361 18.187833,-66.06355 18.187366,-66.063203 18.187227,-66.062892 18.187202,-66.062199 18.187366,-66.061995 18.187351,-66.061923 18.187261,-66.061658 18.186544,-66.061498 18.186379,-66.061394 18.186358,-66.061102 18.186427,-66.059574 18.18733,-66.059247 18.187412,-66.057982 18.187471,-66.057716 18.18762,-66.057564 18.187896,-66.057439 18.188362,-66.057256 18.19024,-66.057286 18.190474,-66.057877 18.191461,-66.05791 18.191592,-66.057953 18.192581,-66.057903 18.192864,-66.057779 18.193116,-66.057641 18.19326,-66.057348 18.193347,-66.055549 18.194392,-66.054887 18.194854,-66.054792 18.195059,-66.05466 18.195597,-66.053966 18.199026,-66.053539 18.200362,-66.053417 18.20054,-66.051754 18.201904,-66.050388 18.20412,-66.049086 18.206611,-66.048944 18.206972,-66.048923 18.20795,-66.048815 18.208279,-66.048507 18.20871,-66.047087 18.209594,-66.046874 18.209771,-66.046649 18.210188,-66.04658 18.210449,-66.046524 18.211692,-66.04631 18.212235,-66.046036 18.212738,-66.041889 18.218622,-66.041415 18.219256,-66.041155 18.219475,-66.040852 18.220201,-66.036272 18.228669,-66.035168 18.231238,-66.035145 18.231274,-66.035101 18.231281,-66.034844 18.231257,-66.034405 18.231346,-66.034337 18.231759,-66.033685 18.233874,-66.033526 18.234319,-66.033239 18.234846,-66.03263 18.234652,-66.032386 18.234652,-66.032055 18.234549,-66.031999 18.234599,-66.031756 18.235328,-66.030906 18.235102,-66.030819 18.23501,-66.030811 18.234886,-66.03128 18.233678,-66.03134 18.233654,-66.031482 18.233687,-66.034262 18.234696,-66.03438 18.234735,-66.034423 18.234702,-66.035553 18.235121,-66.035859 18.234321,-66.035937 18.234294,-66.036897 18.231669,-66.036353 18.231498,-66.035938 18.231419)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BE','GEORGETTI', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'BE' and direction = 'BEATRIZ'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8008, 0, 'BE', 'BEATRIZ'),(8026, 1, 'BE', 'BEATRIZ');
delete from ref.subroute_stop where route = 'BE' and direction = 'GEORGETTI'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8026, 0, 'BE', 'GEORGETTI'),(8008, 1, 'BE', 'GEORGETTI');
