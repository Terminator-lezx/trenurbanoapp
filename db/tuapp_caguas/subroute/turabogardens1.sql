delete from ref.subroute where route = 'U1' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.059478 18.217818,-66.058798 18.215526,-66.058573 18.214752,-66.058181 18.213414,-66.057896 18.212509,-66.057835 18.212368,-66.057758 18.21217,-66.057728 18.212089,-66.057612 18.212022,-66.05754 18.212028,-66.05614 18.212414,-66.054636 18.212827,-66.054261 18.212969,-66.052997 18.213502,-66.051729 18.214176,-66.051531 18.214317,-66.050972 18.214839,-66.050016 18.215378,-66.048031 18.21646,-66.046111 18.217428,-66.045161 18.217891,-66.045109 18.217911,-66.045073 18.21788,-66.045021 18.217797,-66.04477 18.217329,-66.044706 18.217272,-66.044259 18.216872,-66.043646 18.216476,-66.043505 18.216447,-66.043373 18.216491,-66.043213 18.216692,-66.041745 18.218791,-66.041496 18.219094,-66.041367 18.219229,-66.041205 18.219378,-66.041116 18.219494,-66.041049 18.219669,-66.041012 18.219835,-66.040977 18.219932,-66.039634 18.222561,-66.037328 18.226743,-66.037129 18.227145,-66.036432 18.228407,-66.036162 18.228931,-66.035612 18.230205,-66.035167 18.231265,-66.035111 18.231277,-66.034879 18.231252,-66.034417 18.231325,-66.03431 18.231827,-66.034118 18.232441,-66.033969 18.232988,-66.03373 18.233717,-66.033503 18.234387,-66.033422 18.234439,-66.033222 18.234863,-66.033119 18.235035,-66.032763 18.234988,-66.032448 18.235016)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'U1','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'U1' and direction = 'TURABO_1';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.032334 18.235034,-66.031877 18.235038,-66.031749 18.235322,-66.030735 18.235051,-66.031324 18.233574,-66.031505 18.233171,-66.031832 18.232466,-66.031912 18.232384,-66.032211 18.232007,-66.03301 18.23034,-66.034564 18.228074,-66.034857 18.22758,-66.034906 18.227411,-66.034944 18.227254,-66.035028 18.227115,-66.035145 18.227022,-66.035421 18.226531,-66.035528 18.226415,-66.03572 18.226347,-66.035952 18.226364,-66.036416 18.226563,-66.036799 18.226724,-66.037118 18.226879,-66.037335 18.226863,-66.039676 18.222582,-66.04116 18.219905,-66.04127 18.219754,-66.041388 18.219609,-66.041474 18.21947,-66.041583 18.219278,-66.042243 18.218364,-66.042941 18.217368,-66.043365 18.216768,-66.043505 18.21657,-66.043588 18.216508,-66.04364 18.216514,-66.044252 18.216903,-66.044739 18.217345,-66.045 18.217847,-66.045058 18.217941,-66.045142 18.217962,-66.045194 18.217948,-66.046133 18.217468,-66.048054 18.216499,-66.050094 18.215428,-66.051027 18.214903,-66.051628 18.214357,-66.051744 18.214263,-66.053116 18.21355,-66.054627 18.212922,-66.05616 18.21249,-66.057528 18.212117,-66.057602 18.212098,-66.05766 18.212115,-66.057698 18.212165,-66.058883 18.21616,-66.059411 18.21785)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'U1','TURABO_1', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'U1' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8020, 0, 'U1', 'TERM_CAGUAS'),(8000, 1, 'U1', 'TERM_CAGUAS');
delete from ref.subroute_stop where route = 'U1' and direction = 'TURABO_1'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'U1', 'TURABO_1'),(8020, 1, 'U1', 'TURABO_1');
