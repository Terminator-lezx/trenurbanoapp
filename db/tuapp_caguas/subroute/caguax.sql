delete from ref.subroute where route = 'CX' and direction = 'CAGUAX';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.031861 18.234996,-66.031844 18.235047,-66.031835 18.235077,-66.031834 18.23508,-66.031828 18.2351,-66.031828 18.2351,-66.031821 18.235123,-66.031819 18.23513,-66.031797 18.235201,-66.031795 18.235207,-66.031774 18.235274,-66.03177 18.235288,-66.031767 18.235299,-66.03176 18.23532,-66.03176 18.23532,-66.031757 18.235329,-66.031734 18.235322,-66.031728 18.235321,-66.031678 18.235307,-66.031566 18.235278,-66.03154 18.235271,-66.031526 18.235267,-66.031513 18.235264,-66.031389 18.235231,-66.031342 18.235219,-66.03132 18.235213,-66.03129 18.235206,-66.031287 18.235205,-66.031164 18.235174,-66.031008 18.235137,-66.03081 18.235084,-66.030729 18.235072,-66.030691 18.235075,-66.030601 18.235081,-66.030545 18.235099,-66.030522 18.235133,-66.030491 18.235179,-66.030394 18.235415,-66.030383 18.235441,-66.030256 18.235749,-66.030204 18.235876,-66.030185 18.235923,-66.030092 18.236147,-66.030071 18.2362,-66.029988 18.2364,-66.029976 18.236424,-66.029849 18.236677,-66.029809 18.236724,-66.029796 18.236735,-66.029756 18.236771,-66.029719 18.236788,-66.029698 18.236798,-66.029601 18.236827,-66.029507 18.236825,-66.029243 18.236778,-66.029088 18.23675,-66.029029 18.236739,-66.029026 18.236739,-66.028599 18.236664,-66.028443 18.236652,-66.028243 18.236636,-66.027767 18.236617,-66.027752 18.236616,-66.027463 18.236604,-66.027344 18.236605,-66.026908 18.236596,-66.02677 18.236605,-66.026681 18.236611,-66.026595 18.236621,-66.026467 18.236636,-66.025738 18.236722,-66.025484 18.236756,-66.025407 18.236767,-66.025158 18.2368,-66.02493 18.23684,-66.024719 18.236915,-66.024586 18.236962,-66.024304 18.237073,-66.024123 18.237144,-66.024088 18.237157,-66.02399 18.237196,-66.023893 18.237234,-66.023471 18.237399,-66.023031 18.237582,-66.022573 18.237775,-66.022088 18.237981,-66.021538 18.238212,-66.021164 18.238373,-66.021079 18.238409,-66.020786 18.238529,-66.020105 18.238826,-66.020029 18.238859,-66.019922 18.238906,-66.019836 18.238918,-66.019783 18.238915,-66.019728 18.238906,-66.019698 18.238886,-66.019663 18.238864,-66.019596 18.238703,-66.019322 18.238159,-66.018901 18.237248,-66.018884 18.237204,-66.018872 18.237196,-66.018859 18.237189,-66.018845 18.237185,-66.018831 18.237183,-66.018816 18.237182,-66.018801 18.237184,-66.018787 18.237188,-66.018774 18.237194,-66.018318 18.237397,-66.017704 18.237674,-66.017623 18.237703,-66.017608 18.237704,-66.017593 18.237703,-66.017578 18.2377,-66.017564 18.237695,-66.017551 18.237687,-66.01754 18.237678,-66.01753 18.237667,-66.017522 18.237655,-66.017516 18.237641,-66.017513 18.237627,-66.017512 18.237613,-66.017439 18.236829,-66.017428 18.236695,-66.01742 18.236678,-66.01741 18.236663,-66.017397 18.23665,-66.017382 18.236639,-66.017366 18.23663,-66.017348 18.236624,-66.01733 18.236621,-66.017311 18.23662,-66.017292 18.236622,-66.015811 18.23675,-66.015798 18.23675,-66.015785 18.236748,-66.015773 18.236744,-66.015762 18.236738,-66.015752 18.23673,-66.015744 18.236721,-66.015738 18.23671,-66.015733 18.236699,-66.015731 18.236687,-66.015731 18.236674,-66.015733 18.236662,-66.015733 18.235899,-66.01572 18.235885,-66.015705 18.235873,-66.015688 18.235864,-66.01567 18.235857,-66.01565 18.235854,-66.015631 18.235853,-66.015611 18.235856,-66.014687 18.235866,-66.014437 18.235856,-66.014227 18.235881,-66.014073 18.235931,-66.013847 18.235973,-66.013577 18.235994,-66.012092 18.236001)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'CX','CAGUAX', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'CX' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.012054 18.236001,-66.011863 18.235999,-66.011842 18.235985,-66.011824 18.235968,-66.011809 18.235949,-66.011798 18.235927,-66.01179 18.235905,-66.011786 18.235881,-66.011786 18.235856,-66.01179 18.235833,-66.01181 18.234971,-66.011812 18.23495,-66.011822 18.234931,-66.011848 18.234918,-66.014141 18.234904,-66.014522 18.234896,-66.014602 18.234898,-66.014632 18.234891,-66.014647 18.234844,-66.014648 18.233261,-66.014647 18.23268,-66.014654 18.232651,-66.01467 18.232639,-66.014702 18.23263,-66.014758 18.232624,-66.014858 18.232632,-66.014954 18.232653,-66.015911 18.233201,-66.015949 18.233205,-66.015993 18.233203,-66.016023 18.233184,-66.016322 18.232706,-66.016519 18.232391,-66.016533 18.232362,-66.016536 18.232334,-66.016512 18.232313,-66.015494 18.231737,-66.014841 18.231297,-66.014819 18.231282,-66.014809 18.231261,-66.014809 18.231242,-66.014809 18.231217,-66.014837 18.231171,-66.015148 18.230728,-66.015992 18.229554,-66.016026 18.229542,-66.016088 18.229543,-66.016134 18.229573,-66.017351 18.230389,-66.01761 18.230563,-66.017622 18.230575,-66.017626 18.230596,-66.017624 18.230621,-66.017568 18.230709,-66.017361 18.231056,-66.017359 18.231081,-66.017363 18.231108,-66.017375 18.231133,-66.017391 18.23115,-66.017419 18.231179,-66.017477 18.231196,-66.017937 18.231174,-66.01882 18.231124,-66.018888 18.231126,-66.01897 18.231132,-66.019038 18.231152,-66.019148 18.23123,-66.019499 18.23147,-66.019521 18.231491,-66.019531 18.231514,-66.019539 18.231547,-66.019539 18.231579,-66.019531 18.231625,-66.019294 18.232135,-66.019304 18.232162,-66.019322 18.232179,-66.019368 18.232216,-66.01944 18.23225,-66.019494 18.232286,-66.0195 18.232295,-66.019505 18.232318,-66.019502 18.232336,-66.019499 18.232367,-66.019435 18.232508,-66.019205 18.233002,-66.018939 18.233548,-66.018652 18.234128,-66.018619 18.234204,-66.018574 18.234348,-66.018536 18.234543,-66.018523 18.234921,-66.018518 18.235968,-66.018532 18.236308,-66.018542 18.236398,-66.018561 18.236516,-66.018626 18.236784,-66.018738 18.237128,-66.01884 18.237398,-66.01938 18.23853,-66.019539 18.238908,-66.019581 18.238954,-66.019626 18.238983,-66.019685 18.239009,-66.019769 18.239024,-66.01992 18.239011,-66.019962 18.238993,-66.020174 18.238901,-66.020406 18.2388,-66.020412 18.238798,-66.020579 18.238736,-66.020745 18.238675,-66.020751 18.238673,-66.021709 18.238283,-66.022068 18.238137,-66.022932 18.237776,-66.022967 18.237761,-66.023595 18.237496,-66.024084 18.237289,-66.024242 18.237226,-66.024807 18.237002,-66.024841 18.236988,-66.024969 18.236956,-66.025233 18.236905,-66.025713 18.236833,-66.025872 18.236809,-66.02613 18.236771,-66.026648 18.23672,-66.02699 18.236709,-66.027091 18.23671,-66.027378 18.236714,-66.027602 18.236717,-66.028179 18.236742,-66.028491 18.236759,-66.028813 18.236806,-66.029217 18.236884,-66.029681 18.236973,-66.02973 18.236976,-66.029732 18.236976,-66.029826 18.236981,-66.029865 18.236966,-66.029913 18.23694,-66.02994 18.236896,-66.029995 18.236764,-66.030004 18.236742,-66.030056 18.236616,-66.03009 18.236534,-66.030159 18.236365,-66.030236 18.236181,-66.030241 18.236167,-66.030306 18.23601,-66.03042 18.235734,-66.03054 18.235441,-66.030592 18.235314,-66.030632 18.235216,-66.030653 18.235166,-66.030691 18.235075,-66.030805 18.234804,-66.030912 18.234536,-66.030967 18.234398,-66.030982 18.234365,-66.031014 18.234347,-66.031029 18.234353,-66.0311 18.234379,-66.03125 18.234451,-66.031445 18.234523,-66.031534 18.234553,-66.031595 18.234562,-66.031675 18.234546,-66.031712 18.234547,-66.031758 18.23454,-66.031808 18.234514,-66.031864 18.234494,-66.03193 18.234494,-66.031943 18.234498,-66.031974 18.234508,-66.031991 18.234518,-66.032001 18.234543,-66.032 18.234599,-66.031999 18.234603,-66.031992 18.234623,-66.031986 18.234643,-66.031956 18.234732,-66.031941 18.234769,-66.031899 18.234879)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'CX','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'CX' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8034, 0, 'CX', 'TERM_CAGUAS'),(8000, 1, 'CX', 'TERM_CAGUAS');
delete from ref.subroute_stop where route = 'CX' and direction = 'CAGUAX'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'CX', 'CAGUAX'),(8034, 1, 'CX', 'CAGUAX');
