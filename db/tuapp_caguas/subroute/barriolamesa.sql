delete from ref.subroute where route = 'BM' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.057374 18.277003,-66.057245 18.277249,-66.057231 18.277362,-66.057239 18.277494,-66.057272 18.277554,-66.057315 18.27761,-66.057363 18.277648,-66.057425 18.27768,-66.057608 18.277674,-66.057799 18.277598,-66.058245 18.277395,-66.058329 18.277365,-66.058543 18.277365,-66.058685 18.277417,-66.058795 18.277503,-66.059096 18.277888,-66.059133 18.277956,-66.059153 18.278065,-66.059153 18.278154,-66.059139 18.278277,-66.059068 18.278592,-66.05905 18.278656,-66.059045 18.278839,-66.059075 18.279027,-66.059108 18.279615,-66.059065 18.279706,-66.059019 18.279753,-66.058896 18.279809,-66.058756 18.27987,-66.058643 18.279798,-66.058507 18.279627,-66.058427 18.279565,-66.058337 18.279511,-66.058207 18.279475,-66.058053 18.279478,-66.057914 18.279513,-66.057662 18.279682,-66.057455 18.279851,-66.057228 18.280019,-66.057032 18.280108,-66.05691 18.280146,-66.056721 18.280188,-66.05648 18.280209,-66.05628 18.280228,-66.055885 18.280198,-66.055762 18.280227,-66.055686 18.280261,-66.055613 18.280345,-66.055467 18.280457,-66.05533 18.280523,-66.055103 18.280535,-66.054936 18.280558,-66.054576 18.280664,-66.054143 18.28092,-66.054026 18.280952,-66.053674 18.280963,-66.053378 18.28103,-66.053133 18.28112,-66.052702 18.281316,-66.052287 18.28146,-66.051576 18.281567,-66.051394 18.281479,-66.05113 18.281172,-66.050929 18.28098,-66.050804 18.2809,-66.05065 18.280851,-66.050463 18.280821,-66.050205 18.28085,-66.04982 18.280957,-66.04966 18.281005,-66.049524 18.281025,-66.049354 18.281025,-66.048819 18.280947,-66.048352 18.281004,-66.047913 18.281069,-66.047594 18.281117,-66.047167 18.281204,-66.046981 18.281248,-66.046861 18.281264,-66.046612 18.281248,-66.046198 18.28121,-66.045893 18.281214,-66.045747 18.281215,-66.045655 18.281192,-66.045607 18.281132,-66.045582 18.281052,-66.045602 18.280836,-66.045707 18.280549,-66.045666 18.280197,-66.045549 18.280038,-66.045419 18.279907,-66.045316 18.279845,-66.04517 18.27981,-66.044496 18.279893,-66.044333 18.279935,-66.044085 18.280041,-66.043872 18.280147,-66.043397 18.280536,-66.043216 18.280575,-66.042638 18.280642,-66.042499 18.280533,-66.041965 18.277726,-66.041906 18.277425,-66.041503 18.275022,-66.041428 18.274573,-66.041332 18.274078,-66.041247 18.273171,-66.041067 18.272403,-66.040823 18.271558,-66.040597 18.270867,-66.040041 18.268977,-66.039465 18.267067,-66.038354 18.263159,-66.038278 18.262837,-66.037948 18.261826,-66.037808 18.261405,-66.037533 18.260441,-66.037245 18.259491,-66.036967 18.258475,-66.036849 18.258006,-66.036688 18.257256,-66.036553 18.256495,-66.03642 18.255185,-66.036366 18.254648,-66.036334 18.253936,-66.035837 18.246462,-66.035737 18.244966,-66.035627 18.243314,-66.035473 18.241293,-66.035425 18.240734,-66.035397 18.240146,-66.035392 18.240022,-66.035397 18.239854,-66.035428 18.239655,-66.035496 18.239438,-66.035531 18.239222,-66.035525 18.239142,-66.035306 18.238868,-66.03516 18.238678,-66.034884 18.238448,-66.034553 18.238093,-66.034276 18.237883,-66.033949 18.237697,-66.033557 18.237552,-66.033066 18.237465,-66.032327 18.237345,-66.032335 18.236549,-66.032429 18.236418,-66.032787 18.235982,-66.032839 18.23584,-66.032844 18.235768,-66.032875 18.235749,-66.032903 18.235717,-66.032918 18.235666,-66.032932 18.235611,-66.032959 18.235542,-66.033123 18.235141,-66.033148 18.23507,-66.033125 18.235032,-66.033058 18.235006,-66.032483 18.234838)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BM','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'BM' and direction = 'BO_LAMESA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.032142 18.235189,-66.031993 18.235528,-66.032627 18.235705,-66.032714 18.235762,-66.032731 18.235827,-66.032734 18.235888,-66.032692 18.235991,-66.032403 18.236346,-66.032125 18.236755,-66.031518 18.237296,-66.032126 18.237413,-66.033038 18.237597,-66.033265 18.237606,-66.033692 18.237709,-66.034175 18.23795,-66.034363 18.238123,-66.034432 18.238229,-66.034604 18.238445,-66.035083 18.238888,-66.035134 18.238968,-66.035189 18.239062,-66.035215 18.239216,-66.035247 18.239705,-66.035275 18.240162,-66.035315 18.240711,-66.035571 18.244759,-66.035687 18.246479,-66.036187 18.253834,-66.036255 18.254697,-66.036296 18.255167,-66.036445 18.256498,-66.036563 18.257307,-66.036735 18.258012,-66.036871 18.258564,-66.037145 18.259499,-66.037428 18.260462,-66.037699 18.261426,-66.03777 18.26167,-66.03815 18.262942,-66.038209 18.263135,-66.0388 18.265144,-66.039363 18.26709,-66.039941 18.269043,-66.040504 18.270988,-66.040718 18.271762,-66.040933 18.272536,-66.041054 18.273197,-66.041276 18.274088,-66.041372 18.274582,-66.041447 18.27503,-66.04185 18.277435,-66.041909 18.277735,-66.042412 18.280574,-66.042512 18.280679,-66.04261 18.28069,-66.043254 18.280617,-66.043413 18.280566,-66.043911 18.280152,-66.044096 18.280055,-66.044343 18.279968,-66.044496 18.279918,-66.045165 18.279837,-66.045307 18.279871,-66.045386 18.279923,-66.045502 18.280062,-66.045622 18.280221,-66.045668 18.280551,-66.045578 18.280803,-66.04555 18.281073,-66.045585 18.281158,-66.045633 18.281217,-66.045738 18.281239,-66.045901 18.281238,-66.0462 18.281234,-66.046622 18.28127,-66.046872 18.281289,-66.046997 18.281273,-66.047178 18.281222,-66.047594 18.28114,-66.0479 18.281092,-66.048356 18.281029,-66.048831 18.280968,-66.049349 18.281052,-66.049521 18.281054,-66.049663 18.281028,-66.049824 18.280977,-66.050217 18.280872,-66.050465 18.280846,-66.050649 18.28087,-66.050792 18.280927,-66.050912 18.280993,-66.051098 18.281194,-66.05137 18.281514,-66.051574 18.281595,-66.052297 18.281482,-66.052713 18.281338,-66.053137 18.281139,-66.053387 18.281048,-66.053667 18.280988,-66.054026 18.280978,-66.054152 18.280945,-66.054582 18.280686,-66.054936 18.280581,-66.055114 18.28055,-66.055338 18.28054,-66.055488 18.280471,-66.055633 18.280352,-66.055701 18.28028,-66.055803 18.280243,-66.055888 18.280219,-66.05629 18.280242,-66.05648 18.280233,-66.056725 18.280206,-66.056906 18.280173,-66.057047 18.280133,-66.057239 18.280041,-66.057482 18.279857,-66.057686 18.27969,-66.057917 18.27953,-66.05806 18.279496,-66.058204 18.279496,-66.058332 18.27953,-66.058413 18.279583,-66.058491 18.279642,-66.058632 18.279811,-66.058703 18.27987,-66.058816 18.279902,-66.058912 18.279885,-66.059054 18.279797,-66.059111 18.279725,-66.059149 18.279642,-66.059166 18.279562,-66.059153 18.279323,-66.059096 18.279024,-66.059073 18.278828,-66.059083 18.278707,-66.059093 18.278602,-66.059162 18.278269,-66.059179 18.278065,-66.059154 18.277947,-66.05899 18.277704,-66.058817 18.277483,-66.058684 18.277395,-66.058553 18.277338,-66.058323 18.277346,-66.058238 18.277375,-66.057783 18.277576,-66.057597 18.277645,-66.05745 18.277652,-66.057387 18.277626,-66.057334 18.277581,-66.057274 18.277475,-66.057266 18.277366,-66.057274 18.277259,-66.057396 18.277027)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BM','BO_LAMESA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'VT' and direction = 'BO_LAMESA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'VT', 'BO_LAMESA'),(8004, 1, 'VT', 'BO_LAMESA');
delete from ref.subroute_stop where route = 'VT' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8004, 0, 'VT', 'TERM_CAGUAS'),(8000, 1, 'VT', 'TERM_CAGUAS');
