delete from ref.subroute where route = 'SL' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.961504 18.187412,-65.961562 18.18733,-65.961582 18.18731,-65.96173 18.187348,-65.961878 18.187427,-65.961924 18.187395,-65.962661 18.186334,-65.962763 18.186333,-65.962914 18.186458,-65.963024 18.186577,-65.963 18.186635,-65.96285 18.186954,-65.962499 18.187498,-65.961944 18.188192,-65.961063 18.189436,-65.961024 18.18957,-65.961101 18.189641,-65.961431 18.189856,-65.962411 18.190365,-65.964136 18.191043,-65.964749 18.191325,-65.967463 18.193064,-65.972139 18.197523,-65.973713 18.198816,-65.974339 18.19915,-65.975019 18.199387,-65.975747 18.199532,-65.976426 18.199784,-65.978307 18.20087,-65.980486 18.201904,-65.982271 18.202373,-65.982825 18.202446,-65.98297 18.202466,-65.983183 18.202472,-65.983355 18.202437,-65.983806 18.202277,-65.983999 18.202268,-65.984475 18.202456,-65.984766 18.202501,-65.985837 18.202575,-65.985919 18.202597,-65.986648 18.202862,-65.986903 18.202917,-65.987641 18.202993,-65.987855 18.203098,-65.988503 18.203676,-65.988659 18.203728,-65.988888 18.203826,-65.989144 18.203777,-65.989425 18.203657,-65.989515 18.203622,-65.989607 18.203612,-65.989697 18.203639,-65.989863 18.203728,-65.990039 18.203876,-65.990131 18.203934,-65.990227 18.203965,-65.990443 18.203993,-65.990634 18.204041,-65.990758 18.204105,-65.993303 18.205092,-65.993437 18.205116,-65.993557 18.205098,-65.993704 18.205042,-65.993775 18.205023,-65.993866 18.205014,-65.993997 18.205041,-65.994085 18.205082,-65.994149 18.205134,-65.994246 18.205217,-65.994414 18.205331,-65.994536 18.205365,-65.994622 18.205387,-65.995434 18.205619,-65.995626 18.20565,-65.995738 18.205656,-65.996114 18.205648,-65.996252 18.205667,-65.996573 18.205747,-65.99671 18.205738,-65.996882 18.205701,-65.99701 18.205692,-65.997096 18.205711,-65.997233 18.205858,-65.997322 18.206122,-65.997454 18.206309,-65.997654 18.206433,-65.997879 18.206499,-65.998102 18.206478,-65.998572 18.206464,-65.999169 18.206448,-65.999221 18.206472,-65.999243 18.206506,-65.999279 18.206588,-65.999242 18.206748,-65.999171 18.206991,-65.999178 18.207242,-65.999321 18.207518,-65.999554 18.207662,-65.999941 18.207788,-66.00008 18.207807,-66.000524 18.207699,-66.000606 18.207653,-66.00067 18.207587,-66.00079 18.207503,-66.00087 18.207529,-66.000923 18.207617,-66.001145 18.208881,-66.001221 18.20908,-66.00136 18.20922,-66.001823 18.209454,-66.00209 18.209616,-66.002171 18.20974,-66.002208 18.209867,-66.002216 18.210036,-66.002107 18.21385,-66.002268 18.214467,-66.002568 18.21509,-66.00293 18.215638,-66.003398 18.215966,-66.004209 18.216341,-66.004599 18.216578,-66.004895 18.216953,-66.005625 18.21743,-66.005996 18.217594,-66.008291 18.218253,-66.008901 18.218522,-66.009502 18.218869,-66.01074 18.219674,-66.011284 18.220081,-66.012249 18.221338,-66.012686 18.222061,-66.013127 18.223106,-66.013534 18.223581,-66.014076 18.22392,-66.014584 18.22407,-66.014892 18.224103,-66.020659 18.224093,-66.02424 18.223502,-66.024967 18.223553,-66.025723 18.223721,-66.026268 18.224082,-66.026606 18.224511,-66.02716 18.225373,-66.027464 18.225731,-66.029105 18.227125,-66.029679 18.227697,-66.032534 18.230065,-66.032331 18.2306,-66.032109 18.231164,-66.031803 18.231958,-66.031616 18.232446,-66.03123 18.233454,-66.031228 18.233502,-66.031241 18.233562,-66.031269 18.233596,-66.03135 18.233646,-66.033389 18.234372,-66.033414 18.234409,-66.033404 18.234467,-66.033162 18.234991,-66.03314 18.235019,-66.033091 18.235023,-66.033024 18.235005,-66.032385 18.23481)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'SL','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'SL' and direction = 'TERM_SAN_LORENZO';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.032017 18.235228,-66.032405 18.235201,-66.032353 18.235116,-66.03198 18.23509,-66.031768 18.235329,-66.030998 18.2351,-66.030818 18.23502,-66.03077 18.234896,-66.031082 18.234083,-66.031729 18.232736,-66.032263 18.231903,-66.0326 18.23127,-66.032754 18.230836,-66.032983 18.230391,-66.029708 18.227668,-66.029135 18.227096,-66.027495 18.225703,-66.027195 18.22535,-66.026641 18.224488,-66.026298 18.224053,-66.025741 18.223683,-66.024973 18.223513,-66.024238 18.223461,-66.020655 18.224053,-66.014894 18.224063,-66.014593 18.22403,-66.014094 18.223883,-66.013563 18.223551,-66.013164 18.223085,-66.012724 18.222043,-66.012285 18.221316,-66.011315 18.220053,-66.010765 18.219641,-66.009525 18.218835,-66.008921 18.218486,-66.008306 18.218215,-66.006011 18.217556,-66.005646 18.217395,-66.004925 18.216923,-66.004628 18.216548,-66.00423 18.216306,-66.00342 18.215931,-66.002962 18.21561,-66.002606 18.215071,-66.002308 18.214454,-66.00215 18.213846,-66.002259 18.210036,-66.00225 18.20986,-66.00221 18.209724,-66.002121 18.209587,-66.001844 18.209419,-66.001386 18.209187,-66.001258 18.209058,-66.001186 18.208871,-66.000964 18.207603,-66.000899 18.207496,-66.000783 18.207458,-66.000641 18.207557,-66.000579 18.207621,-66.000508 18.207661,-66.000078 18.207766,-65.999951 18.207749,-65.999573 18.207625,-65.999354 18.20749,-65.99922 18.207232,-65.999214 18.206996,-65.999283 18.206758,-65.999323 18.206584,-65.999281 18.206488,-65.999251 18.206441,-65.999178 18.206407,-65.998571 18.206424,-65.998099 18.206438,-65.997883 18.206458,-65.997672 18.206396,-65.997485 18.20628,-65.997361 18.206104,-65.997271 18.205838,-65.997119 18.205675,-65.997013 18.205651,-65.996876 18.205661,-65.996704 18.205698,-65.996577 18.205706,-65.99626 18.205627,-65.996116 18.205608,-65.995739 18.205616,-65.995631 18.20561,-65.995444 18.20558,-65.994634 18.205348,-65.994548 18.205326,-65.994433 18.205294,-65.994273 18.205185,-65.994177 18.205104,-65.994109 18.205048,-65.994011 18.205003,-65.993868 18.204973,-65.993767 18.204983,-65.99369 18.205004,-65.993546 18.205059,-65.993438 18.205075,-65.993315 18.205053,-65.990776 18.204068,-65.99065 18.204003,-65.990451 18.203953,-65.990237 18.203925,-65.99015 18.203897,-65.990065 18.203844,-65.989888 18.203695,-65.989714 18.203602,-65.989611 18.203571,-65.989504 18.203582,-65.989408 18.20362,-65.989131 18.203738,-65.988893 18.203784,-65.988675 18.20369,-65.988525 18.203641,-65.98788 18.203065,-65.987653 18.202954,-65.98691 18.202877,-65.98666 18.202823,-65.985932 18.202559,-65.985844 18.202535,-65.984771 18.202461,-65.984487 18.202417,-65.984006 18.202227,-65.983797 18.202237,-65.983343 18.202398,-65.983179 18.202431,-65.982974 18.202426,-65.982831 18.202406,-65.98228 18.202333,-65.980501 18.201866,-65.978328 18.200835,-65.976445 18.199748,-65.975759 18.199493,-65.975031 18.199348,-65.974357 18.199113,-65.973738 18.198783,-65.972168 18.197493,-65.96749 18.193033,-65.96477 18.19129,-65.964153 18.191006,-65.962429 18.190328,-65.961453 18.189821,-65.961128 18.18961,-65.961072 18.189558,-65.961102 18.189453,-65.961979 18.188216,-65.962534 18.187521,-65.962888 18.186973,-65.96304 18.186649,-65.963065 18.18656,-65.962944 18.18643,-65.9628 18.186303,-65.962646 18.186316,-65.961965 18.187308,-65.961914 18.18737,-65.961881 18.187382,-65.961746 18.18731,-65.961568 18.187265,-65.961529 18.187305,-65.961469 18.187389)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'SL','TERM_SAN_LORENZO', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'SL' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8002, 0, 'SL', 'TERM_CAGUAS'),(8000, 1, 'SL', 'TERM_CAGUAS');
delete from ref.subroute_stop where route = 'SL' and direction = 'TERM_SAN_LORENZO'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'SL', 'TERM_SAN_LORENZO'),(8002, 1, 'SL', 'TERM_SAN_LORENZO');
