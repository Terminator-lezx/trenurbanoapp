delete from ref.subroute where route = 'BC' and direction = 'BO_CANABONCITO';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.031847 18.235033,-66.031735 18.235393,-66.032763 18.23576,-66.032977 18.235735,-66.033145 18.235802,-66.033835 18.234545,-66.034379 18.234735,-66.034423 18.234702,-66.036695 18.235592,-66.037817 18.235868,-66.038015 18.235877,-66.038155 18.234769,-66.038208 18.234655,-66.038407 18.234542,-66.040032 18.234498,-66.041654 18.234602,-66.042696 18.234236,-66.046019 18.233364,-66.046368 18.233304,-66.04909 18.23321,-66.049673 18.233139,-66.050304 18.23312,-66.050373 18.232856,-66.050525 18.232648,-66.051408 18.232225,-66.051668 18.231991,-66.052293 18.230425,-66.052487 18.230192,-66.052888 18.229897,-66.053035 18.229687,-66.053513 18.228279,-66.053623 18.228258,-66.054125 18.228545,-66.054193 18.228526,-66.056797 18.225935,-66.058104 18.224571,-66.058737 18.224018,-66.060627 18.22206,-66.061159 18.221746,-66.061359 18.221695,-66.06438 18.220253,-66.06541 18.219236,-66.065994 18.218823,-66.066529 18.218542,-66.067218 18.218258,-66.067724 18.218204,-66.069198 18.217665,-66.070243 18.217718,-66.070612 18.217687,-66.071558 18.217052,-66.071968 18.216466,-66.072987 18.215526,-66.073751 18.21422,-66.074031 18.213831,-66.07444 18.213396,-66.074894 18.213109,-66.074937 18.212981,-66.074907 18.212351,-66.075169 18.211514,-66.075412 18.211267,-66.07565 18.211229,-66.076074 18.211374,-66.076658 18.211683,-66.077009 18.211935,-66.077129 18.211946,-66.077581 18.211721,-66.077916 18.211371,-66.078073 18.211266,-66.078174 18.211239,-66.078935 18.211286,-66.07967 18.211276,-66.081314 18.210543,-66.081483 18.210563,-66.081879 18.210794,-66.082534 18.210915,-66.082714 18.210897,-66.082912 18.210787,-66.083047 18.210627,-66.083173 18.210373,-66.083296 18.209897,-66.083434 18.209768,-66.084313 18.209326,-66.08468 18.209315,-66.08517 18.209117,-66.08582 18.208977,-66.086433 18.209137,-66.086619 18.209147,-66.087712 18.208937,-66.088183 18.208957,-66.089337 18.208669,-66.089672 18.208783,-66.089962 18.208811,-66.090334 18.208982,-66.090684 18.208854,-66.091297 18.208813,-66.091988 18.208703,-66.092228 18.208762,-66.092437 18.208978,-66.092577 18.209054,-66.092692 18.209021,-66.092858 18.208835,-66.093067 18.208775,-66.093808 18.20899,-66.094217 18.209062,-66.094519 18.208972,-66.094818 18.209015,-66.094935 18.208978,-66.095009 18.208768,-66.094921 18.208577,-66.094549 18.208308,-66.094161 18.208245,-66.093816 18.208057,-66.093604 18.207749,-66.093454 18.207315,-66.092748 18.207177,-66.092269 18.206857,-66.091995 18.206756,-66.091883 18.206626,-66.09178 18.206272,-66.091419 18.206063,-66.091274 18.205789,-66.091173 18.20574,-66.090905 18.205719,-66.090575 18.205473,-66.090482 18.205313,-66.090353 18.20477,-66.090152 18.204537,-66.090182 18.204181,-66.090348 18.204022,-66.090476 18.204056,-66.091827 18.205256,-66.092386 18.205657,-66.092898 18.205861,-66.093258 18.205945,-66.095543 18.206057,-66.096783 18.206717,-66.098246 18.206955,-66.098733 18.207183,-66.098914 18.207348,-66.099422 18.208029,-66.099707 18.208269,-66.100989 18.208892)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BC','BO_CANABONCITO', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'BC' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.101045 18.208918,-66.101194 18.208941,-66.101233 18.20889,-66.10049 18.208584,-66.099674 18.208159,-66.09939 18.207869,-66.099109 18.207419,-66.098822 18.207146,-66.098631 18.207029,-66.098075 18.20685,-66.096858 18.206663,-66.0965 18.206508,-66.095759 18.206068,-66.095542 18.20599,-66.093208 18.20587,-66.092616 18.20569,-66.09217 18.205449,-66.090517 18.204009,-66.090333 18.203976,-66.090148 18.204168,-66.090116 18.204543,-66.09032 18.204784,-66.090447 18.205323,-66.090548 18.205496,-66.090891 18.205751,-66.09125 18.205815,-66.091393 18.206087,-66.091751 18.206292,-66.091849 18.206639,-66.091975 18.206785,-66.092251 18.206887,-66.092734 18.207209,-66.093431 18.207341,-66.093557 18.207735,-66.093739 18.208033,-66.094123 18.208268,-66.094516 18.208332,-66.094873 18.208588,-66.094967 18.208749,-66.09491 18.208948,-66.09482 18.208977,-66.094515 18.208934,-66.094221 18.209024,-66.093818 18.208953,-66.093235 18.208756,-66.093065 18.208737,-66.092834 18.208805,-66.092667 18.208991,-66.09258 18.209016,-66.092249 18.20873,-66.091991 18.208665,-66.09129 18.208775,-66.090677 18.208817,-66.090337 18.208944,-66.089973 18.208774,-66.089711 18.208753,-66.089335 18.208631,-66.088177 18.20892,-66.087707 18.208899,-66.086616 18.209109,-66.085816 18.20894,-66.085153 18.209071,-66.08467 18.209267,-66.084299 18.209279,-66.083405 18.209728,-66.083256 18.209883,-66.083133 18.210361,-66.083012 18.210605,-66.082883 18.210757,-66.082702 18.210858,-66.082424 18.21086,-66.08186 18.210746,-66.081504 18.210528,-66.081306 18.210503,-66.079662 18.211236,-66.078934 18.211245,-66.078168 18.211199,-66.078057 18.211228,-66.077885 18.211343,-66.077555 18.211689,-66.077122 18.211906,-66.07696 18.211861,-66.076681 18.211649,-66.07609 18.211336,-66.07566 18.211189,-66.07539 18.211232,-66.075229 18.211356,-66.07513 18.211498,-66.074866 18.212338,-66.074895 18.212977,-66.074857 18.213087,-66.074438 18.213347,-66.073998 18.213805,-66.073714 18.2142,-66.072953 18.215501,-66.071936 18.216439,-66.071523 18.217016,-66.070593 18.217641,-66.070243 18.217669,-66.06919 18.217616,-66.067727 18.218138,-66.067206 18.218223,-66.066294 18.218599,-66.065692 18.21896,-66.065359 18.219214,-66.065034 18.219495,-66.064541 18.220037,-66.064304 18.220222,-66.063702 18.220505,-66.062779 18.220863,-66.061321 18.221581,-66.060595 18.222021,-66.060205 18.222364,-66.058618 18.224021,-66.058481 18.224107,-66.056916 18.225731,-66.054162 18.228449,-66.054099 18.228456,-66.05356 18.228139,-66.053447 18.228128,-66.053378 18.228168,-66.052931 18.229609,-66.052752 18.229849,-66.052418 18.230075,-66.052187 18.230344,-66.05155 18.231923,-66.051313 18.23213,-66.050461 18.232526,-66.050081 18.232966,-66.049749 18.233083,-66.046667 18.233173,-66.045994 18.233255,-66.042696 18.234121,-66.041825 18.234431,-66.041542 18.234465,-66.040446 18.234404,-66.03909 18.234477,-66.036654 18.234468,-66.035936 18.234294,-66.035859 18.234321,-66.03373 18.233716,-66.033526 18.234319,-66.033239 18.234846,-66.032629 18.234651,-66.032386 18.234651,-66.032055 18.234548,-66.032008 18.234573,-66.031897 18.234878)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'BC','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'BC' and direction = 'BO_CANABONCITO'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'BC', 'BO_CANABONCITO'),(8027, 1, 'BC', 'BO_CANABONCITO');
delete from ref.subroute_stop where route = 'BC' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8027, 0, 'BC', 'TERM_CAGUAS'),(8000, 1, 'BC', 'TERM_CAGUAS');
