delete from ref.subroute where route = 'VB' and direction = 'VILLA_BLANCA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.031858 18.234995,-66.031846 18.235033,-66.031842 18.235046,-66.031832 18.235076,-66.031832 18.235079,-66.031825 18.235099,-66.031825 18.235099,-66.031818 18.235122,-66.031816 18.235129,-66.031794 18.2352,-66.031792 18.235206,-66.031772 18.235273,-66.031767 18.235287,-66.031764 18.235298,-66.031757 18.235319,-66.031757 18.235319,-66.031754 18.235328,-66.031744 18.23536,-66.031734 18.235393,-66.031753 18.235399,-66.031781 18.235409,-66.031794 18.235414,-66.031817 18.235422,-66.03184 18.23543,-66.031886 18.235446,-66.031909 18.235455,-66.032017 18.235493,-66.032065 18.23551,-66.03208 18.235515,-66.032182 18.235551,-66.03233 18.235603,-66.032332 18.235604,-66.032356 18.235612,-66.032375 18.235619,-66.032417 18.235634,-66.032446 18.235644,-66.032677 18.235726,-66.032704 18.235771,-66.032714 18.235821,-66.032702 18.235893,-66.032675 18.235976,-66.032581 18.2361,-66.032304 18.236451,-66.0323 18.236457,-66.032194 18.236617,-66.032135 18.236699,-66.032116 18.236729,-66.032105 18.236747,-66.031951 18.23689,-66.031699 18.237117,-66.031688 18.237127,-66.031646 18.237165,-66.031622 18.237184,-66.031596 18.237201,-66.03158 18.237218,-66.031576 18.237235,-66.031576 18.23726,-66.03158 18.237281,-66.03159 18.237302,-66.031634 18.237316,-66.031688 18.237326,-66.032552 18.23749,-66.032998 18.237573,-66.033052 18.237585,-66.033116 18.237587,-66.03322 18.237595,-66.033238 18.237597,-66.033332 18.237608,-66.033498 18.237643,-66.03356 18.237658,-66.033788 18.237732,-66.033972 18.237818,-66.034002 18.237835,-66.034074 18.237877,-66.034168 18.237937,-66.034272 18.238023,-66.034334 18.238079,-66.034406 18.238155,-66.034475 18.238284,-66.034523 18.238347,-66.034587 18.238431,-66.034762 18.238593,-66.034805 18.238632,-66.035022 18.238838,-66.035076 18.238887,-66.035108 18.238928,-66.035153 18.238994,-66.035178 18.239053,-66.03519 18.239098,-66.03521 18.239177,-66.035212 18.239188,-66.035213 18.239222,-66.035215 18.239308,-66.035216 18.239319,-66.035217 18.239358,-66.035219 18.23946,-66.035221 18.239512,-66.035221 18.239547,-66.035222 18.239565,-66.035226 18.239639,-66.035229 18.239677,-66.035229 18.239683,-66.035231 18.239706,-66.035232 18.239728,-66.035233 18.239741,-66.03524 18.23985,-66.035241 18.239855,-66.035242 18.239879,-66.035247 18.239944,-66.035249 18.239976,-66.035254 18.240056,-66.035261 18.240163,-66.035261 18.240167,-66.035272 18.240324,-66.035274 18.240346,-66.035282 18.24046,-66.035288 18.240544,-66.035289 18.24056,-66.035292 18.240605,-66.035292 18.240612,-66.035293 18.240623,-66.035295 18.240653,-66.035297 18.240681,-66.035299 18.2407,-66.035304 18.240771,-66.035307 18.240817,-66.035308 18.240832,-66.035312 18.240896,-66.035291 18.240971,-66.035276 18.241016,-66.035258 18.241057,-66.035248 18.241087,-66.035244 18.241112,-66.035253 18.241267,-66.035298 18.241978,-66.035311 18.242197,-66.035314 18.242242,-66.035324 18.242416,-66.035358 18.24299,-66.035379 18.243358,-66.035388 18.243479,-66.035401 18.243678,-66.035435 18.244183,-66.035466 18.244626,-66.035491 18.244992,-66.035496 18.24506,-66.035546 18.246093,-66.03556 18.246334,-66.035563 18.24637,-66.035585 18.246535,-66.035637 18.247358,-66.035678 18.247781,-66.035721 18.248382,-66.035745 18.24875,-66.035775 18.249026,-66.03583 18.249774,-66.035837 18.249915,-66.035839 18.249979,-66.035843 18.250059,-66.035848 18.250173,-66.035852 18.250223,-66.035852 18.250237,-66.03586 18.250351,-66.035864 18.250403,-66.03587 18.250524,-66.035876 18.250632,-66.035881 18.250709,-66.035888 18.25085,-66.035888 18.250852,-66.03589 18.250886,-66.035894 18.250941,-66.035895 18.250958,-66.035898 18.25099,-66.035919 18.251292,-66.035925 18.251386,-66.035927 18.251402,-66.035941 18.251529,-66.035954 18.251634,-66.035959 18.251724,-66.035971 18.251925,-66.035974 18.251977,-66.035995 18.25232,-66.036008 18.252548,-66.03602 18.252742,-66.036024 18.252804,-66.036031 18.252935,-66.036038 18.253038,-66.036045 18.253164,-66.036056 18.253336,-66.036071 18.253579,-66.036079 18.253708,-66.036087 18.253837,-66.036098 18.253992,-66.036105 18.254076,-66.036132 18.254101,-66.036164 18.254132,-66.036217 18.254159,-66.03628 18.254178,-66.036326 18.254177,-66.036606 18.254167,-66.037093 18.254126,-66.03712 18.254124,-66.037409 18.2541,-66.037433 18.254098,-66.037848 18.254068,-66.037883 18.25407,-66.037904 18.254077,-66.03792 18.254091,-66.037931 18.254105,-66.037938 18.254122,-66.037934 18.254142,-66.037911 18.254603,-66.037905 18.254695,-66.037901 18.254775,-66.037879 18.255142,-66.037859 18.25554,-66.037851 18.25568,-66.037845 18.255805,-66.037836 18.255967,-66.037812 18.256444,-66.037807 18.256532,-66.037805 18.256576,-66.037798 18.256735,-66.037797 18.256764,-66.037791 18.256938,-66.037791 18.256941,-66.037788 18.256995,-66.037789 18.25704,-66.037795 18.257086,-66.037806 18.25714,-66.037818 18.257183,-66.037858 18.257285,-66.037872 18.257319,-66.037937 18.257449,-66.038027 18.257629,-66.038061 18.257696,-66.038253 18.258079,-66.038373 18.258324,-66.038412 18.258402,-66.038497 18.258575,-66.038502 18.258583,-66.038599 18.258765,-66.038729 18.259033,-66.038749 18.259072,-66.038782 18.259121,-66.038811 18.259155,-66.038845 18.259182,-66.038879 18.259205,-66.038916 18.259221,-66.038967 18.259232,-66.039052 18.25924,-66.039323 18.259254,-66.039506 18.259262,-66.039773 18.259275,-66.039946 18.259284,-66.040297 18.259301,-66.040906 18.259332,-66.041085 18.25934,-66.041119 18.259339,-66.041192 18.259344,-66.041413 18.259356,-66.04145 18.259356,-66.041486 18.259353,-66.041524 18.259345,-66.041557 18.259337,-66.041596 18.259314,-66.041636 18.259275,-66.04167 18.259226,-66.041711 18.259139,-66.04175 18.259042,-66.041769 18.259004,-66.041779 18.258987,-66.041781 18.258984,-66.041791 18.258969,-66.041829 18.258946,-66.041853 18.258937,-66.041882 18.258935,-66.041934 18.258938,-66.04232 18.258964,-66.042371 18.258968,-66.042391 18.258974,-66.042402 18.258982,-66.04241 18.258992,-66.042417 18.259004,-66.042422 18.259016,-66.042425 18.259036,-66.042418 18.259087,-66.042348 18.259223,-66.041852 18.260129,-66.041379 18.260981,-66.041058 18.261573,-66.040695 18.262233,-66.040643 18.262329,-66.040601 18.262424,-66.04059 18.262504,-66.040586 18.26254,-66.040592 18.2626,-66.040601 18.262643,-66.040644 18.262768,-66.040729 18.262945,-66.040976 18.263445,-66.041316 18.264148,-66.041469 18.264441,-66.041518 18.264513,-66.041586 18.264595,-66.041671 18.264679,-66.041852 18.26481,-66.042382 18.265078,-66.042913 18.265353,-66.043072 18.265431,-66.043115 18.265457,-66.043145 18.265461,-66.043186 18.26545,-66.043232 18.26543,-66.043276 18.265374,-66.043336 18.265308,-66.043413 18.26525,-66.043494 18.2652,-66.04362 18.265152,-66.043821 18.265118,-66.04441 18.265039,-66.044742 18.264994,-66.044781 18.26499,-66.044803 18.264978,-66.044823 18.264958,-66.044831 18.264928,-66.044798 18.264636,-66.044779 18.264521,-66.044781 18.264491,-66.044793 18.264466,-66.044809 18.264446,-66.044835 18.264432,-66.04488 18.264424,-66.045809 18.264295,-66.045839 18.264283,-66.045857 18.264258,-66.04587 18.264229,-66.045882 18.264172,-66.045795 18.263519,-66.045792 18.263457)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'VB','VILLA_BLANCA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'VB' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.045825 18.263404,-66.045888 18.263383,-66.046256 18.263329,-66.046295 18.263326,-66.046328 18.263332,-66.046349 18.263361,-66.046398 18.263711,-66.046498 18.264462,-66.046508 18.264495,-66.046531 18.26452,-66.046559 18.264532,-66.046591 18.264533,-66.046703 18.264501,-66.047973 18.264018,-66.049029 18.263618,-66.049127 18.263575,-66.049163 18.263546,-66.049174 18.263511,-66.04916 18.263479,-66.04892 18.262886,-66.048635 18.262157,-66.048313 18.261319,-66.047825 18.260072,-66.047545 18.259316,-66.047402 18.259097,-66.04724 18.25875,-66.046866 18.257919,-66.046683 18.25753,-66.046539 18.257225,-66.046482 18.25711,-66.046427 18.257043,-66.046357 18.256968,-66.046312 18.256935,-66.046262 18.256913,-66.046212 18.256903,-66.046127 18.256891,-66.046037 18.256898,-66.045113 18.257238,-66.044514 18.257476,-66.044321 18.257543,-66.044199 18.257571,-66.044119 18.257581,-66.043879 18.257551,-66.043161 18.257421,-66.043116 18.257416,-66.043091 18.257409,-66.043078 18.257366,-66.043111 18.257177,-66.043213 18.25662,-66.043256 18.256355,-66.043271 18.256101,-66.043143 18.255088,-66.043129 18.254746,-66.043103 18.254048,-66.043098 18.254005,-66.043078 18.253969,-66.043013 18.253954,-66.042388 18.253972,-66.04234 18.253974,-66.042298 18.253996,-66.042278 18.254044,-66.042263 18.254866,-66.042244 18.255526,-66.042249 18.255817,-66.042312 18.256444,-66.042311 18.256972,-66.042278 18.257316,-66.042202 18.257672,-66.041968 18.258272,-66.041904 18.258383,-66.041886 18.258429,-66.041759 18.258753,-66.04169 18.258909,-66.041646 18.259008,-66.041609 18.259099,-66.041573 18.259175,-66.04155 18.259209,-66.041528 18.259231,-66.041514 18.259239,-66.041499 18.259243,-66.04147 18.259249,-66.041444 18.259251,-66.041416 18.259251,-66.041126 18.259235,-66.041095 18.259233,-66.040912 18.259227,-66.040389 18.2592,-66.040303 18.259196,-66.040102 18.259186,-66.039946 18.259178,-66.039511 18.259157,-66.039328 18.259149,-66.03906 18.259136,-66.038985 18.259128,-66.038952 18.259121,-66.038934 18.259113,-66.038913 18.259098,-66.038889 18.25908,-66.038871 18.259059,-66.038845 18.25902,-66.038829 18.258988,-66.038739 18.258804,-66.038699 18.258721,-66.038687 18.258698,-66.038687 18.258682,-66.038636 18.258568,-66.038621 18.258559,-66.038621 18.258559,-66.038611 18.258549,-66.038601 18.258529,-66.038417 18.258155,-66.038356 18.258032,-66.038165 18.257649,-66.037975 18.257272,-66.037948 18.257206,-66.037924 18.257136,-66.037902 18.257053,-66.037904 18.257,-66.037905 18.256977,-66.037905 18.256961,-66.037906 18.256937,-66.037912 18.256768,-66.03792 18.256581,-66.037942 18.256155,-66.037951 18.255973,-66.037956 18.255881,-66.037973 18.255545,-66.037976 18.255497,-66.037992 18.255184,-66.037994 18.255147,-66.037996 18.255113,-66.038015 18.254781,-66.038025 18.254608,-66.038028 18.254553,-66.038049 18.254147,-66.038052 18.254052,-66.038051 18.254002,-66.038039 18.253967,-66.038022 18.253954,-66.037982 18.253942,-66.037936 18.253935,-66.037894 18.253929,-66.037869 18.253932,-66.037843 18.253936,-66.03765 18.25395,-66.037398 18.253968,-66.037106 18.253992,-66.036566 18.254049,-66.036513 18.254054,-66.03644 18.254062,-66.036398 18.254063,-66.036373 18.254055,-66.03635 18.254036,-66.03633 18.253998,-66.03631 18.253929,-66.036306 18.253848,-66.036299 18.253742,-66.036294 18.253669,-66.036285 18.253518,-66.036279 18.253425,-66.036272 18.253302,-66.036264 18.253148,-66.036261 18.25307,-66.036259 18.252997,-66.036255 18.252892,-66.036254 18.25285,-66.036252 18.252773,-66.036247 18.252698,-66.036242 18.25262,-66.036239 18.252537,-66.036236 18.252504,-66.036236 18.252502,-66.036232 18.25245,-66.03623 18.252432,-66.036224 18.252358,-66.036221 18.252303,-66.036221 18.252298,-66.036219 18.252267,-66.036204 18.25208,-66.036199 18.251987,-66.036192 18.251895,-66.036189 18.251846,-66.036187 18.251807,-66.036181 18.251718,-66.036174 18.251629,-66.036174 18.251628,-66.036167 18.25154,-66.036161 18.251453,-66.036147 18.251282,-66.03614 18.251176,-66.036136 18.251108,-66.036124 18.250943,-66.03612 18.250888,-66.036114 18.250797,-66.036109 18.250728,-66.036107 18.250701,-66.036066 18.250153,-66.036059 18.250046,-66.036052 18.249947,-66.036046 18.24986,-66.036041 18.249788,-66.036028 18.249597,-66.036018 18.249444,-66.036007 18.249271,-66.035989 18.249007,-66.035938 18.248215,-66.035938 18.248207,-66.035932 18.248113,-66.035928 18.24804,-66.035925 18.247971,-66.035885 18.247185,-66.035877 18.247012,-66.035875 18.246985,-66.035867 18.246871,-66.035843 18.246539,-66.035836 18.24645,-66.035832 18.246393,-66.03581 18.246084,-66.035787 18.245775,-66.03577 18.245542,-66.035762 18.245427,-66.035729 18.24499,-66.035719 18.244845,-66.035715 18.244773,-66.035708 18.244655,-66.035685 18.244234,-66.035675 18.244045,-66.035666 18.243887,-66.035636 18.243415,-66.035629 18.243294,-66.035625 18.24323,-66.035623 18.243205,-66.035617 18.243115,-66.035597 18.242788,-66.035588 18.242659,-66.035568 18.24237,-66.035562 18.242273,-66.035547 18.242102,-66.035545 18.242081,-66.035535 18.241964,-66.035528 18.241874,-66.035517 18.241748,-66.035509 18.241652,-66.035492 18.241452,-66.03549 18.241429,-66.035488 18.241402,-66.035483 18.241352,-66.035477 18.241273,-66.035474 18.241234,-66.035455 18.240956,-66.03545 18.240879,-66.035437 18.240694,-66.035431 18.240618,-66.035426 18.240553,-66.035421 18.240488,-66.035421 18.240485,-66.035409 18.24034,-66.035398 18.240195,-66.035375 18.24,-66.035372 18.239939,-66.035375 18.239888,-66.03539 18.23982,-66.035405 18.239735,-66.035406 18.239728,-66.035407 18.239634,-66.035407 18.239627,-66.035429 18.239511,-66.035457 18.239429,-66.035473 18.23938,-66.035503 18.239296,-66.035509 18.239255,-66.035515 18.239219,-66.035513 18.239184,-66.035503 18.23914,-66.035459 18.239078,-66.035436 18.239045,-66.03539 18.23899,-66.035375 18.238973,-66.035231 18.238803,-66.035203 18.238774,-66.035179 18.238749,-66.0351 18.238668,-66.035073 18.23864,-66.035029 18.238594,-66.034978 18.238547,-66.034926 18.2385,-66.034889 18.238465,-66.034799 18.238369,-66.034742 18.238305,-66.034609 18.238165,-66.03459 18.238144,-66.034512 18.238072,-66.034415 18.237998,-66.034387 18.237977,-66.03424 18.237868,-66.0341 18.237787,-66.033934 18.237713,-66.033793 18.23765,-66.033681 18.237614,-66.033548 18.237571,-66.033505 18.237563,-66.033462 18.237556,-66.03319 18.237508,-66.032872 18.237445,-66.032455 18.237368,-66.03239 18.237356,-66.032348 18.237349,-66.032324 18.237343,-66.032318 18.237318,-66.032323 18.237158,-66.032324 18.237136,-66.032331 18.236955,-66.032332 18.236939,-66.032334 18.236882,-66.032328 18.236543,-66.032349 18.236501,-66.03236 18.236478,-66.032474 18.236327,-66.032476 18.236324,-66.032643 18.236113,-66.032657 18.236095,-66.032676 18.236067,-66.032704 18.236025,-66.032723 18.235996,-66.032793 18.235866,-66.032826 18.235769,-66.032827 18.235767,-66.032827 18.235765,-66.032866 18.235684,-66.032872 18.235678,-66.03291 18.235635,-66.032921 18.235623,-66.032926 18.235612,-66.032966 18.235527,-66.033002 18.235421,-66.033013 18.235388,-66.033015 18.235381,-66.033046 18.23529,-66.033084 18.235196,-66.033087 18.235188,-66.033102 18.23515,-66.033136 18.235086,-66.033161 18.235029,-66.033162 18.235008,-66.033179 18.234975,-66.033183 18.234969,-66.033192 18.234953,-66.033194 18.234949,-66.033197 18.234943,-66.033204 18.234929,-66.033216 18.234905,-66.033215 18.2349,-66.033214 18.234894,-66.033207 18.234871,-66.033188 18.234851,-66.033177 18.234843,-66.033165 18.234835,-66.033142 18.23482,-66.032985 18.234774,-66.032976 18.234771,-66.032949 18.234761,-66.032877 18.234735,-66.032871 18.234733,-66.032769 18.234696,-66.032743 18.234686,-66.032664 18.234662,-66.032663 18.234662,-66.032629 18.234651,-66.032613 18.234648,-66.032607 18.234646,-66.032549 18.234633,-66.032509 18.234625,-66.032472 18.23463,-66.03243 18.234642,-66.032423 18.234643,-66.032385 18.234652,-66.032353 18.234643,-66.032346 18.234642,-66.032327 18.234636,-66.032308 18.234631,-66.032217 18.2346,-66.03212 18.234566,-66.03209 18.23455,-66.032076 18.234549,-66.032054 18.234548,-66.032036 18.234551,-66.032019 18.234561,-66.032007 18.234573,-66.031998 18.234598,-66.031996 18.234602,-66.03199 18.234622,-66.031983 18.234642,-66.031953 18.234731,-66.031939 18.234768,-66.031896 18.234878)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'VB','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'VB' and direction = 'VILLA_BLANCA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'VB', 'VILLA_BLANCA'),(8033, 1, 'VB', 'VILLA_BLANCA');
delete from ref.subroute_stop where route = 'VB' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8033, 0, 'VB', 'TERM_CAGUAS'),(8000, 1, 'VB', 'TERM_CAGUAS');
