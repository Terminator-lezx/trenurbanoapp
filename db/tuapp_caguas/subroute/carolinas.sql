delete from ref.subroute where route = 'CA' and direction = 'LAS_CAROLINAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.031897 18.234979,-66.031773 18.235321,-66.031813 18.235433,-66.03274 18.235751,-66.032846 18.235768,-66.032905 18.235748,-66.033132 18.235793,-66.033204 18.235713,-66.033565 18.235053,-66.033814 18.234577,-66.033865 18.23455,-66.034352 18.234742,-66.03446 18.234744,-66.035564 18.23516,-66.03565 18.235214,-66.036746 18.235611,-66.037715 18.235847,-66.037877 18.235869,-66.037946 18.23586,-66.038001 18.23583,-66.038031 18.235738,-66.038126 18.234909,-66.038171 18.234699,-66.038237 18.23463,-66.038376 18.234587,-66.038755 18.234581,-66.038881 18.234548,-66.040022 18.23451,-66.041471 18.23463,-66.041701 18.234613,-66.041871 18.234558,-66.042575 18.234277,-66.045384 18.233545,-66.046037 18.233372,-66.046354 18.233302,-66.04938 18.233195,-66.050001 18.233187,-66.05067 18.233277,-66.051198 18.233411,-66.051798 18.233598,-66.05239 18.233889,-66.055011 18.235376,-66.05564 18.235824,-66.056486 18.236559,-66.056866 18.236893,-66.0579 18.238109,-66.059017 18.239191,-66.059518 18.239808,-66.060271 18.241133,-66.060669 18.241726,-66.061088 18.24224,-66.061584 18.242583,-66.062164 18.242821,-66.062871 18.242916,-66.063648 18.242831,-66.065248 18.242553,-66.065996 18.242573,-66.066658 18.242771,-66.06775 18.243341,-66.069281 18.24447,-66.069913 18.24485,-66.070565 18.245123,-66.07123 18.245308,-66.072035 18.245412,-66.072359 18.245493,-66.072918 18.245616,-66.07322 18.245712,-66.073324 18.245797,-66.073387 18.245945,-66.073382 18.246169,-66.073269 18.246448,-66.073036 18.24699,-66.072794 18.247564,-66.072526 18.248098,-66.072466 18.248317,-66.072469 18.248557,-66.072535 18.24943,-66.072526 18.249646,-66.072486 18.24984,-66.072382 18.250043,-66.071723 18.251071,-66.07163 18.251197,-66.071466 18.251312,-66.071314 18.251367,-66.071161 18.2514,-66.070971 18.251421,-66.070807 18.251443,-66.070619 18.251482,-66.070527 18.251536,-66.070429 18.251662,-66.070369 18.251829,-66.070303 18.252008,-66.070242 18.252149,-66.070136 18.252331,-66.069856 18.252813,-66.069629 18.253223,-66.068594 18.255234,-66.068433 18.255557,-66.068384 18.255819,-66.068328 18.25584,-66.068243 18.255859,-66.063302 18.256395,-66.063242 18.256391,-66.063179 18.256343,-66.063134 18.256248,-66.063128 18.255939,-66.063181 18.255701,-66.063136 18.25548,-66.063057 18.255343,-66.062968 18.25491,-66.062939 18.254469,-66.062996 18.254428,-66.0646 18.254229,-66.065173 18.254185,-66.066108 18.254091,-66.066155 18.254081,-66.066177 18.254041,-66.066105 18.253221,-66.066062 18.25313,-66.065921 18.253089,-66.065091 18.253177,-66.065028 18.25313,-66.064999 18.252925,-66.064806 18.251883,-66.064746 18.251489,-66.064798 18.251404,-66.066079 18.250966,-66.066892 18.250696,-66.067232 18.250646,-66.067577 18.250625,-66.067946 18.250712,-66.06811 18.250759,-66.068525 18.250936,-66.068741 18.251054,-66.06917 18.251393,-66.06947 18.251719,-66.069597 18.251798,-66.07009 18.252075)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'CA','LAS_CAROLINAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'CA' and direction = 'TERM_CAGUAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.070137 18.252102,-66.070184 18.252128,-66.070257 18.252146,-66.070296 18.252116,-66.070315 18.252072,-66.070335 18.252023,-66.070398 18.25185,-66.070446 18.251686,-66.07054 18.251561,-66.070624 18.251508,-66.070807 18.251471,-66.070975 18.25145,-66.071163 18.251427,-66.071323 18.251396,-66.071484 18.251339,-66.07164 18.251229,-66.07176 18.25108,-66.072399 18.250091,-66.072514 18.249875,-66.072562 18.24966,-66.072564 18.249432,-66.072488 18.248557,-66.072485 18.248319,-66.072546 18.248114,-66.072811 18.247571,-66.073054 18.246996,-66.073287 18.246455,-66.07341 18.246194,-66.073475 18.246019,-66.073509 18.245915,-66.073522 18.245789,-66.073474 18.245686,-66.073375 18.245623,-66.072683 18.245395,-66.071068 18.24514,-66.070233 18.244863,-66.069393 18.244428,-66.067594 18.243074,-66.066492 18.242541,-66.065665 18.24239,-66.06473 18.242461,-66.062965 18.242756,-66.062276 18.242706,-66.061638 18.242483,-66.061026 18.242053,-66.060559 18.241466,-66.05949 18.239605,-66.059055 18.239079,-66.058015 18.2381,-66.057165 18.237075,-66.056766 18.236633,-66.055392 18.235541,-66.055001 18.235276,-66.053259 18.234313,-66.052136 18.233628,-66.051171 18.233253,-66.05043 18.233117,-66.049951 18.233081,-66.046188 18.233191,-66.043325 18.233923,-66.041928 18.234361,-66.041556 18.23444,-66.040268 18.2344,-66.038696 18.234466,-66.037792 18.234415,-66.036648 18.234481,-66.036044 18.234343,-66.035898 18.234348,-66.03388 18.233766,-66.033745 18.233803,-66.033261 18.234796,-66.033188 18.234829,-66.032903 18.234728,-66.032512 18.234623,-66.032405 18.234667,-66.032068 18.234555,-66.032018 18.234587,-66.03193 18.234866)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'CA','TERM_CAGUAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'CA' and direction = 'LAS_CAROLINAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8000, 0, 'CA', 'LAS_CAROLINAS'),(8024, 1, 'CA', 'LAS_CAROLINAS');
delete from ref.subroute_stop where route = 'CA' and direction = 'TERM_CAGUAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (8024, 0, 'CA', 'TERM_CAGUAS'),(8000, 1, 'CA', 'TERM_CAGUAS');
