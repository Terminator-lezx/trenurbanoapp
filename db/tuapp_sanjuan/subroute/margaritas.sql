delete from ref.subroute where route = 'LAS_MARGARITAS' and direction = 'LAS_MARGARITAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.059883 18.43601,-66.059163 18.436006,-66.058329 18.435751,-66.052656 18.434358,-66.052526 18.434283,-66.051847 18.434104,-66.045487 18.432572,-66.045376 18.432545,-66.045227 18.432509,-66.044187 18.432302,-66.043796 18.432246,-66.043765 18.432245,-66.043181 18.432156,-66.043077 18.432052,-66.042942 18.432095,-66.04223 18.431876,-66.041619 18.431751,-66.040981 18.4317,-66.040396 18.431709,-66.038918 18.431876,-66.038981 18.432449,-66.038943 18.432525,-66.038375 18.432596,-66.038038 18.432624,-66.036931 18.432638,-66.036874 18.432678,-66.036865 18.432719,-66.036888 18.434432,-66.036716 18.435006)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'LAS_MARGARITAS','LAS_MARGARITAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'LAS_MARGARITAS' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.036716 18.435006,-66.037256 18.43517,-66.03698 18.436003,-66.036226 18.436169,-66.035341 18.436529,-66.035108 18.436531,-66.034903 18.436474,-66.03466 18.436227,-66.034437 18.435796,-66.034188 18.435035,-66.034106 18.434422,-66.034135 18.433814,-66.034224 18.433364,-66.034446 18.43273,-66.03481 18.432128,-66.035293 18.432459,-66.035638 18.432589,-66.035971 18.432644,-66.036787 18.432658,-66.036966 18.432664,-66.038046 18.432654,-66.038377 18.432627,-66.03901 18.432558,-66.040705 18.43234,-66.041096 18.43222,-66.041565 18.432075,-66.041958 18.432051,-66.04292 18.432227,-66.043028 18.432308,-66.043155 18.432258,-66.044683 18.432524,-66.045188 18.43253,-66.04537 18.432567,-66.045481 18.432594,-66.051841 18.434126,-66.052516 18.434304,-66.052647 18.434379,-66.058323 18.435773,-66.059276 18.436161,-66.059352 18.437233,-66.059445 18.437857,-66.059867 18.438543,-66.062113 18.441098,-66.062813 18.440547,-66.061097 18.438533,-66.060347 18.437556,-66.06024 18.437227,-66.060222 18.436942,-66.060423 18.436073,-66.060285 18.435997,-66.059883 18.43601)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'LAS_MARGARITAS','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
