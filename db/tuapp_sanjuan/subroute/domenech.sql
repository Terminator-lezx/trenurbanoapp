delete from ref.subroute where route = 'DOMENECH' and direction = 'PLAZA_LAS_AMERICAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.056547 18.416271,-66.056218 18.416803,-66.056084 18.416899,-66.055864 18.416937,-66.055655 18.416866,-66.055539 18.416705,-66.055399 18.416063,-66.055478 18.4159,-66.055944 18.415853,-66.05661 18.416003,-66.056868 18.416023,-66.061618 18.414664,-66.065462 18.413475,-66.069365 18.41275,-66.070848 18.412718,-66.070894 18.412789,-66.070998 18.412818,-66.071552 18.415382,-66.071353 18.416361,-66.071369 18.417083,-66.071451 18.417264,-66.071605 18.417411,-66.072172 18.417592,-66.07291 18.417944,-66.073028 18.418119,-66.076228 18.41659)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'DOMENECH','PLAZA_LAS_AMERICAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'DOMENECH' and direction = 'DOMENECH';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.076264 18.416573,-66.07668 18.416366,-66.075647 18.414395,-66.075466 18.414281,-66.075376 18.414281,-66.073436 18.415202,-66.07275 18.415342,-66.071691 18.415396,-66.071611 18.415361,-66.071059 18.412864,-66.071147 18.412729,-66.071159 18.412623,-66.0711 18.412534,-66.070995 18.412499,-66.070901 18.412542,-66.070811 18.412638,-66.069364 18.412689,-66.065448 18.413432,-66.061595 18.414629,-66.056809 18.416027,-66.056748 18.416067,-66.056547 18.416271)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'DOMENECH','DOMENECH', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
