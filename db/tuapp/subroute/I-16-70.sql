delete from ref.subroute where route = 'I-16-70' and direction = 'PDA_22';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.957277 18.379754,-65.95694 18.379833,-65.957165 18.380599,-65.957231 18.380607,-65.957918 18.380418,-65.958207 18.380349,-65.958289 18.380351,-65.958397 18.380843,-65.958451 18.380891,-65.959419 18.380674,-65.959491 18.380669,-65.959575 18.380694,-65.959646 18.380688,-65.959722 18.380639,-65.95979 18.380603,-65.959959 18.380561,-65.961336 18.380248,-65.961568 18.380195,-65.961705 18.380179,-65.961799 18.380191,-65.962056 18.380291,-65.962202 18.38033,-65.962346 18.38033,-65.962791 18.380198,-65.963069 18.38013,-65.963213 18.38013,-65.964085 18.380255,-65.965389 18.380441,-65.966398 18.380586,-65.967367 18.380721,-65.968172 18.380833,-65.968707 18.380881,-65.970196 18.380953,-65.970844 18.380984,-65.971254 18.381043,-65.972508 18.381409,-65.973246 18.381655,-65.973995 18.381901,-65.97454 18.382084,-65.974884 18.38227,-65.975161 18.382441,-65.975381 18.382536,-65.975876 18.382847,-65.977154 18.38367,-65.97733 18.383798,-65.977447 18.383943,-65.977729 18.384488,-65.977894 18.384793,-65.978255 18.385531,-65.978721 18.386509,-65.979204 18.387517,-65.979753 18.388659,-65.980018 18.389209,-65.980231 18.389701,-65.980601 18.39049,-65.980786 18.390795,-65.981113 18.391243,-65.981228 18.391442,-65.981282 18.391641,-65.98137 18.392248,-65.981529 18.393297,-65.981601 18.393641,-65.981701 18.393872,-65.981785 18.393995,-65.981878 18.3941,-65.981997 18.394218,-65.98204 18.394299,-65.982046 18.394411,-65.981964 18.39473,-65.981955 18.394848,-65.981976 18.394968,-65.982029 18.395201,-65.982183 18.395762,-65.982285 18.39615,-65.982379 18.396678,-65.98244 18.39704,-65.98248 18.397215,-65.982543 18.397415,-65.982753 18.398162,-65.982841 18.398487,-65.982886 18.398692,-65.983067 18.399478,-65.983289 18.400372,-65.983388 18.400816,-65.983494 18.401246,-65.98363 18.401843,-65.983898 18.403031,-65.984022 18.403585,-65.984227 18.404537,-65.984241 18.404653,-65.984257 18.404797,-65.984259 18.404902,-65.98423 18.405304,-65.984245 18.40545,-65.984279 18.405527,-65.984345 18.405638,-65.984424 18.405714,-65.984581 18.40582,-65.98476 18.405987,-65.984851 18.406092,-65.984941 18.406256,-65.985008 18.406468,-65.985015 18.406623,-65.984989 18.406731,-65.984936 18.406768,-65.984519 18.406775,-65.982684 18.406695,-65.981052 18.40659,-65.980944 18.406604,-65.980894 18.406661,-65.98098 18.406729,-65.981557 18.40677,-65.981766 18.40682,-65.981822 18.406915,-65.981936 18.407439,-65.982017 18.407874,-65.982092 18.40827,-65.982129 18.408465,-65.982143 18.408598,-65.982129 18.409067,-65.98206 18.410021,-65.982028 18.410428,-65.982005 18.410818,-65.981994 18.411056,-65.982002 18.411353,-65.982016 18.411503,-65.982175 18.412359,-65.982271 18.412898,-65.982374 18.41346,-65.982448 18.413728,-65.982501 18.4139,-65.982574 18.414051,-65.983453 18.41537,-65.984209 18.416791,-65.984375 18.417038,-65.984643 18.417566,-65.985112 18.418488,-65.985185 18.418627,-65.985131 18.418706,-65.984221 18.419164,-65.984135 18.419192,-65.983948 18.419207,-65.983826 18.419191,-65.983536 18.419091,-65.982445 18.418629,-65.982251 18.418611,-65.982193 18.418699,-65.982605 18.421081,-65.98298 18.423232,-65.982996 18.423312,-65.983096 18.42333,-65.987475 18.422355,-65.98753 18.422395,-65.987712 18.423328,-65.987701 18.423375,-65.987634 18.423405,-65.982723 18.424511,-65.982689 18.424614,-65.98284 18.425692,-65.983031 18.426518,-65.983048 18.426609,-65.983007 18.426649,-65.982538 18.426743,-65.982145 18.426797,-65.978486 18.427188,-65.976401 18.427422,-65.976037 18.427409,-65.975795 18.427354,-65.968516 18.425427,-65.968477 18.425455,-65.968516 18.4255,-65.975015 18.427205,-65.975771 18.427402,-65.975958 18.42745,-65.976429 18.427492,-65.976908 18.427438,-65.978491 18.427258,-65.978937 18.427203,-65.979728 18.427112,-65.98022 18.427055,-65.98078 18.427001,-65.981459 18.426928,-65.982148 18.426857,-65.982538 18.42681,-65.983034 18.426704,-65.983178 18.426672,-65.985388 18.426181,-65.987767 18.425647,-65.988436 18.425504,-65.988732 18.425456,-65.988829 18.425455,-65.988878 18.425505,-65.988935 18.42614,-65.988977 18.426679,-65.989043 18.42716,-65.989123 18.427495,-65.989246 18.427795,-65.989294 18.427833,-65.989417 18.427801,-65.989623 18.427705,-65.989931 18.427525,-65.990008 18.427534,-65.990094 18.427567,-65.990235 18.427788,-65.990304 18.427834,-65.990345 18.427855,-65.990455 18.427884,-65.990583 18.427938,-65.990665 18.428003,-65.990727 18.428082,-65.990825 18.428202,-65.991194 18.428677,-65.99142 18.428887,-65.991597 18.429012,-65.991873 18.429172,-65.992778 18.42947,-65.993726 18.429743,-65.995745 18.43035,-65.998254 18.431086,-65.998791 18.431222,-65.999195 18.431313,-65.999415 18.431343,-65.999545 18.43136,-65.999914 18.431376,-66.000417 18.431464,-66.000894 18.431536,-66.001421 18.431593,-66.001983 18.431618,-66.003028 18.431631,-66.003355 18.431623,-66.003415 18.431598,-66.003445 18.431496,-66.003715 18.429071,-66.003736 18.429001,-66.003805 18.428969,-66.005826 18.429158,-66.008257 18.429397,-66.008956 18.42943,-66.011738 18.429583,-66.011928 18.429581,-66.012505 18.42946,-66.013489 18.429251,-66.013596 18.429211,-66.013617 18.429126,-66.013244 18.427474,-66.013205 18.427408,-66.013101 18.427346,-66.01282 18.427338,-66.011828 18.427354,-66.01165 18.427326,-66.011468 18.427289,-66.011157 18.427165,-66.010906 18.427112,-66.010006 18.427112,-66.00827 18.427112,-66.008093 18.427125,-66.007997 18.427186,-66.007959 18.427334,-66.008035 18.430569,-66.008169 18.431029,-66.008451 18.431448,-66.008841 18.431718,-66.0095 18.431881,-66.015178 18.432203,-66.017081 18.432442,-66.017971 18.432759,-66.0185 18.433057,-66.018864 18.43336,-66.019172 18.433652,-66.020125 18.435002,-66.021088 18.436405,-66.021446 18.436952,-66.021926 18.43782,-66.02193 18.437967,-66.0219 18.438058,-66.021835 18.438148,-66.021731 18.438238,-66.01781 18.440027,-66.01627 18.440678,-66.015679 18.440807,-66.01519 18.440876,-66.014715 18.441001,-66.013863 18.441444,-66.013545 18.441672,-66.013519 18.441763,-66.013541 18.441824,-66.01361 18.441894,-66.013723 18.441939,-66.013995 18.44196,-66.014326 18.441902,-66.015984 18.442084,-66.017689 18.442403,-66.019084 18.442398,-66.019913 18.44235,-66.020502 18.442323,-66.021514 18.442351,-66.022197 18.442459,-66.023255 18.442715,-66.026572 18.443552,-66.029472 18.444353,-66.031575 18.445035,-66.032026 18.445207,-66.032436 18.445429,-66.037316 18.449072,-66.037621 18.449354,-66.037926 18.449744,-66.039089 18.451517,-66.039171 18.451615,-66.039249 18.451679,-66.03941 18.451721,-66.039553 18.451712,-66.039895 18.451631,-66.041295 18.451075,-66.041812 18.450701,-66.042184 18.450488,-66.043094 18.449987,-66.044371 18.449307,-66.04463 18.449202,-66.044798 18.44917,-66.045038 18.449174,-66.048787 18.449626,-66.051563 18.449988,-66.051975 18.450042,-66.052309 18.450125,-66.05269 18.450287,-66.053579 18.450644,-66.054586 18.450928,-66.055566 18.451077,-66.056299 18.451143,-66.057304 18.451246,-66.058184 18.451345,-66.059046 18.45148,-66.060576 18.451673,-66.063748 18.452098,-66.063907 18.452067,-66.064007 18.451992,-66.065953 18.44998,-66.066262 18.449466,-66.068243 18.446271,-66.068312 18.446213,-66.068381 18.446213,-66.068472 18.446271,-66.071198 18.448333,-66.0726 18.449425,-66.073777 18.450332,-66.074341 18.450725,-66.074458 18.450732,-66.074544 18.450668,-66.074814 18.450179,-66.075414 18.449163,-66.075612 18.448831,-66.07562 18.448715,-66.075553 18.448652,-66.074934 18.448257,-66.074245 18.447812,-66.073692 18.447429,-66.073133 18.447022,-66.072547 18.446588,-66.071745 18.445952,-66.071046 18.445381,-66.070575 18.445008,-66.070083 18.444571,-66.069736 18.444378,-66.069555 18.44429,-66.069458 18.444306,-66.06938 18.444375,-66.06907 18.445058,-66.068648 18.445772,-66.068568 18.445876)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'I-16-70','PDA_22', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'I-16-70' and direction = 'CAROLINA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.068545 18.445922,-66.068404 18.446116,-66.068222 18.446182,-66.068036 18.44647,-66.065975 18.449736,-66.065667 18.450152,-66.063915 18.451991,-66.063822 18.452031,-66.063695 18.452045,-66.062901 18.451945,-66.060596 18.451635,-66.058522 18.451363,-66.057319 18.451209,-66.056314 18.451111,-66.055571 18.451046,-66.054587 18.450897,-66.05357 18.450614,-66.05269 18.450257,-66.052332 18.450097,-66.051947 18.450007,-66.051586 18.44995,-66.050883 18.449855,-66.047437 18.449383,-66.045047 18.449131,-66.044786 18.449124,-66.044594 18.449154,-66.044437 18.44921,-66.043657 18.449633,-66.043055 18.449949,-66.042066 18.450498,-66.041511 18.450864,-66.041236 18.451046,-66.040669 18.451283,-66.039889 18.451579,-66.039668 18.451648,-66.039486 18.451668,-66.039374 18.451656,-66.039257 18.451615,-66.039137 18.451488,-66.03816 18.450022,-66.037576 18.4492,-66.03704 18.448777,-66.033886 18.446384,-66.032708 18.44551,-66.032363 18.445294,-66.031255 18.444841,-66.02987 18.444409,-66.027819 18.443834,-66.026284 18.443377,-66.024078 18.442851,-66.022942 18.442548,-66.022035 18.442365,-66.021455 18.442284,-66.020668 18.442267,-66.0199 18.442296,-66.019065 18.44234,-66.018373 18.442333,-66.017841 18.442337,-66.017532 18.442296,-66.016044 18.442003,-66.014821 18.441769,-66.014553 18.441666,-66.014466 18.441576,-66.014449 18.441465,-66.014475 18.441338,-66.014574 18.441212,-66.014783 18.441114,-66.016098 18.440859,-66.017088 18.440534,-66.022066 18.438346,-66.022689 18.438097,-66.022694 18.438095,-66.022694 18.438095,-66.022992 18.438523,-66.023191 18.438679,-66.02339 18.438716,-66.023598 18.438675,-66.023736 18.438552,-66.023805 18.438432,-66.023823 18.438256,-66.023758 18.438071,-66.023667 18.437969,-66.023507 18.437886,-66.023256 18.43787,-66.022702 18.438091,-66.022694 18.438095,-66.021643 18.436586,-66.021071 18.43576,-66.020444 18.434854,-66.019835 18.434026,-66.019328 18.433348,-66.018391 18.432525,-66.018169 18.432424,-66.017673 18.43224,-66.016903 18.432051,-66.016163 18.431916,-66.015474 18.431858,-66.015401 18.431821,-66.015358 18.431723,-66.015127 18.430813,-66.014751 18.42905,-66.014666 18.428989,-66.014573 18.428979,-66.014431 18.428996,-66.013664 18.429172,-66.012356 18.429445,-66.011934 18.429537,-66.011709 18.429535,-66.008548 18.42937,-66.008256 18.429363,-66.007624 18.429293,-66.00756 18.429311,-66.007543 18.429377,-66.007554 18.430986,-66.007525 18.431039,-66.005972 18.431061,-66.005951 18.430997,-66.005948 18.430875,-66.005912 18.430814,-66.005702 18.430672,-66.005575 18.430655,-66.003422 18.430443,-66.002344 18.430351,-66.002103 18.430434,-66.001944 18.430605,-66.001903 18.430708,-66.001788 18.431415,-66.001763 18.431526,-66.001732 18.431579,-66.001395 18.431567,-66.0011 18.43153,-65.999917 18.431353,-65.99961 18.431337,-65.999488 18.431332,-65.999363 18.431312,-65.999202 18.431283,-65.998795 18.431194,-65.99825 18.431057,-65.994675 18.429993,-65.993155 18.429557,-65.991898 18.429161,-65.991702 18.429037,-65.991563 18.428958,-65.991398 18.428829,-65.991223 18.428658,-65.99104 18.42843,-65.990865 18.428194,-65.990697 18.427985,-65.990617 18.427918,-65.990474 18.427849,-65.990296 18.427819,-65.990123 18.427876,-65.98962 18.428151,-65.989545 18.428153,-65.989382 18.427919,-65.989303 18.427768,-65.989082 18.42711,-65.988907 18.425448,-65.988842 18.425396,-65.988669 18.425402,-65.987897 18.425552,-65.983166 18.426608,-65.982966 18.426664,-65.982536 18.426754,-65.982071 18.426795,-65.981167 18.426887,-65.980281 18.426982,-65.978418 18.42721,-65.9764 18.42744,-65.976015 18.427421,-65.974714 18.427084,-65.972812 18.426581,-65.971968 18.426356,-65.97102 18.426107,-65.968527 18.425443,-65.96845 18.425426,-65.96839 18.425461,-65.96844 18.425504,-65.968525 18.425517,-65.968645 18.425543,-65.97473 18.427146,-65.975896 18.427446,-65.976361 18.427501,-65.978643 18.427252,-65.98246 18.426828,-65.982988 18.426725,-65.983085 18.4266,-65.983062 18.426502,-65.982877 18.425691,-65.982713 18.424616,-65.982736 18.424534,-65.987677 18.423428,-65.987744 18.42337,-65.987558 18.422377,-65.987483 18.422329,-65.983125 18.423296,-65.98302 18.423277,-65.982642 18.421075,-65.982427 18.419843,-65.982227 18.418699,-65.982265 18.418659,-65.982439 18.418668,-65.983514 18.419119,-65.983815 18.419231,-65.983929 18.419252,-65.984064 18.419259,-65.984217 18.419223,-65.985182 18.41874,-65.985271 18.41865,-65.985223 18.418515,-65.984701 18.417554,-65.984454 18.417046,-65.984276 18.416731,-65.983994 18.416272,-65.983464 18.415306,-65.98303 18.414674,-65.982616 18.414045,-65.982506 18.413818,-65.982439 18.413598,-65.98235 18.413182,-65.982225 18.412448,-65.982062 18.411498,-65.982034 18.411,-65.982084 18.410013,-65.98218 18.408917,-65.982187 18.408583,-65.982122 18.408242,-65.982038 18.407846,-65.981863 18.406981,-65.981917 18.406872,-65.982025 18.406824,-65.983096 18.40685,-65.984475 18.406875,-65.984875 18.406895,-65.984997 18.406876,-65.985041 18.406703,-65.985034 18.406471,-65.984961 18.406239,-65.984874 18.406082,-65.984775 18.40596,-65.984622 18.40582,-65.984445 18.405698,-65.984336 18.405572,-65.984279 18.405459,-65.984267 18.405298,-65.984293 18.405018,-65.984303 18.404817,-65.984278 18.404593,-65.984047 18.403531,-65.983951 18.40309,-65.983652 18.401785,-65.98342 18.40078,-65.98312 18.399534,-65.982887 18.398547,-65.982583 18.397445,-65.982509 18.397174,-65.982331 18.396246,-65.982228 18.395792,-65.982063 18.395205,-65.98202 18.394903,-65.982017 18.394775,-65.982116 18.394439,-65.982094 18.394257,-65.981828 18.393984,-65.98172 18.393809,-65.981636 18.393591,-65.981565 18.393234,-65.981334 18.391621,-65.98121 18.391224,-65.981042 18.391012,-65.980786 18.390651,-65.98046 18.389978,-65.980086 18.389159,-65.979772 18.388481,-65.979029 18.386942,-65.978783 18.386398,-65.978143 18.385139,-65.977826 18.384538,-65.977374 18.383686,-65.976724 18.38324,-65.975804 18.382637,-65.975121 18.382233,-65.974242 18.381907,-65.97248 18.381337,-65.971311 18.380984,-65.970961 18.380925,-65.970726 18.380916,-65.968462 18.380821,-65.967096 18.380616,-65.965232 18.380359,-65.964554 18.380261,-65.963071 18.380047,-65.962929 18.380052,-65.962687 18.38015,-65.962233 18.380249,-65.961826 18.380121,-65.961704 18.38012,-65.961443 18.380182,-65.960525 18.380391,-65.959836 18.380542,-65.959644 18.380522,-65.959553 18.380551,-65.95945 18.380624,-65.959273 18.380667,-65.957982 18.380967,-65.957948 18.380948,-65.957832 18.38044,-65.95771 18.379964,-65.957663 18.37996,-65.957411 18.380013,-65.957047 18.380098,-65.956975 18.379859,-65.957325 18.379718)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'I-16-70','CAROLINA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'I-16-70' and direction = 'PDA_22'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (222, 0, 'I-16-70', 'PDA_22'),(223, 1, 'I-16-70', 'PDA_22'),(224, 2, 'I-16-70', 'PDA_22'),(225, 3, 'I-16-70', 'PDA_22'),(226, 4, 'I-16-70', 'PDA_22'),(227, 5, 'I-16-70', 'PDA_22'),(228, 6, 'I-16-70', 'PDA_22'),(229, 7, 'I-16-70', 'PDA_22'),(230, 8, 'I-16-70', 'PDA_22'),(231, 9, 'I-16-70', 'PDA_22'),(232, 10, 'I-16-70', 'PDA_22'),(233, 11, 'I-16-70', 'PDA_22'),(234, 12, 'I-16-70', 'PDA_22'),(235, 13, 'I-16-70', 'PDA_22'),(236, 14, 'I-16-70', 'PDA_22'),(237, 15, 'I-16-70', 'PDA_22'),(238, 16, 'I-16-70', 'PDA_22'),(239, 17, 'I-16-70', 'PDA_22'),(240, 18, 'I-16-70', 'PDA_22'),(241, 19, 'I-16-70', 'PDA_22'),(242, 20, 'I-16-70', 'PDA_22'),(243, 21, 'I-16-70', 'PDA_22'),(244, 22, 'I-16-70', 'PDA_22'),(245, 23, 'I-16-70', 'PDA_22'),(246, 24, 'I-16-70', 'PDA_22'),(247, 25, 'I-16-70', 'PDA_22'),(248, 26, 'I-16-70', 'PDA_22'),(249, 27, 'I-16-70', 'PDA_22'),(250, 28, 'I-16-70', 'PDA_22'),(251, 29, 'I-16-70', 'PDA_22'),(252, 30, 'I-16-70', 'PDA_22'),(253, 31, 'I-16-70', 'PDA_22'),(254, 32, 'I-16-70', 'PDA_22'),(255, 33, 'I-16-70', 'PDA_22'),(256, 34, 'I-16-70', 'PDA_22'),(257, 35, 'I-16-70', 'PDA_22'),(258, 36, 'I-16-70', 'PDA_22'),(259, 37, 'I-16-70', 'PDA_22'),(260, 38, 'I-16-70', 'PDA_22'),(261, 39, 'I-16-70', 'PDA_22'),(262, 40, 'I-16-70', 'PDA_22');
delete from ref.subroute_stop where route = 'I-16-70' and direction = 'CAROLINA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (292, 0, 'I-16-70', 'CAROLINA'),(293, 1, 'I-16-70', 'CAROLINA'),(294, 2, 'I-16-70', 'CAROLINA'),(295, 3, 'I-16-70', 'CAROLINA'),(296, 4, 'I-16-70', 'CAROLINA'),(297, 5, 'I-16-70', 'CAROLINA'),(298, 6, 'I-16-70', 'CAROLINA'),(299, 7, 'I-16-70', 'CAROLINA'),(300, 8, 'I-16-70', 'CAROLINA'),(301, 9, 'I-16-70', 'CAROLINA'),(302, 10, 'I-16-70', 'CAROLINA'),(303, 11, 'I-16-70', 'CAROLINA'),(304, 12, 'I-16-70', 'CAROLINA'),(305, 13, 'I-16-70', 'CAROLINA'),(306, 14, 'I-16-70', 'CAROLINA'),(307, 15, 'I-16-70', 'CAROLINA'),(308, 16, 'I-16-70', 'CAROLINA'),(309, 17, 'I-16-70', 'CAROLINA'),(310, 18, 'I-16-70', 'CAROLINA'),(311, 19, 'I-16-70', 'CAROLINA'),(312, 20, 'I-16-70', 'CAROLINA'),(313, 21, 'I-16-70', 'CAROLINA'),(314, 22, 'I-16-70', 'CAROLINA'),(315, 23, 'I-16-70', 'CAROLINA'),(316, 24, 'I-16-70', 'CAROLINA'),(317, 25, 'I-16-70', 'CAROLINA'),(319, 26, 'I-16-70', 'CAROLINA'),(320, 27, 'I-16-70', 'CAROLINA'),(321, 28, 'I-16-70', 'CAROLINA'),(322, 29, 'I-16-70', 'CAROLINA'),(323, 30, 'I-16-70', 'CAROLINA'),(324, 31, 'I-16-70', 'CAROLINA'),(325, 32, 'I-16-70', 'CAROLINA'),(326, 33, 'I-16-70', 'CAROLINA'),(327, 34, 'I-16-70', 'CAROLINA'),(328, 35, 'I-16-70', 'CAROLINA'),(329, 36, 'I-16-70', 'CAROLINA');
