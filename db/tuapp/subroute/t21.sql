delete from ref.subroute_new where route = 'T21' and direction = 'SAN_JUAN';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.060473 18.435718,-66.060445 18.435823,-66.060401 18.435978,-66.060297 18.436021,-66.059987 18.436029,-66.059386 18.436036,-66.059319 18.436089,-66.059275 18.43621,-66.05933 18.436871,-66.059366 18.43757,-66.059473 18.437916,-66.059508 18.437981,-66.059729 18.438359,-66.059947 18.43866,-66.062669 18.441736,-66.063737 18.442614,-66.064376 18.443133,-66.065982 18.444365,-66.067693 18.44565,-66.068128 18.445983,-66.068237 18.446109,-66.068223 18.446197,-66.068202 18.446232,-66.067991 18.44658,-66.066384 18.44905,-66.065862 18.449862,-66.065631 18.450193,-66.064873 18.451003,-66.064509 18.451375,-66.063869 18.452039,-66.06378 18.452314,-66.063568 18.453095,-66.063462 18.453728,-66.06335 18.454361,-66.063353 18.454439,-66.063415 18.454498,-66.063555 18.454528,-66.065576 18.454824,-66.06781 18.455053,-66.069095 18.455218,-66.069977 18.455483,-66.071717 18.456055,-66.074439 18.456979,-66.074657 18.457083,-66.074857 18.457282,-66.075592 18.458129,-66.07584 18.458294,-66.07656 18.458718,-66.078102 18.459582,-66.079425 18.460338,-66.079654 18.460415,-66.081868 18.46078,-66.082034 18.460778,-66.082321 18.460729,-66.083297 18.460592,-66.086231 18.460044,-66.086359 18.460078,-66.086433 18.460124,-66.086587 18.460476,-66.086772 18.460857,-66.087094 18.461155,-66.087731 18.461359,-66.088385 18.461806,-66.088411 18.461841,-66.088459 18.461839,-66.088778 18.461828,-66.089049 18.46186,-66.090592 18.462447,-66.091317 18.462731,-66.091949 18.462987,-66.093582 18.463649,-66.093705 18.463692,-66.093833 18.463753,-66.09407 18.463763,-66.094519 18.463759,-66.095628 18.463832,-66.097225 18.463957,-66.098437 18.464032,-66.099661 18.464093,-66.10097 18.46419,-66.102263 18.464296,-66.102954 18.464495,-66.103684 18.46468,-66.104489 18.464893,-66.105666 18.465207,-66.10582 18.465238,-66.10599 18.465263,-66.106198 18.465282,-66.106529 18.465232,-66.106751 18.465252,-66.107096 18.465309,-66.107674 18.465239,-66.107742 18.465152,-66.107816 18.463944,-66.107857 18.463895,-66.107928 18.463893,-66.108581 18.463939,-66.110093 18.464018,-66.110467 18.464036,-66.110518 18.464079,-66.110482 18.46425,-66.110421 18.464302,-66.110362 18.464348,-66.110327 18.464407,-66.110337 18.464666,-66.110376 18.464813)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T21','SAN_JUAN', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T21' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.110385 18.46484,-66.110424 18.464993,-66.11051 18.465044,-66.110669 18.465029,-66.111114 18.46492,-66.111212 18.464824,-66.111043 18.464202,-66.110974 18.464035,-66.110858 18.463976,-66.109962 18.463941,-66.109456 18.463926,-66.107032 18.463798,-66.106904 18.463821,-66.106701 18.464091,-66.106131 18.464998,-66.106003 18.465073,-66.105763 18.46519,-66.105607 18.465147,-66.105161 18.465017,-66.104675 18.464884,-66.104532 18.464849,-66.103781 18.464654,-66.103058 18.464467,-66.102405 18.464263,-66.102168 18.464227,-66.101405 18.464172,-66.100506 18.464119,-66.099517 18.464044,-66.098991 18.464022,-66.097971 18.463966,-66.097223 18.463913,-66.096799 18.463879,-66.095735 18.463802,-66.094491 18.46371,-66.093918 18.463711,-66.092532 18.463167,-66.091056 18.462587,-66.090219 18.462257,-66.089547 18.462004,-66.089025 18.461817,-66.088716 18.461792,-66.088475 18.461821,-66.088418 18.461827,-66.088018 18.461902,-66.087893 18.461898,-66.087776 18.461861,-66.087646 18.461781,-66.087528 18.461621,-66.087414 18.461375,-66.087317 18.461048,-66.087298 18.460713,-66.087281 18.460454,-66.087267 18.460347,-66.087198 18.460216,-66.087055 18.460097,-66.086921 18.46002,-66.08666 18.459937,-66.08632 18.45993,-66.085918 18.459986,-66.083282 18.460476,-66.082299 18.460679,-66.081973 18.460733)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T21','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T21' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.081973 18.460733,-66.081815 18.460725,-66.081368 18.460652,-66.079993 18.460432,-66.079559 18.460343,-66.079441 18.460284,-66.078675 18.459855,-66.077819 18.459364,-66.077044 18.458922,-66.076404 18.458559,-66.075974 18.458321,-66.075676 18.458116,-66.075386 18.457803,-66.074728 18.457056,-66.074455 18.456637,-66.074228 18.456274,-66.074021 18.455978,-66.073942 18.455912,-66.072862 18.455404,-66.071808 18.454913,-66.07095 18.454526,-66.070586 18.454347,-66.070392 18.454307,-66.069233 18.454173,-66.068924 18.454138,-66.068728 18.454157,-66.068428 18.454216,-66.067262 18.454451,-66.066592 18.454604,-66.066106 18.454682,-66.065723 18.454734,-66.065506 18.454743,-66.065253 18.454718,-66.06375 18.454518,-66.063481 18.454481,-66.063414 18.454434,-66.0634 18.454382,-66.063426 18.454245,-66.063646 18.453024,-66.063772 18.452595,-66.063897 18.452132,-66.064414 18.451568,-66.065539 18.450379,-66.065817 18.450172,-66.065931 18.450042,-66.066235 18.449538,-66.066513 18.448985,-66.06797 18.446729,-66.068235 18.446266,-66.068265 18.446194,-66.068279 18.446086,-66.068198 18.445988,-66.068011 18.445847,-66.065998 18.444327,-66.063811 18.44261,-66.062675 18.441694,-66.059938 18.438578,-66.059643 18.438136,-66.059522 18.437841,-66.059464 18.437681,-66.059335 18.436277,-66.0593 18.436016,-66.059282 18.435514,-66.059305 18.435406,-66.059369 18.43535,-66.059522 18.43533,-66.059709 18.435343)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T21','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'T21' and direction = 'SAGRADO_CORAZON'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1602, 0, 'T21', 'SAGRADO_CORAZON'),(279, 1, 'T21', 'SAGRADO_CORAZON'),(281, 2, 'T21', 'SAGRADO_CORAZON'),(282, 3, 'T21', 'SAGRADO_CORAZON'),(283, 4, 'T21', 'SAGRADO_CORAZON'),(284, 5, 'T21', 'SAGRADO_CORAZON'),(285, 6, 'T21', 'SAGRADO_CORAZON'),(537, 7, 'T21', 'SAGRADO_CORAZON'),(538, 8, 'T21', 'SAGRADO_CORAZON'),(539, 9, 'T21', 'SAGRADO_CORAZON'),(540, 10, 'T21', 'SAGRADO_CORAZON'),(541, 11, 'T21', 'SAGRADO_CORAZON'),(542, 12, 'T21', 'SAGRADO_CORAZON'),(543, 13, 'T21', 'SAGRADO_CORAZON'),(544, 14, 'T21', 'SAGRADO_CORAZON'),(545, 15, 'T21', 'SAGRADO_CORAZON'),(546, 16, 'T21', 'SAGRADO_CORAZON'),(547, 17, 'T21', 'SAGRADO_CORAZON'),(256, 18, 'T21', 'SAGRADO_CORAZON'),(257, 19, 'T21', 'SAGRADO_CORAZON'),(258, 20, 'T21', 'SAGRADO_CORAZON'),(48, 21, 'T21', 'SAGRADO_CORAZON'),(49, 22, 'T21', 'SAGRADO_CORAZON'),(50, 23, 'T21', 'SAGRADO_CORAZON'),(51, 24, 'T21', 'SAGRADO_CORAZON'),(52, 25, 'T21', 'SAGRADO_CORAZON'),(560, 26, 'T21', 'SAGRADO_CORAZON');
delete from ref.subroute_stop where route = 'T21' and direction = 'SAN_JUAN'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (36, 0, 'T21', 'SAN_JUAN'),(1573, 1, 'T21', 'SAN_JUAN'),(1572, 2, 'T21', 'SAN_JUAN'),(1571, 3, 'T21', 'SAN_JUAN'),(1603, 4, 'T21', 'SAN_JUAN'),(1604, 5, 'T21', 'SAN_JUAN'),(292, 6, 'T21', 'SAN_JUAN'),(293, 7, 'T21', 'SAN_JUAN'),(294, 8, 'T21', 'SAN_JUAN'),(520, 9, 'T21', 'SAN_JUAN'),(521, 10, 'T21', 'SAN_JUAN'),(522, 11, 'T21', 'SAN_JUAN'),(523, 12, 'T21', 'SAN_JUAN'),(524, 13, 'T21', 'SAN_JUAN'),(525, 14, 'T21', 'SAN_JUAN'),(526, 15, 'T21', 'SAN_JUAN'),(527, 16, 'T21', 'SAN_JUAN'),(528, 17, 'T21', 'SAN_JUAN'),(269, 18, 'T21', 'SAN_JUAN'),(270, 19, 'T21', 'SAN_JUAN'),(271, 20, 'T21', 'SAN_JUAN'),(272, 21, 'T21', 'SAN_JUAN'),(274, 22, 'T21', 'SAN_JUAN'),(276, 23, 'T21', 'SAN_JUAN'),(277, 24, 'T21', 'SAN_JUAN'),(1602, 25, 'T21', 'SAN_JUAN');
