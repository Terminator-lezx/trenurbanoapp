delete from ref.subroute where route = 'C43' and direction = 'CAROLINA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.992118 18.421871,-65.992459 18.421778,-65.992519 18.421697,-65.992538 18.421602,-65.992505 18.421407,-65.992465 18.421261,-65.99239 18.421206,-65.992189 18.421217,-65.991891 18.421289,-65.989976 18.421744,-65.988769 18.422021,-65.98868 18.422092,-65.988666 18.422163,-65.988848 18.422796,-65.988962 18.423318,-65.989055 18.423864,-65.989248 18.424965,-65.989335 18.425428,-65.989478 18.426001,-65.989581 18.426417,-65.989644 18.42678,-65.989678 18.426889,-65.989836 18.427225,-65.989891 18.427354,-65.989883 18.427433,-65.989828 18.427507,-65.989667 18.427604,-65.98951 18.427681,-65.989467 18.427701,-65.989417 18.427703,-65.989363 18.427685,-65.989328 18.427646,-65.989174 18.42732,-65.989068 18.427026,-65.988961 18.42602,-65.988882 18.42543,-65.988855 18.425392,-65.988796 18.425379,-65.988659 18.425402,-65.987969 18.425544,-65.986778 18.425795,-65.984731 18.426263,-65.983046 18.426643,-65.982417 18.426769,-65.980403 18.426967,-65.978635 18.42717,-65.978578 18.427177,-65.977765 18.427271,-65.97632 18.427421,-65.976019 18.427395,-65.975143 18.42719,-65.970826 18.426042,-65.970494 18.425943,-65.970388 18.42594,-65.970305 18.426015,-65.970263 18.426165,-65.969885 18.427481,-65.969755 18.427948,-65.969743 18.428121,-65.969812 18.428936,-65.96983 18.428973,-65.969857 18.429003,-65.970379 18.429135,-65.97095 18.429298,-65.970977 18.429321,-65.970983 18.429353,-65.970962 18.429435,-65.970853 18.42983,-65.970854 18.429945,-65.970986 18.430356,-65.971042 18.430428,-65.971158 18.430487,-65.972558 18.430949,-65.972694 18.430994,-65.972746 18.43099,-65.972791 18.430962,-65.972814 18.430921,-65.973131 18.429873,-65.973151 18.429829,-65.973197 18.429811,-65.975174 18.430326,-65.975202 18.430378,-65.975196 18.430451,-65.974848 18.431616,-65.974831 18.431694,-65.974849 18.431747,-65.974912 18.431792,-65.977227 18.432404,-65.97731 18.432405,-65.97739 18.432396,-65.97749 18.432373,-65.977584 18.43233,-65.979312 18.431054,-65.979382 18.430992,-65.979394 18.430945,-65.979378 18.430887,-65.97932 18.430812,-65.979187 18.430635,-65.979097 18.430463,-65.979034 18.430208,-65.978837 18.428685,-65.978671 18.427365,-65.978657 18.427276,-65.978629 18.427038,-65.978586 18.426699,-65.978078 18.420297,-65.978006 18.419222,-65.978023 18.419157,-65.978082 18.419135,-65.978468 18.419112,-65.978998 18.419047,-65.979356 18.418963,-65.97993 18.418744,-65.981014 18.418308,-65.982925 18.417552,-65.983231 18.417363,-65.983466 18.417259,-65.983798 18.417148,-65.984121 18.417077,-65.984285 18.417007,-65.984343 18.416931,-65.984327 18.416796,-65.984119 18.416473,-65.983531 18.415427,-65.983117 18.414792,-65.982625 18.414061,-65.982519 18.413861,-65.982443 18.413552,-65.982338 18.413136,-65.982149 18.411991,-65.982086 18.411611,-65.982049 18.411313,-65.982038 18.411078,-65.982046 18.410706,-65.9821 18.409847,-65.982179 18.408911,-65.98219 18.408542,-65.982167 18.408315,-65.982071 18.408011,-65.981885 18.407018,-65.981892 18.406939,-65.981924 18.40688,-65.981972 18.406854,-65.982079 18.406841,-65.982914 18.406876,-65.985054 18.406926,-65.988605 18.407017,-65.988933 18.40699,-65.989215 18.406915,-65.989441 18.406802,-65.989554 18.40677,-65.989662 18.406818,-65.991013 18.40883,-65.991183 18.409195,-65.991347 18.409731,-65.991436 18.410094,-65.993098 18.417014,-65.993973 18.420697,-65.99393 18.420777,-65.993758 18.420839,-65.992384 18.421169,-65.991951 18.42129,-65.99149 18.421402,-65.991445 18.421472,-65.991475 18.421579,-65.991575 18.421937,-65.991667 18.421975,-65.992073 18.421881)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'C43','CAROLINA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'C43' and direction = 'CAROLINA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1610, 0, 'C43', 'CAROLINA'),(220, 1, 'C43', 'CAROLINA'),(221, 2, 'C43', 'CAROLINA'),(1173, 3, 'C43', 'CAROLINA'),(1107, 4, 'C43', 'CAROLINA'),(1108, 5, 'C43', 'CAROLINA'),(1109, 6, 'C43', 'CAROLINA'),(1110, 7, 'C43', 'CAROLINA'),(1111, 8, 'C43', 'CAROLINA'),(1112, 9, 'C43', 'CAROLINA'),(1113, 10, 'C43', 'CAROLINA'),(1114, 11, 'C43', 'CAROLINA'),(1115, 12, 'C43', 'CAROLINA'),(1117, 13, 'C43', 'CAROLINA'),(1118, 14, 'C43', 'CAROLINA'),(1119, 15, 'C43', 'CAROLINA'),(1120, 16, 'C43', 'CAROLINA'),(1121, 17, 'C43', 'CAROLINA'),(1122, 18, 'C43', 'CAROLINA'),(1123, 19, 'C43', 'CAROLINA'),(1124, 20, 'C43', 'CAROLINA'),(1125, 21, 'C43', 'CAROLINA'),(1126, 22, 'C43', 'CAROLINA'),(378, 23, 'C43', 'CAROLINA'),(379, 24, 'C43', 'CAROLINA'),(380, 25, 'C43', 'CAROLINA'),(1127, 26, 'C43', 'CAROLINA'),(1128, 27, 'C43', 'CAROLINA'),(1129, 28, 'C43', 'CAROLINA'),(1130, 29, 'C43', 'CAROLINA'),(1131, 30, 'C43', 'CAROLINA'),(1132, 31, 'C43', 'CAROLINA'),(1371, 32, 'C43', 'CAROLINA'),(1372, 33, 'C43', 'CAROLINA'),(1373, 34, 'C43', 'CAROLINA'),(1374, 35, 'C43', 'CAROLINA'),(383, 36, 'C43', 'CAROLINA'),(384, 37, 'C43', 'CAROLINA');
