delete from ref.subroute where route = 'C22' and direction = 'PLAZA_LAS_AMERICAS';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.060104 18.435378,-66.060296 18.435422,-66.06048 18.435448,-66.060624 18.435367,-66.060733 18.434924,-66.060737 18.434401,-66.060622 18.433984,-66.060034 18.432103,-66.05981 18.431257,-66.059646 18.430616,-66.059338 18.429103,-66.058759 18.426251,-66.058819 18.426148,-66.058947 18.426107,-66.059363 18.426034,-66.060466 18.425813,-66.061998 18.425407,-66.06318 18.425083,-66.063709 18.424957,-66.063791 18.425027,-66.064659 18.428264,-66.064749 18.428425,-66.064984 18.42847,-66.065139 18.42843,-66.065521 18.428317,-66.067494 18.427786,-66.06854 18.427481,-66.070312 18.426947,-66.071657 18.426585,-66.073085 18.426075,-66.074651 18.425321,-66.074715 18.425313,-66.075302 18.42536,-66.075423 18.425352,-66.075584 18.425301,-66.07735 18.424488,-66.077472 18.424348,-66.077441 18.424174,-66.075476 18.420368,-66.074495 18.41854,-66.074457 18.418408,-66.074498 18.418263,-66.076961 18.417099,-66.076968 18.417002,-66.076649 18.416404,-66.076531 18.416392,-66.075304 18.416971)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'C22','PLAZA_LAS_AMERICAS', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'C22' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.075271 18.416992,-66.074026 18.417581,-66.073998 18.417737,-66.074374 18.418566,-66.074583 18.418956,-66.075401 18.420414,-66.077368 18.424209,-66.077378 18.42431,-66.0773 18.424408,-66.075568 18.425235,-66.075402 18.425282,-66.074891 18.425245,-66.074709 18.425239,-66.074342 18.425408,-66.073031 18.426007,-66.071657 18.426526,-66.070299 18.426901,-66.068494 18.427419,-66.067473 18.427726,-66.06546 18.428255,-66.0651 18.428346,-66.06496 18.428355,-66.064885 18.428308,-66.064805 18.428026,-66.064218 18.425861,-66.063972 18.425038,-66.063865 18.424884,-66.063789 18.424871,-66.063164 18.42501,-66.060414 18.425738,-66.05879 18.426081,-66.058678 18.426174,-66.058657 18.426329,-66.059233 18.429118,-66.059529 18.430628,-66.059695 18.431281,-66.05992 18.432142,-66.060431 18.433722,-66.060532 18.433976,-66.060666 18.43439,-66.060689 18.434688,-66.060685 18.434906,-66.060566 18.43536,-66.060454 18.435682,-66.060416 18.435854,-66.060343 18.435957,-66.060151 18.435989,-66.05988 18.436015,-66.059845 18.436015,-66.059548 18.436015,-66.059453 18.436007,-66.05941 18.435984,-66.059344 18.435908,-66.059316 18.435477,-66.059383 18.435387,-66.05941 18.435264,-66.059473 18.435221,-66.059549 18.435193,-66.05967 18.435187,-66.059786 18.435198)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'C22','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'C22' and direction = 'PLAZA_LAS_AMERICAS'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (510, 0, 'C22', 'PLAZA_LAS_AMERICAS'),(102, 1, 'C22', 'PLAZA_LAS_AMERICAS'),(103, 2, 'C22', 'PLAZA_LAS_AMERICAS'),(104, 3, 'C22', 'PLAZA_LAS_AMERICAS'),(105, 4, 'C22', 'PLAZA_LAS_AMERICAS'),(106, 5, 'C22', 'PLAZA_LAS_AMERICAS'),(107, 6, 'C22', 'PLAZA_LAS_AMERICAS'),(108, 7, 'C22', 'PLAZA_LAS_AMERICAS'),(110, 8, 'C22', 'PLAZA_LAS_AMERICAS'),(63, 9, 'C22', 'PLAZA_LAS_AMERICAS'),(1607, 10, 'C22', 'PLAZA_LAS_AMERICAS');
delete from ref.subroute_stop where route = 'C22' and direction = 'SAGRADO_CORAZON'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1607, 0, 'C22', 'SAGRADO_CORAZON'),(138, 1, 'C22', 'SAGRADO_CORAZON'),(139, 2, 'C22', 'SAGRADO_CORAZON'),(140, 3, 'C22', 'SAGRADO_CORAZON'),(141, 4, 'C22', 'SAGRADO_CORAZON'),(142, 5, 'C22', 'SAGRADO_CORAZON'),(143, 6, 'C22', 'SAGRADO_CORAZON'),(144, 7, 'C22', 'SAGRADO_CORAZON'),(145, 8, 'C22', 'SAGRADO_CORAZON'),(146, 9, 'C22', 'SAGRADO_CORAZON'),(147, 10, 'C22', 'SAGRADO_CORAZON'),(33, 11, 'C22', 'SAGRADO_CORAZON'),(34, 12, 'C22', 'SAGRADO_CORAZON'),(35, 13, 'C22', 'SAGRADO_CORAZON'),(560, 14, 'C22', 'SAGRADO_CORAZON');
