delete from ref.subroute where route = 'C44' and direction = 'ITURREGUI'; with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.953737 18.386076,-65.953655 18.386097,-65.953609 18.386179,-65.953592 18.386248,-65.953572 18.386321,-65.953549 18.386359,-65.953426 18.386371,-65.95336 18.386371,-65.953304 18.386352,-65.953227 18.386324,-65.953168 18.38634,-65.953081 18.386447,-65.952989 18.386648,-65.952916 18.386881,-65.952288 18.391414,-65.952296 18.391475,-65.952311 18.391549,-65.952346 18.391588,-65.952376 18.391611,-65.95243 18.391631,-65.95463 18.39186,-65.954955 18.391864,-65.957671 18.391604,-65.957731 18.39165,-65.957759 18.391863,-65.957807 18.393759,-65.957863 18.393852,-65.957947 18.393881,-65.959049 18.393862,-65.959099 18.393881,-65.959133 18.393958,-65.959181 18.395831,-65.959147 18.395884,-65.959023 18.395897,-65.957294 18.395933,-65.955233 18.395988,-65.955072 18.396036,-65.954142 18.396362,-65.954077 18.396412,-65.954061 18.396482,-65.954082 18.396575,-65.954468 18.397543,-65.954725 18.397873,-65.955523 18.398802,-65.959162 18.403041,-65.959235 18.403161,-65.959255 18.403603,-65.959311 18.406172,-65.959249 18.406252,-65.959149 18.406288,-65.958857 18.406318,-65.95704 18.406368,-65.956093 18.406398,-65.955991 18.406438,-65.955955 18.406643,-65.955987 18.408266,-65.956015 18.408877,-65.956434 18.410417,-65.95681 18.41172,-65.957221 18.413238,-65.957237 18.413356,-65.957379 18.418289,-65.957398 18.418855,-65.957457 18.418943,-65.957537 18.418983,-65.957635 18.418987,-65.961566 18.418873,-65.963398 18.418831,-65.964335 18.418785,-65.965039 18.418688,-65.965761 18.418543,-65.96588 18.418498,-65.96593 18.418407,-65.965882 18.41815,-65.965734 18.417334,-65.965445 18.416003,-65.965372 18.415446,-65.965197 18.410033,-65.965276 18.409202,-65.965361 18.408757,-65.965609 18.407931,-65.965799 18.407557,-65.966235 18.406785,-65.96641 18.406474,-65.96649 18.406363,-65.966626 18.406253,-65.966642 18.406154,-65.966586 18.406071,-65.96653 18.405972,-65.966514 18.405877,-65.966504 18.405641,-65.966493 18.404812,-65.966448 18.40456,-65.966368 18.404284,-65.966148 18.403887,-65.965888 18.403584,-65.965676 18.403281,-65.965475 18.402895,-65.965308 18.402495,-65.965195 18.402023,-65.965153 18.401682,-65.965167 18.401012,-65.965269 18.40054,-65.965504 18.399936,-65.965679 18.39947,-65.965749 18.399153,-65.965766 18.398839,-65.965766 18.39812,-65.965749 18.397748,-65.965721 18.396323,-65.965699 18.395763,-65.965665 18.394805,-65.965587 18.392929,-65.965475 18.391715,-65.965442 18.391499,-65.96534 18.391386,-65.965184 18.391335,-65.964387 18.391362,-65.963231 18.391383,-65.96225 18.39141,-65.96039 18.391476,-65.957728 18.391544,-65.954945 18.391801,-65.954649 18.391799,-65.952447 18.391579,-65.952365 18.391538,-65.952339 18.391439,-65.952342 18.391356,-65.952628 18.389395,-65.95284 18.387831,-65.952955 18.386882,-65.953026 18.386651,-65.953125 18.386463,-65.95323 18.386431,-65.953679 18.386383,-65.953917 18.386331,-65.953942 18.386248,-65.953926 18.386165,-65.953863 18.386111,-65.953775 18.386082)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'C44','ITURREGUI', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
