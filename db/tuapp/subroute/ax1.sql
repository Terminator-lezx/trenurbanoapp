delete from ref.subroute where route = 'AX1' and direction = 'SAN_JUAN';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.11665568182032 18.443705309892504,-66.11688129222036 18.444049647117904,-66.11688675366032 18.444520408811616,-66.11276571267858 18.461129919562936,-66.11279382761276 18.462527965626766,-66.1129026303692 18.4630507677998)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'AX1','SAN_JUAN', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute where route = 'AX1' and direction = 'CATANO';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.11290988709887 18.463048473395823,-66.11280108434244 18.462525671215797,-66.11277296940824 18.46112762513328,-66.11689401039 18.44451811416,-66.11688854895 18.44404735246,-66.11666293855 18.44370301523)'), 32161) geom) insert into ref.subroute(route, direction, geom) select 'AX1','CATANO', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'AX1' and direction = 'SAN_JUAN'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1578, 0, 'AX1', 'SAN_JUAN'),(1579, 1, 'AX1', 'SAN_JUAN');
delete from ref.subroute_stop where route = 'AX1' and direction = 'CATANO'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1579, 0, 'AX1', 'CATANO'),(1578, 1, 'AX1', 'CATANO');
