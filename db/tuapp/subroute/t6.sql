delete from ref.subroute_new where route = 'T6' and direction = 'ITURREGUI';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.953896 18.386157,-65.95387 18.386116,-65.953778 18.386085,-65.953685 18.386088,-65.95364 18.386147,-65.953575 18.386243,-65.953575 18.386309,-65.953604 18.386357,-65.953694 18.386365,-65.9543 18.386278,-65.958167 18.385699,-65.960028 18.385424,-65.96356 18.384947,-65.964417 18.384848,-65.96454 18.384861,-65.964591 18.384909,-65.964615 18.385051,-65.964915 18.387635,-65.965205 18.390087,-65.9652 18.390377,-65.9652 18.390469,-65.965277 18.39073,-65.965328 18.391226,-65.965392 18.391314,-65.965497 18.391355,-65.965648 18.391375,-65.966972 18.391351,-65.968523 18.391314,-65.968862 18.391312,-65.969135 18.391326,-65.969478 18.391392,-65.969764 18.391468,-65.970156 18.391596,-65.970663 18.391862,-65.973561 18.393751,-65.976499 18.395684,-65.976665 18.395771,-65.976921 18.395849,-65.977886 18.396136,-65.977991 18.396193,-65.978012 18.396278,-65.978007 18.39638,-65.977877 18.399938,-65.97779 18.402667,-65.977714 18.404568,-65.977635 18.406745,-65.977617 18.406941,-65.977587 18.407074,-65.977176 18.408021,-65.977045 18.408334,-65.97701 18.408525,-65.977007 18.408655,-65.97703 18.408828,-65.977274 18.409826,-65.977823 18.4117,-65.977865 18.411882,-65.977884 18.412118,-65.977875 18.412487,-65.977802 18.413551,-65.977725 18.415512,-65.977875 18.418697,-65.97791 18.418907,-65.977952 18.418996,-65.977994 18.419061,-65.978064 18.419112,-65.9782 18.419114,-65.979145 18.419007,-65.979483 18.418926,-65.980116 18.41866,-65.981049 18.418279,-65.982893 18.417554,-65.983036 18.417483,-65.983366 18.417284,-65.983566 18.417201,-65.984137 18.417046,-65.98487 18.416897,-65.986749 18.416507,-65.987392 18.416355,-65.988724 18.416045,-65.991292 18.415482,-65.992575 18.415199,-65.992647 18.415201,-65.992685 18.415263,-65.993463 18.418536,-65.993978 18.420688,-65.99398 18.420746,-65.993954 18.420779,-65.993893 18.420819,-65.993786 18.420846,-65.991869 18.421285,-65.99152 18.421378,-65.991466 18.421433,-65.991462 18.421495,-65.99148 18.421593,-65.991576 18.421916,-65.991621 18.421948,-65.99171 18.421943,-65.99206 18.421866)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T6','ITURREGUI', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T6' and direction = 'CAROLINA';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.99206 18.421866,-65.992432 18.421771,-65.992518 18.421709,-65.992536 18.421633,-65.992494 18.421444,-65.992473 18.421309,-65.992485 18.42125,-65.992545 18.421213,-65.992648 18.421179,-65.99393 18.42087,-65.994001 18.420833,-65.994037 18.420783,-65.994041 18.420712,-65.994031 18.420643,-65.993761 18.419493,-65.993257 18.417405,-65.992919 18.416008,-65.992731 18.415238,-65.992695 18.415161,-65.992613 18.415133,-65.992488 18.415159,-65.989623 18.41578,-65.987515 18.41623,-65.986901 18.416368,-65.986002 18.416542,-65.985253 18.416694,-65.984344 18.416926,-65.984019 18.417017,-65.98366 18.417107,-65.983178 18.417266,-65.982136 18.417658,-65.980062 18.418453,-65.979564 18.418653,-65.979263 18.418764,-65.978907 18.418832,-65.978118 18.418925,-65.97802 18.418903,-65.977969 18.418863,-65.977942 18.418721,-65.977849 18.416725,-65.977793 18.415524,-65.97782 18.414811,-65.977867 18.413606,-65.977894 18.412956,-65.977948 18.412491,-65.977957 18.412129,-65.977894 18.41171,-65.977653 18.410897,-65.977094 18.408824,-65.97707 18.408656,-65.977076 18.408537,-65.977112 18.408353,-65.977318 18.407856,-65.977527 18.407402,-65.97765 18.407101,-65.977683 18.406983,-65.977698 18.406677,-65.977751 18.405446,-65.977874 18.401886,-65.978017 18.397817,-65.978086 18.396267,-65.97808 18.396159,-65.978053 18.396089,-65.977904 18.39604,-65.977317 18.39587,-65.976749 18.395692,-65.97659 18.395625,-65.976201 18.395381,-65.973127 18.39338,-65.971033 18.392014,-65.970554 18.391721,-65.970055 18.391486,-65.969732 18.39137,-65.969258 18.391284,-65.968625 18.391253,-65.965607 18.391315,-65.965494 18.391298,-65.965437 18.391259,-65.965407 18.391179,-65.965338 18.390585,-65.964856 18.386671,-65.964646 18.384902,-65.964613 18.384826,-65.964556 18.384803,-65.964404 18.384806,-65.962862 18.384993,-65.960976 18.385248,-65.959319 18.385496,-65.957434 18.385775,-65.954542 18.386207,-65.954058 18.386272,-65.953963 18.386266,-65.953918 18.386192,-65.953896 18.386157)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T6','CAROLINA', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'T6' and direction = 'ITURREGUI'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (357, 0, 'T6', 'ITURREGUI'),(359, 1, 'T6', 'ITURREGUI'),(360, 2, 'T6', 'ITURREGUI'),(361, 3, 'T6', 'ITURREGUI'),(362, 4, 'T6', 'ITURREGUI'),(363, 5, 'T6', 'ITURREGUI'),(364, 6, 'T6', 'ITURREGUI'),(365, 7, 'T6', 'ITURREGUI'),(366, 8, 'T6', 'ITURREGUI'),(367, 9, 'T6', 'ITURREGUI'),(368, 10, 'T6', 'ITURREGUI'),(369, 11, 'T6', 'ITURREGUI'),(370, 12, 'T6', 'ITURREGUI'),(371, 13, 'T6', 'ITURREGUI'),(372, 14, 'T6', 'ITURREGUI'),(373, 15, 'T6', 'ITURREGUI'),(374, 16, 'T6', 'ITURREGUI'),(375, 17, 'T6', 'ITURREGUI'),(376, 18, 'T6', 'ITURREGUI'),(377, 19, 'T6', 'ITURREGUI'),(378, 20, 'T6', 'ITURREGUI'),(379, 21, 'T6', 'ITURREGUI'),(380, 22, 'T6', 'ITURREGUI'),(381, 23, 'T6', 'ITURREGUI'),(382, 24, 'T6', 'ITURREGUI'),(383, 25, 'T6', 'ITURREGUI'),(384, 26, 'T6', 'ITURREGUI'),(1610, 27, 'T6', 'ITURREGUI');
delete from ref.subroute_stop where route = 'T6' and direction = 'CAROLINA'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1610, 0, 'T6', 'CAROLINA'),(331, 1, 'T6', 'CAROLINA'),(332, 2, 'T6', 'CAROLINA'),(333, 3, 'T6', 'CAROLINA'),(334, 4, 'T6', 'CAROLINA'),(335, 5, 'T6', 'CAROLINA'),(336, 6, 'T6', 'CAROLINA'),(337, 7, 'T6', 'CAROLINA'),(338, 8, 'T6', 'CAROLINA'),(339, 9, 'T6', 'CAROLINA'),(340, 10, 'T6', 'CAROLINA'),(341, 11, 'T6', 'CAROLINA'),(342, 12, 'T6', 'CAROLINA'),(343, 13, 'T6', 'CAROLINA'),(344, 14, 'T6', 'CAROLINA'),(345, 15, 'T6', 'CAROLINA'),(346, 16, 'T6', 'CAROLINA'),(347, 17, 'T6', 'CAROLINA'),(348, 18, 'T6', 'CAROLINA'),(349, 19, 'T6', 'CAROLINA'),(350, 20, 'T6', 'CAROLINA'),(351, 21, 'T6', 'CAROLINA'),(352, 22, 'T6', 'CAROLINA'),(353, 23, 'T6', 'CAROLINA'),(354, 24, 'T6', 'CAROLINA'),(355, 25, 'T6', 'CAROLINA'),(356, 26, 'T6', 'CAROLINA'),(357, 27, 'T6', 'CAROLINA');
