delete from ref.subroute_new where route = 'D15' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.063819 18.390389,-66.063577 18.390459,-66.063517 18.390497,-66.063483 18.390594,-66.063423 18.390655,-66.063272 18.390737,-66.062866 18.391004,-66.062836 18.391094,-66.062872 18.391203,-66.063022 18.391242,-66.06332 18.391287,-66.063839 18.391307,-66.064413 18.391286,-66.064699 18.391171,-66.064774 18.391009,-66.064775 18.390917,-66.064741 18.390803,-66.064612 18.390648,-66.064367 18.390393,-66.06421 18.390213,-66.06408 18.390103,-66.063725 18.389888,-66.063509 18.389772,-66.06339 18.389718,-66.063251 18.389692,-66.063183 18.389725,-66.062874 18.390089,-66.062471 18.39047,-66.061895 18.390969,-66.061106 18.391559,-66.059503 18.392479,-66.058008 18.393292,-66.05662 18.394108,-66.055546 18.394864,-66.05452 18.395655,-66.053669 18.396294,-66.05335 18.396455,-66.052985 18.396425,-66.052013 18.395781,-66.051583 18.395623,-66.049517 18.395443,-66.047872 18.395328,-66.046602 18.395146,-66.045585 18.395143,-66.044384 18.395062,-66.043202 18.394985,-66.042662 18.394987,-66.042504 18.39506,-66.042442 18.395258,-66.042546 18.395497,-66.042854 18.396138,-66.04323 18.397358,-66.04334 18.397833,-66.043403 18.398268,-66.043363 18.398329,-66.041538 18.398246,-66.040944 18.398275,-66.04066 18.398322,-66.040233 18.398514,-66.031507 18.397655,-66.031361 18.397769,-66.031124 18.399866,-66.030909 18.401142,-66.030855 18.401986,-66.031017 18.40463,-66.031041 18.405916,-66.031002 18.406956,-66.030886 18.407312,-66.03047 18.408154,-66.030425 18.408497,-66.030476 18.408793,-66.030581 18.408966,-66.030779 18.409177,-66.031014 18.409324,-66.031445 18.409384,-66.03186 18.409289,-66.032108 18.40913,-66.032291 18.409016,-66.032581 18.408851,-66.032785 18.408737,-66.032969 18.408649,-66.033162 18.4086,-66.033489 18.408548,-66.0338 18.408503,-66.034724 18.408484,-66.035534 18.408471,-66.035837 18.408464,-66.036057 18.408461,-66.036116 18.40851,-66.036166 18.408548,-66.036211 18.408641,-66.036212 18.408702,-66.036191 18.408877,-66.036124 18.409234,-66.036068 18.409356,-66.035875 18.409839,-66.03581 18.410003,-66.035561 18.410662,-66.035455 18.410936,-66.034595 18.413147,-66.034541 18.413187,-66.034461 18.413175,-66.033138 18.412679,-66.032659 18.412515,-66.032587 18.412537,-66.031751 18.414627,-66.031659 18.414922,-66.031705 18.414977,-66.032582 18.4153,-66.034448 18.415972,-66.034494 18.416013,-66.034491 18.416088,-66.033697 18.418102,-66.033662 18.418255,-66.033647 18.418417,-66.033911 18.419938,-66.034108 18.421096,-66.034231 18.421904,-66.034261 18.422038,-66.03429 18.422096,-66.034316 18.422132,-66.034398 18.422161,-66.034466 18.422152,-66.034657 18.422121,-66.034933 18.422074,-66.036843 18.421799,-66.037659 18.421651,-66.037874 18.421616,-66.037976 18.421589,-66.038262 18.421416,-66.038936 18.420934,-66.039902 18.420239,-66.041119 18.418641,-66.041196 18.41861,-66.041225 18.418616,-66.041304 18.418635,-66.042379 18.418917,-66.043203 18.419129,-66.043374 18.419176,-66.043488 18.419212,-66.043565 18.419262,-66.043843 18.420786,-66.043998 18.421587,-66.044138 18.422176,-66.04419 18.422316,-66.044264 18.422486,-66.044356 18.422624,-66.04476 18.423118,-66.045864 18.424504,-66.045954 18.4246,-66.047597 18.425599,-66.047739 18.425687,-66.048023 18.426014,-66.048606 18.426771,-66.048731 18.426928,-66.04881 18.426992,-66.048918 18.42703,-66.049821 18.427067,-66.05333 18.427244,-66.0535 18.427231,-66.053708 18.427183,-66.057467 18.426338,-66.057628 18.426362,-66.057743 18.426362,-66.057825 18.42634,-66.057849 18.426307,-66.057892 18.426206,-66.057847 18.425914,-66.057651 18.425031,-66.057424 18.424056,-66.057428 18.423946,-66.057806 18.423782,-66.057995 18.423749,-66.058057 18.423822,-66.058244 18.424672,-66.058568 18.426165,-66.058632 18.426368,-66.059506 18.43056,-66.059707 18.431443,-66.060181 18.432966,-66.060608 18.434222,-66.06068 18.434598,-66.060655 18.434887,-66.06041 18.43586)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'D15','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'D15' and direction = 'CUPEY';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.06041 18.43586,-66.060375 18.435967,-66.060331 18.435993,-66.060273 18.436005,-66.059444 18.436008,-66.059382 18.435987,-66.059369 18.435974,-66.059353 18.435958,-66.059341 18.435947,-66.059332 18.435914,-66.059315 18.435853,-66.059307 18.435827,-66.059247 18.434747,-66.059181 18.434195,-66.059138 18.434017,-66.05908 18.432735,-66.059076 18.432328,-66.059061 18.431923,-66.058777 18.430441,-66.05827 18.427936,-66.057943 18.426309,-66.057942 18.426307,-66.057912 18.42625,-66.057863 18.42623,-66.057782 18.42622,-66.057677 18.42623,-66.056507 18.426489,-66.055055 18.426844,-66.053537 18.427147,-66.053421 18.427165,-66.053302 18.427175,-66.053066 18.427175,-66.052181 18.427133,-66.05023 18.427038,-66.049148 18.426975,-66.049024 18.42695,-66.048926 18.426898,-66.048759 18.426788,-66.048187 18.426126,-66.047971 18.425762,-66.047885 18.425654,-66.047787 18.425596,-66.046907 18.425092,-66.046065 18.424603,-66.045909 18.424461,-66.04534 18.423741,-66.044421 18.422596,-66.044385 18.422514,-66.044334 18.422332,-66.043738 18.41943,-66.043647 18.419257,-66.04359 18.419171,-66.043487 18.41911,-66.04329 18.419067,-66.041197 18.418567,-66.041137 18.41857,-66.041072 18.418624,-66.040974 18.418764,-66.039891 18.420211,-66.039812 18.420274,-66.039614 18.420411,-66.038921 18.420919,-66.038244 18.421393,-66.037955 18.421569,-66.037867 18.421594,-66.037584 18.421642,-66.036832 18.421775,-66.03465 18.422095,-66.034448 18.422128,-66.034392 18.422133,-66.034344 18.422101,-66.03433 18.422056,-66.034311 18.421991,-66.033722 18.41849,-66.033714 18.418411,-66.033707 18.41829,-66.033737 18.418178,-66.034528 18.416081,-66.034542 18.416002,-66.034505 18.415954,-66.033318 18.415533,-66.031726 18.414947,-66.031691 18.414897,-66.031775 18.414645,-66.032604 18.412571,-66.032588 18.412481,-66.032503 18.412425,-66.030183 18.41158,-66.029759 18.411365,-66.029698 18.411246,-66.029832 18.410916,-66.030008 18.410616,-66.030181 18.410366,-66.030274 18.410288,-66.03042 18.410244,-66.030644 18.410223,-66.030841 18.410209,-66.030956 18.410166,-66.031025 18.410094,-66.031076 18.410013,-66.031146 18.409955,-66.031247 18.409956,-66.031488 18.410029,-66.031868 18.410086,-66.032246 18.410051,-66.032688 18.409828,-66.032911 18.409485,-66.033056 18.409001,-66.033056 18.408258,-66.032862 18.407802,-66.032549 18.407426,-66.031918 18.406947,-66.031536 18.406665,-66.031309 18.406325,-66.031159 18.4059,-66.031133 18.405168,-66.031095 18.403204,-66.031095 18.402412,-66.03111 18.402184,-66.031145 18.401936,-66.031274 18.401073,-66.031473 18.399724,-66.031621 18.398764,-66.031667 18.39834,-66.031674 18.397847,-66.031701 18.397789,-66.031723 18.39776,-66.031806 18.39775,-66.033742 18.397947,-66.034869 18.398063,-66.036561 18.398235,-66.038244 18.398408,-66.040172 18.398616,-66.040338 18.398595,-66.040674 18.398426,-66.040993 18.398358,-66.041332 18.398343,-66.041971 18.398354,-66.043201 18.398404,-66.043353 18.398422,-66.043512 18.398384,-66.043528 18.398256,-66.043514 18.398034,-66.043418 18.39743,-66.043095 18.396344,-66.043061 18.3962,-66.043143 18.395909,-66.043317 18.395602,-66.043586 18.395371,-66.043838 18.395232,-66.044238 18.395198,-66.045033 18.395253,-66.046079 18.395255,-66.046888 18.395278,-66.047686 18.395401,-66.048487 18.395479,-66.049637 18.395543,-66.051332 18.395684,-66.051819 18.395822,-66.052213 18.39601,-66.052823 18.396418,-66.053314 18.396742,-66.053854 18.39692,-66.054246 18.396913,-66.054688 18.39677,-66.054981 18.39652,-66.055109 18.396262,-66.055151 18.395976,-66.055193 18.395706,-66.055331 18.395221,-66.055509 18.395035,-66.0566 18.394286,-66.057528 18.393742,-66.058129 18.393415,-66.059311 18.392778,-66.060422 18.392177,-66.061148 18.391771,-66.061559 18.391618,-66.061979 18.3915,-66.062781 18.391407,-66.063837 18.391314,-66.064416 18.391294,-66.064706 18.391176,-66.064784 18.391009,-66.064784 18.390911,-66.064597 18.390734,-66.064308 18.390587,-66.064204 18.390553,-66.064126 18.390415,-66.064027 18.390386,-66.063873 18.390386)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'D15','CUPEY', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'D15' and direction = 'SAGRADO_CORAZON'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1609, 0, 'D15', 'SAGRADO_CORAZON'),(213, 1, 'D15', 'SAGRADO_CORAZON'),(214, 2, 'D15', 'SAGRADO_CORAZON'),(771, 3, 'D15', 'SAGRADO_CORAZON'),(563, 4, 'D15', 'SAGRADO_CORAZON'),(564, 5, 'D15', 'SAGRADO_CORAZON'),(565, 6, 'D15', 'SAGRADO_CORAZON'),(566, 7, 'D15', 'SAGRADO_CORAZON'),(567, 8, 'D15', 'SAGRADO_CORAZON'),(568, 9, 'D15', 'SAGRADO_CORAZON'),(569, 10, 'D15', 'SAGRADO_CORAZON'),(570, 11, 'D15', 'SAGRADO_CORAZON'),(598, 12, 'D15', 'SAGRADO_CORAZON'),(572, 13, 'D15', 'SAGRADO_CORAZON'),(573, 14, 'D15', 'SAGRADO_CORAZON'),(574, 15, 'D15', 'SAGRADO_CORAZON'),(575, 16, 'D15', 'SAGRADO_CORAZON'),(576, 17, 'D15', 'SAGRADO_CORAZON'),(577, 18, 'D15', 'SAGRADO_CORAZON'),(578, 19, 'D15', 'SAGRADO_CORAZON'),(579, 20, 'D15', 'SAGRADO_CORAZON'),(462, 21, 'D15', 'SAGRADO_CORAZON'),(463, 22, 'D15', 'SAGRADO_CORAZON'),(464, 23, 'D15', 'SAGRADO_CORAZON'),(465, 24, 'D15', 'SAGRADO_CORAZON'),(580, 25, 'D15', 'SAGRADO_CORAZON'),(581, 26, 'D15', 'SAGRADO_CORAZON'),(582, 27, 'D15', 'SAGRADO_CORAZON'),(583, 28, 'D15', 'SAGRADO_CORAZON'),(56, 29, 'D15', 'SAGRADO_CORAZON'),(57, 30, 'D15', 'SAGRADO_CORAZON'),(33, 31, 'D15', 'SAGRADO_CORAZON'),(34, 32, 'D15', 'SAGRADO_CORAZON'),(35, 33, 'D15', 'SAGRADO_CORAZON'),(36, 34, 'D15', 'SAGRADO_CORAZON');
delete from ref.subroute_stop where route = 'D15' and direction = 'CUPEY'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (53, 0, 'D15', 'CUPEY'),(54, 1, 'D15', 'CUPEY'),(55, 2, 'D15', 'CUPEY'),(585, 3, 'D15', 'CUPEY'),(586, 4, 'D15', 'CUPEY'),(587, 5, 'D15', 'CUPEY'),(588, 6, 'D15', 'CUPEY'),(500, 7, 'D15', 'CUPEY'),(501, 8, 'D15', 'CUPEY'),(502, 9, 'D15', 'CUPEY'),(503, 10, 'D15', 'CUPEY'),(589, 11, 'D15', 'CUPEY'),(590, 12, 'D15', 'CUPEY'),(591, 13, 'D15', 'CUPEY'),(592, 14, 'D15', 'CUPEY'),(593, 15, 'D15', 'CUPEY'),(594, 16, 'D15', 'CUPEY'),(595, 17, 'D15', 'CUPEY'),(596, 18, 'D15', 'CUPEY'),(599, 19, 'D15', 'CUPEY'),(601, 20, 'D15', 'CUPEY'),(602, 21, 'D15', 'CUPEY'),(603, 22, 'D15', 'CUPEY'),(604, 23, 'D15', 'CUPEY'),(605, 24, 'D15', 'CUPEY'),(606, 25, 'D15', 'CUPEY'),(607, 26, 'D15', 'CUPEY'),(411, 27, 'D15', 'CUPEY'),(165, 28, 'D15', 'CUPEY'),(166, 29, 'D15', 'CUPEY'),(1609, 30, 'D15', 'CUPEY');
