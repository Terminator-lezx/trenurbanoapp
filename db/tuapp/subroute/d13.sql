delete from ref.subroute_new where route = 'D13' and direction = 'LA_CUMBRE'; with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.06254 18.389662,-66.062497 18.389729,-66.062299 18.389992,-66.062295 18.390062,-66.062367 18.390117,-66.062489 18.390201,-66.062543 18.390288,-66.062541 18.390381,-66.062457 18.390502,-66.062058 18.390849,-66.061966 18.390963,-66.061954 18.391065,-66.062048 18.391048,-66.062323 18.390804,-66.062691 18.390457,-66.063075 18.390032,-66.063255 18.389816,-66.063293 18.389675,-66.063237 18.389501,-66.063063 18.389336,-66.062737 18.389137,-66.062433 18.388958,-66.062321 18.38888,-66.062028 18.38868,-66.061771 18.388481,-66.061564 18.388237,-66.061481 18.388094,-66.061396 18.387885,-66.061356 18.387461,-66.061396 18.385618,-66.061334 18.385272,-66.061164 18.384879,-66.060854 18.384493,-66.060571 18.384297,-66.060186 18.384129,-66.059694 18.384003,-66.05866 18.383808,-66.058179 18.383708,-66.057809 18.383558,-66.057481 18.383395,-66.057111 18.383124,-66.056853 18.382898,-66.056506 18.382407,-66.056285 18.381916,-66.056178 18.381407,-66.056039 18.380723,-66.055867 18.380141,-66.055717 18.379792,-66.055392 18.379274,-66.055297 18.379106,-66.055165 18.378821,-66.055041 18.378404,-66.054873 18.377376,-66.054785 18.377068,-66.054485 18.376196,-66.054029 18.375248,-66.053924 18.374993,-66.052917 18.372698,-66.052297 18.371279,-66.051974 18.370289,-66.05185 18.369261,-66.051898 18.369155,-66.052022 18.369121,-66.053928 18.369398,-66.056355 18.369834,-66.056607 18.369974,-66.057178 18.370316,-66.057698 18.370433,-66.05839 18.37049,-66.059141 18.370578,-66.060165 18.370752,-66.061392 18.37098,-66.066553 18.371936,-66.067248 18.372012,-66.068232 18.371875,-66.069631 18.371154,-66.070934 18.370373,-66.071989 18.369849,-66.073309 18.36931,-66.075091 18.368483,-66.077074 18.36755,-66.078273 18.367284,-66.079529 18.367049,-66.080328 18.367019,-66.080868 18.36719,-66.081642 18.367609,-66.081967 18.36778,-66.082094 18.367721,-66.082241 18.367525,-66.082383 18.367246,-66.082405 18.367069,-66.082369 18.366943,-66.082267 18.366723,-66.082244 18.366584,-66.082261 18.366425,-66.082329 18.366238,-66.082637 18.365929,-66.084011 18.364497,-66.08426 18.364239,-66.084689 18.363692,-66.085628 18.36235,-66.086329 18.361009,-66.086877 18.359996,-66.087047 18.359835,-66.087256 18.359626,-66.087759 18.359261,-66.088093 18.359191,-66.088455 18.359255,-66.088615 18.359242,-66.088681 18.359181)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'D13','LA_CUMBRE', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'D13' and direction = 'CUPEY'; with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.088681 18.359181,-66.088641 18.359113,-66.088429 18.35901,-66.087445 18.358517,-66.08635 18.357918,-66.084947 18.357132,-66.083748 18.356506,-66.082824 18.356085,-66.082205 18.355846,-66.081621 18.355759,-66.080989 18.355808,-66.080338 18.356014,-66.079523 18.356406,-66.078828 18.357012,-66.078331 18.357511,-66.077754 18.357935,-66.077217 18.358059,-66.076538 18.358069,-66.076171 18.358075,-66.075928 18.35815,-66.075877 18.35837,-66.075589 18.359427,-66.075278 18.360328,-66.074854 18.360929,-66.074373 18.361595,-66.073545 18.36299,-66.073567 18.363124,-66.073737 18.36322,-66.074257 18.363666,-66.075105 18.364991,-66.075948 18.366209,-66.076287 18.366724,-66.076434 18.366934,-66.076438 18.367085,-66.076328 18.367178,-66.076162 18.367275,-66.075984 18.367423,-66.075928 18.367565,-66.075966 18.367702,-66.076008 18.367795,-66.075904 18.367916,-66.075728 18.368005,-66.073366 18.369141,-66.072349 18.36957,-66.071399 18.369946,-66.070754 18.370295,-66.069528 18.37104,-66.0686 18.371555,-66.068137 18.371722,-66.067351 18.371899,-66.066763 18.371883,-66.066435 18.371829,-66.059233 18.370488,-66.058831 18.37045,-66.05839 18.370391,-66.057616 18.370225,-66.057169 18.370134,-66.056367 18.369753,-66.053008 18.369152,-66.051968 18.369002,-66.051848 18.369042,-66.051718 18.369183,-66.05172 18.369359,-66.05176 18.369619,-66.051846 18.370314,-66.052122 18.371183,-66.052505 18.372052,-66.053409 18.374101,-66.053864 18.375113,-66.054384 18.376263,-66.054628 18.376912,-66.054732 18.377435,-66.054864 18.378323,-66.055028 18.378964,-66.05518 18.379256,-66.055671 18.379977,-66.055875 18.380428,-66.056007 18.380929,-66.056131 18.381532,-66.056243 18.382003,-66.056551 18.38261,-66.056891 18.383027,-66.05747 18.383456,-66.058154 18.38377,-66.059029 18.383949,-66.060109 18.384161,-66.060532 18.384357,-66.0608 18.384571,-66.061116 18.384918,-66.061256 18.385294,-66.061336 18.385639,-66.061324 18.386179,-66.06131 18.386862,-66.061306 18.387647,-66.061354 18.38794,-66.06147 18.388205,-66.061702 18.388516,-66.062003 18.388759,-66.062369 18.388992,-66.062795 18.389273,-66.062759 18.389408,-66.062585 18.389628)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'D13','CUPEY', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
