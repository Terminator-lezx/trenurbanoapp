delete from ref.subroute_new where route = 'T5' and direction = 'ITURREGUI';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.110477 18.464836,-66.110514 18.464963,-66.110545 18.464994,-66.11061 18.465005,-66.110747 18.465003,-66.111069 18.464937,-66.11118 18.464867,-66.111053 18.464131,-66.110984 18.464037,-66.110777 18.463971,-66.109962 18.463965,-66.109454 18.463945,-66.107031 18.463815,-66.106911 18.463839,-66.106709 18.464108,-66.106142 18.465008,-66.106003 18.465082,-66.105767 18.465201,-66.105594 18.465162,-66.105144 18.465033,-66.104665 18.464903,-66.104528 18.464865,-66.103774 18.464668,-66.103051 18.464475,-66.1024 18.464275,-66.102165 18.464239,-66.100505 18.464126,-66.099514 18.464055,-66.098986 18.464031,-66.097965 18.463974,-66.096796 18.463888,-66.09573 18.463811,-66.094492 18.463719,-66.093917 18.463717,-66.092528 18.463171,-66.091048 18.462591,-66.090212 18.462262,-66.089539 18.462006,-66.089022 18.461819,-66.088716 18.461794,-66.088457 18.461814,-66.088417 18.461813,-66.088374 18.461824,-66.087984 18.461886,-66.087873 18.461878,-66.087709 18.461819,-66.087703 18.461812,-66.087693 18.4618,-66.087677 18.461779,-66.087505 18.461538,-66.087393 18.461232,-66.087367 18.46116,-66.087332 18.460314,-66.087325 18.459977,-66.086805 18.458008,-66.086587 18.457646,-66.086232 18.457338,-66.085873 18.457059,-66.08473 18.456479,-66.083554 18.455933,-66.081187 18.454855,-66.080624 18.454594,-66.079698 18.453987,-66.078437 18.453158,-66.076465 18.452076,-66.074524 18.450821,-66.071716 18.448667,-66.069211 18.446743,-66.068433 18.446165,-66.068308 18.446128,-66.068222 18.446182,-66.068036 18.44647,-66.065975 18.449736,-66.065667 18.450152,-66.063915 18.451991,-66.063822 18.452031,-66.063695 18.452045,-66.062901 18.451945,-66.060596 18.451635,-66.058522 18.451363,-66.057319 18.451209,-66.056314 18.451111,-66.055571 18.451046,-66.054587 18.450897,-66.05357 18.450614,-66.05269 18.450257,-66.052332 18.450097,-66.051947 18.450007,-66.051586 18.44995,-66.050883 18.449855,-66.047437 18.449383,-66.045047 18.449131,-66.044786 18.449124,-66.044594 18.449154,-66.044437 18.44921,-66.043657 18.449633,-66.043055 18.449949,-66.042066 18.450498,-66.041511 18.450864,-66.041236 18.451046,-66.040669 18.451283,-66.039889 18.451579,-66.039668 18.451648,-66.039486 18.451668,-66.039374 18.451656,-66.039257 18.451615,-66.039137 18.451488,-66.03816 18.450022,-66.037576 18.4492,-66.03704 18.448777,-66.033886 18.446384,-66.032708 18.44551,-66.032363 18.445294,-66.031255 18.444841,-66.02987 18.444409,-66.027819 18.443834,-66.026284 18.443377,-66.024078 18.442851,-66.022942 18.442548,-66.022035 18.442365,-66.021455 18.442284,-66.020668 18.442267,-66.0199 18.442296,-66.019065 18.44234,-66.018373 18.442333,-66.017841 18.442337,-66.017532 18.442296,-66.016044 18.442003,-66.014821 18.441769,-66.014553 18.441666,-66.014466 18.441576,-66.014449 18.441465,-66.014475 18.441338,-66.014574 18.441212,-66.014783 18.441114,-66.016098 18.440859,-66.017088 18.440534,-66.022066 18.438346,-66.022689 18.438097,-66.022694 18.438095,-66.022694 18.438095,-66.022992 18.438523,-66.023191 18.438679,-66.02339 18.438716,-66.023598 18.438675,-66.023736 18.438552,-66.023805 18.438432,-66.023823 18.438256,-66.023758 18.438071,-66.023667 18.437969,-66.023507 18.437886,-66.023256 18.43787,-66.022702 18.438091,-66.022694 18.438095,-66.021643 18.436586,-66.020692 18.435357,-66.020399 18.434752,-66.020328 18.434565,-66.020305 18.434451,-66.020342 18.434315,-66.020489 18.434155,-66.020656 18.434089,-66.020846 18.434096,-66.021004 18.434162,-66.021156 18.434373,-66.021169 18.434556,-66.021109 18.43471,-66.020925 18.434926,-66.020512 18.435172,-66.020125 18.435343,-66.01965 18.435492,-66.019007 18.4356,-66.018485 18.435632,-66.018047 18.435637,-66.017171 18.435673,-66.016855 18.435716,-66.016537 18.435854,-66.016166 18.436037,-66.015915 18.436116,-66.015589 18.436175,-66.012301 18.436385,-66.011996 18.436424,-66.010801 18.436606,-66.0102 18.436671,-66.009624 18.436709,-66.009123 18.436721,-66.008651 18.43668,-66.008216 18.436632,-66.007643 18.436531,-66.007045 18.436419,-66.005775 18.436356,-66.005267 18.436326,-66.004771 18.436345,-66.004586 18.436427,-66.004471 18.436602,-66.004486 18.437792,-66.004535 18.437996,-66.004669 18.438249,-66.005245 18.438903,-66.005385 18.439023,-66.005524 18.439029,-66.007496 18.43824,-66.008867 18.437655,-66.009691 18.437273,-66.010952 18.436856,-66.011704 18.436637,-66.012162 18.436537,-66.013196 18.436456,-66.015284 18.436325,-66.015737 18.436272,-66.016098 18.436208,-66.016461 18.436028,-66.016827 18.435833,-66.017244 18.435743,-66.017517 18.435727,-66.018843 18.435687,-66.019396 18.435625,-66.019947 18.435521,-66.020525 18.43529,-66.020943 18.435071,-66.021081 18.434982,-66.021223 18.434916,-66.021363 18.434893,-66.021525 18.434938,-66.02161 18.434984,-66.021695 18.435072,-66.021775 18.435213,-66.021787 18.435403,-66.021719 18.435555,-66.021591 18.435679,-66.021439 18.435732,-66.021263 18.435739,-66.021148 18.435707,-66.020998 18.435587,-66.020799 18.435391,-66.020539 18.434997,-66.019835 18.434026,-66.019328 18.433348,-66.018391 18.432525,-66.018169 18.432424,-66.017673 18.43224,-66.016903 18.432051,-66.016163 18.431916,-66.015474 18.431858,-66.015401 18.431821,-66.015358 18.431723,-66.015127 18.430813,-66.014751 18.42905,-66.014666 18.428989,-66.014573 18.428979,-66.014431 18.428996,-66.013664 18.429172,-66.012356 18.429445,-66.011934 18.429537,-66.011709 18.429535,-66.008548 18.42937,-66.008256 18.429363,-66.007624 18.429293,-66.006839 18.429213,-66.003775 18.428917,-66.003706 18.428937,-66.003676 18.428995,-66.003401 18.431465,-66.003379 18.431547,-66.003349 18.431584,-66.003284 18.431596,-66.003037 18.4316,-66.001979 18.431595,-66.001395 18.431567,-66.0011 18.43153,-65.999917 18.431353,-65.99961 18.431337,-65.999488 18.431332,-65.999363 18.431312,-65.999202 18.431283,-65.998795 18.431194,-65.99825 18.431057,-65.994675 18.429993,-65.993155 18.429557,-65.991898 18.429161,-65.991702 18.429037,-65.991563 18.428958,-65.991398 18.428829,-65.991223 18.428658,-65.99104 18.42843,-65.990865 18.428194,-65.990697 18.427985,-65.990617 18.427918,-65.990474 18.427849,-65.990318 18.427808,-65.990223 18.427718,-65.990111 18.42755,-65.989733 18.426848,-65.989346 18.425311,-65.989109 18.423976,-65.988973 18.42321,-65.988851 18.422682,-65.988718 18.422203,-65.98871 18.422162,-65.988711 18.422118,-65.988763 18.422071,-65.988867 18.42205,-65.991318 18.421496,-65.991447 18.421516,-65.991499 18.421623,-65.991538 18.421824,-65.991568 18.421931,-65.991685 18.421968,-65.992083 18.42187)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T5','ITURREGUI', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T5' and direction = 'SAN_JUAN';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.992127 18.421855,-65.992421 18.421788,-65.992494 18.421726,-65.992525 18.421669,-65.992503 18.421517,-65.992451 18.421287,-65.992408 18.421213,-65.992309 18.421192,-65.992066 18.421229,-65.988759 18.422033,-65.98871 18.422054,-65.988674 18.422092,-65.988667 18.422156,-65.98874 18.422402,-65.988815 18.42268,-65.988894 18.422993,-65.988945 18.423238,-65.989079 18.423991,-65.989369 18.425596,-65.989655 18.426794,-65.989979 18.427402,-65.990172 18.427733,-65.990233 18.427806,-65.990315 18.427852,-65.990455 18.427884,-65.990583 18.427938,-65.990665 18.428003,-65.990727 18.428082,-65.990825 18.428202,-65.991194 18.428677,-65.99142 18.428887,-65.991597 18.429012,-65.991873 18.429172,-65.992778 18.42947,-65.993726 18.429743,-65.995745 18.43035,-65.998254 18.431086,-65.998791 18.431222,-65.999195 18.431313,-65.999415 18.431343,-65.999545 18.43136,-65.999914 18.431376,-66.000417 18.431464,-66.000894 18.431536,-66.001421 18.431593,-66.001983 18.431618,-66.003028 18.431631,-66.003355 18.431623,-66.003415 18.431598,-66.003445 18.431496,-66.003715 18.429071,-66.003736 18.429001,-66.003805 18.428969,-66.005826 18.429158,-66.008257 18.429397,-66.008956 18.42943,-66.011738 18.429583,-66.011928 18.429581,-66.012505 18.42946,-66.01443 18.429046,-66.014571 18.429019,-66.014657 18.429046,-66.014713 18.429107,-66.015085 18.430891,-66.015076 18.430977,-66.014994 18.431022,-66.014189 18.431195,-66.01412 18.431186,-66.014077 18.431129,-66.013617 18.429126,-66.013244 18.427474,-66.013205 18.427408,-66.013101 18.427346,-66.01282 18.427338,-66.011828 18.427354,-66.01165 18.427326,-66.011468 18.427289,-66.011157 18.427165,-66.010906 18.427112,-66.010006 18.427112,-66.00827 18.427112,-66.008093 18.427125,-66.007997 18.427186,-66.007959 18.427334,-66.008035 18.430569,-66.008169 18.431029,-66.008451 18.431448,-66.008841 18.431718,-66.0095 18.431881,-66.015178 18.432203,-66.017081 18.432442,-66.017971 18.432759,-66.0185 18.433057,-66.018864 18.43336,-66.018991 18.43353,-66.019071 18.433761,-66.019029 18.433987,-66.018775 18.434285,-66.018445 18.434575,-66.016814 18.43562,-66.016423 18.435843,-66.016119 18.436016,-66.015907 18.436088,-66.015593 18.436147,-66.015163 18.436173,-66.012293 18.436359,-66.011985 18.436393,-66.010799 18.436585,-66.010198 18.43665,-66.009619 18.436688,-66.00912 18.436696,-66.008651 18.436656,-66.008215 18.436609,-66.007644 18.436505,-66.007041 18.436389,-66.005782 18.436328,-66.005271 18.436303,-66.004747 18.436324,-66.004553 18.436405,-66.004447 18.436594,-66.004463 18.437793,-66.004512 18.438006,-66.004648 18.43827,-66.005227 18.438925,-66.005373 18.439043,-66.005531 18.439051,-66.007509 18.43826,-66.008884 18.43767,-66.009701 18.437296,-66.010968 18.436879,-66.011712 18.436656,-66.012167 18.436558,-66.013199 18.436484,-66.015285 18.436354,-66.016106 18.436231,-66.016838 18.435857,-66.017189 18.435837,-66.017484 18.435888,-66.01932 18.436629,-66.019543 18.436635,-66.019851 18.436522,-66.020353 18.436218,-66.020555 18.436125,-66.020732 18.43613,-66.020868 18.4362,-66.021088 18.436405,-66.021446 18.436952,-66.021926 18.43782,-66.02193 18.437967,-66.0219 18.438058,-66.021835 18.438148,-66.021731 18.438238,-66.01781 18.440027,-66.01627 18.440678,-66.015679 18.440807,-66.01519 18.440876,-66.014715 18.441001,-66.013863 18.441444,-66.013545 18.441672,-66.013519 18.441763,-66.013541 18.441824,-66.01361 18.441894,-66.013723 18.441939,-66.013995 18.44196,-66.014326 18.441902,-66.015984 18.442084,-66.017689 18.442403,-66.019084 18.442398,-66.019913 18.44235,-66.020502 18.442323,-66.021514 18.442351,-66.022197 18.442459,-66.023255 18.442715,-66.026572 18.443552,-66.029472 18.444353,-66.031575 18.445035,-66.032026 18.445207,-66.032436 18.445429,-66.037316 18.449072,-66.037621 18.449354,-66.037926 18.449744,-66.039089 18.451517,-66.039171 18.451615,-66.039249 18.451679,-66.03941 18.451721,-66.039553 18.451712,-66.039895 18.451631,-66.041295 18.451075,-66.041812 18.450701,-66.042184 18.450488,-66.043094 18.449987,-66.044371 18.449307,-66.04463 18.449202,-66.044798 18.44917,-66.045038 18.449174,-66.048787 18.449626,-66.051563 18.449988,-66.051975 18.450042,-66.052309 18.450125,-66.05269 18.450287,-66.053579 18.450644,-66.054586 18.450928,-66.055566 18.451077,-66.056299 18.451143,-66.057304 18.451246,-66.058184 18.451345,-66.059046 18.45148,-66.060576 18.451673,-66.063748 18.452098,-66.063907 18.452067,-66.064007 18.451992,-66.065953 18.44998,-66.066262 18.449466,-66.068243 18.446271,-66.068312 18.446213,-66.068381 18.446213,-66.068472 18.446271,-66.071198 18.448333,-66.0726 18.449425,-66.073777 18.450332,-66.075559 18.451574,-66.077401 18.452687,-66.078601 18.453334,-66.079851 18.454144,-66.080581 18.454619,-66.08161 18.455089,-66.084919 18.456621,-66.085518 18.456941,-66.085708 18.457093,-66.085864 18.457245,-66.085954 18.457444,-66.086075 18.457826,-66.086298 18.458822,-66.086488 18.460054,-66.086561 18.460313,-66.086588 18.460391,-66.086748 18.460845,-66.087108 18.461148,-66.087737 18.461361,-66.088383 18.461805,-66.088411 18.461841,-66.088458 18.461839,-66.088779 18.461828,-66.089048 18.461858,-66.090177 18.462282,-66.09131 18.462727,-66.092974 18.463382,-66.093571 18.46364,-66.093836 18.463751,-66.094063 18.463757,-66.094513 18.463756,-66.095627 18.46383,-66.097224 18.463952,-66.098436 18.464029,-66.099656 18.464088,-66.100507 18.464153,-66.100971 18.464187,-66.102261 18.464292,-66.102952 18.464498,-66.103685 18.464676,-66.104492 18.464882,-66.10567 18.465211,-66.105743 18.465223,-66.105991 18.465263,-66.106201 18.465283,-66.106372 18.465254,-66.106527 18.465234,-66.106749 18.465251,-66.107094 18.465308,-66.107674 18.465238,-66.107742 18.465151,-66.107811 18.463942,-66.107855 18.463895,-66.107932 18.463891,-66.108582 18.463938,-66.11009 18.464017,-66.110462 18.464036,-66.11052 18.464082,-66.110497 18.464255,-66.110459 18.464309,-66.110399 18.464362,-66.110384 18.464423,-66.110469 18.46481)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T5','SAN_JUAN', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'T5' and direction = 'SAN_JUAN'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1610, 0, 'T5', 'SAN_JUAN'),(220, 1, 'T5', 'SAN_JUAN'),(221, 2, 'T5', 'SAN_JUAN'),(222, 3, 'T5', 'SAN_JUAN'),(223, 4, 'T5', 'SAN_JUAN'),(224, 5, 'T5', 'SAN_JUAN'),(225, 6, 'T5', 'SAN_JUAN'),(226, 7, 'T5', 'SAN_JUAN'),(227, 8, 'T5', 'SAN_JUAN'),(228, 9, 'T5', 'SAN_JUAN'),(229, 10, 'T5', 'SAN_JUAN'),(230, 11, 'T5', 'SAN_JUAN'),(231, 12, 'T5', 'SAN_JUAN'),(232, 13, 'T5', 'SAN_JUAN'),(233, 14, 'T5', 'SAN_JUAN'),(234, 15, 'T5', 'SAN_JUAN'),(235, 16, 'T5', 'SAN_JUAN'),(1031, 17, 'T5', 'SAN_JUAN'),(1032, 18, 'T5', 'SAN_JUAN'),(1033, 19, 'T5', 'SAN_JUAN'),(236, 20, 'T5', 'SAN_JUAN'),(237, 21, 'T5', 'SAN_JUAN'),(238, 22, 'T5', 'SAN_JUAN'),(239, 23, 'T5', 'SAN_JUAN'),(240, 24, 'T5', 'SAN_JUAN'),(241, 25, 'T5', 'SAN_JUAN'),(242, 26, 'T5', 'SAN_JUAN'),(243, 27, 'T5', 'SAN_JUAN'),(244, 28, 'T5', 'SAN_JUAN'),(245, 29, 'T5', 'SAN_JUAN'),(246, 30, 'T5', 'SAN_JUAN'),(247, 31, 'T5', 'SAN_JUAN'),(248, 32, 'T5', 'SAN_JUAN'),(249, 33, 'T5', 'SAN_JUAN'),(250, 34, 'T5', 'SAN_JUAN'),(251, 35, 'T5', 'SAN_JUAN'),(252, 36, 'T5', 'SAN_JUAN'),(253, 37, 'T5', 'SAN_JUAN'),(254, 38, 'T5', 'SAN_JUAN'),(255, 39, 'T5', 'SAN_JUAN'),(256, 40, 'T5', 'SAN_JUAN'),(257, 41, 'T5', 'SAN_JUAN'),(258, 42, 'T5', 'SAN_JUAN'),(259, 43, 'T5', 'SAN_JUAN'),(260, 44, 'T5', 'SAN_JUAN'),(261, 45, 'T5', 'SAN_JUAN'),(262, 46, 'T5', 'SAN_JUAN'),(263, 47, 'T5', 'SAN_JUAN'),(264, 48, 'T5', 'SAN_JUAN'),(265, 49, 'T5', 'SAN_JUAN'),(266, 50, 'T5', 'SAN_JUAN'),(267, 51, 'T5', 'SAN_JUAN'),(268, 52, 'T5', 'SAN_JUAN'),(269, 53, 'T5', 'SAN_JUAN'),(270, 54, 'T5', 'SAN_JUAN'),(271, 55, 'T5', 'SAN_JUAN'),(272, 56, 'T5', 'SAN_JUAN'),(274, 57, 'T5', 'SAN_JUAN'),(276, 58, 'T5', 'SAN_JUAN'),(277, 59, 'T5', 'SAN_JUAN'),(278, 60, 'T5', 'SAN_JUAN'),(1597, 61, 'T5', 'SAN_JUAN');
delete from ref.subroute_stop where route = 'T5' and direction = 'ITURREGUI'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1597, 0, 'T5', 'ITURREGUI'),(279, 1, 'T5', 'ITURREGUI'),(281, 2, 'T5', 'ITURREGUI'),(282, 3, 'T5', 'ITURREGUI'),(283, 4, 'T5', 'ITURREGUI'),(284, 5, 'T5', 'ITURREGUI'),(285, 6, 'T5', 'ITURREGUI'),(286, 7, 'T5', 'ITURREGUI'),(287, 8, 'T5', 'ITURREGUI'),(288, 9, 'T5', 'ITURREGUI'),(289, 10, 'T5', 'ITURREGUI'),(290, 11, 'T5', 'ITURREGUI'),(291, 12, 'T5', 'ITURREGUI'),(44, 13, 'T5', 'ITURREGUI'),(45, 14, 'T5', 'ITURREGUI'),(46, 15, 'T5', 'ITURREGUI'),(47, 16, 'T5', 'ITURREGUI'),(292, 17, 'T5', 'ITURREGUI'),(293, 18, 'T5', 'ITURREGUI'),(294, 19, 'T5', 'ITURREGUI'),(295, 20, 'T5', 'ITURREGUI'),(296, 21, 'T5', 'ITURREGUI'),(297, 22, 'T5', 'ITURREGUI'),(298, 23, 'T5', 'ITURREGUI'),(299, 24, 'T5', 'ITURREGUI'),(300, 25, 'T5', 'ITURREGUI'),(301, 26, 'T5', 'ITURREGUI'),(302, 27, 'T5', 'ITURREGUI'),(303, 28, 'T5', 'ITURREGUI'),(304, 29, 'T5', 'ITURREGUI'),(305, 30, 'T5', 'ITURREGUI'),(306, 31, 'T5', 'ITURREGUI'),(307, 32, 'T5', 'ITURREGUI'),(308, 33, 'T5', 'ITURREGUI'),(309, 34, 'T5', 'ITURREGUI'),(310, 35, 'T5', 'ITURREGUI'),(311, 36, 'T5', 'ITURREGUI'),(312, 37, 'T5', 'ITURREGUI'),(313, 38, 'T5', 'ITURREGUI'),(314, 39, 'T5', 'ITURREGUI'),(315, 40, 'T5', 'ITURREGUI'),(316, 41, 'T5', 'ITURREGUI'),(1031, 42, 'T5', 'ITURREGUI'),(1032, 43, 'T5', 'ITURREGUI'),(1033, 44, 'T5', 'ITURREGUI'),(317, 45, 'T5', 'ITURREGUI'),(319, 46, 'T5', 'ITURREGUI'),(320, 47, 'T5', 'ITURREGUI'),(321, 48, 'T5', 'ITURREGUI'),(322, 49, 'T5', 'ITURREGUI'),(323, 50, 'T5', 'ITURREGUI'),(324, 51, 'T5', 'ITURREGUI'),(325, 52, 'T5', 'ITURREGUI'),(326, 53, 'T5', 'ITURREGUI'),(327, 54, 'T5', 'ITURREGUI'),(328, 55, 'T5', 'ITURREGUI'),(329, 56, 'T5', 'ITURREGUI'),(330, 57, 'T5', 'ITURREGUI'),(1610, 58, 'T5', 'ITURREGUI');
