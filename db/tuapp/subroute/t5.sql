delete from ref.subroute_new where route = 'T5' and direction = 'SAN_JUAN'; with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-65.992083 18.42187,-65.992421 18.421788,-65.992494 18.421726,-65.992525 18.421669,-65.992503 18.421517,-65.992451 18.421287,-65.992408 18.421213,-65.992309 18.421192,-65.992066 18.421229,-65.988756 18.422024,-65.988661 18.422077,-65.988652 18.422143,-65.988734 18.422402,-65.988907 18.423168,-65.989369 18.425596,-65.989655 18.426794,-65.989979 18.427402,-65.990172 18.427733,-65.990233 18.427806,-65.990315 18.427852,-65.990436 18.427897,-65.990647 18.428003,-65.990825 18.428229,-65.991194 18.428677,-65.991415 18.428891,-65.991583 18.429018,-65.991831 18.429166,-65.995745 18.43035,-65.999349 18.431359,-65.999548 18.43138,-65.999936 18.431408,-66.000427 18.431474,-66.001385 18.431626,-66.003028 18.431631,-66.003355 18.431623,-66.003415 18.431598,-66.003445 18.431496,-66.003715 18.429071,-66.003736 18.429001,-66.003805 18.428969,-66.005826 18.429158,-66.007952 18.429372,-66.00799 18.429375,-66.008007 18.429376,-66.008007 18.429368,-66.008006 18.42932,-66.007959 18.427334,-66.007997 18.427186,-66.008093 18.427125,-66.00827 18.427112,-66.010006 18.427112,-66.010906 18.427112,-66.011157 18.427165,-66.011468 18.427289,-66.01165 18.427326,-66.011828 18.427354,-66.01282 18.427338,-66.013101 18.427346,-66.013205 18.427408,-66.013244 18.427474,-66.01363 18.429167,-66.013639 18.429205,-66.01364 18.429215,-66.013643 18.429232,-66.014077 18.431129,-66.01412 18.431186,-66.014189 18.431195,-66.014994 18.431022,-66.015076 18.430977,-66.015085 18.430891,-66.014713 18.429107,-66.014657 18.429046,-66.01443 18.429046,-66.013649 18.429213,-66.01364 18.429215,-66.01363 18.429218,-66.012505 18.42946,-66.011738 18.429583,-66.008956 18.42943,-66.008023 18.429376,-66.008007 18.429376,-66.008007 18.42938,-66.008035 18.430569,-66.008169 18.431029,-66.008451 18.431448,-66.008841 18.431718,-66.0095 18.431881,-66.015178 18.432203,-66.017081 18.432442,-66.017971 18.432759,-66.0185 18.433057,-66.018864 18.43336,-66.018991 18.43353,-66.019071 18.433761,-66.019029 18.433987,-66.018775 18.434285,-66.018445 18.434575,-66.016814 18.43562,-66.016423 18.435843,-66.016119 18.436016,-66.015907 18.436088,-66.015593 18.436147,-66.015163 18.436173,-66.012293 18.436359,-66.011985 18.436393,-66.010799 18.436585,-66.010198 18.43665,-66.009619 18.436688,-66.00912 18.436696,-66.008651 18.436656,-66.008215 18.436609,-66.007644 18.436505,-66.007041 18.436389,-66.005782 18.436328,-66.005271 18.436303,-66.004747 18.436324,-66.004553 18.436405,-66.004447 18.436594,-66.004463 18.437793,-66.004512 18.438006,-66.004648 18.43827,-66.005227 18.438925,-66.005373 18.439043,-66.005531 18.439051,-66.007509 18.43826,-66.008884 18.43767,-66.009701 18.437296,-66.010968 18.436879,-66.011712 18.436656,-66.012167 18.436558,-66.013199 18.436484,-66.015285 18.436354,-66.016106 18.436231,-66.016838 18.435857,-66.017189 18.435837,-66.017484 18.435888,-66.01932 18.436629,-66.019543 18.436635,-66.019851 18.436522,-66.020353 18.436218,-66.020555 18.436125,-66.020732 18.43613,-66.020868 18.4362,-66.021088 18.436405,-66.021446 18.436952,-66.021926 18.43782,-66.02193 18.437967,-66.0219 18.438058,-66.021835 18.438148,-66.021731 18.438238,-66.01781 18.440027,-66.01627 18.440678,-66.015679 18.440807,-66.01519 18.440876,-66.014715 18.441001,-66.013863 18.441444,-66.013545 18.441672,-66.013519 18.441763,-66.013541 18.441824,-66.01361 18.441894,-66.013723 18.441939,-66.013995 18.44196,-66.014326 18.441902,-66.015984 18.442084,-66.017689 18.442403,-66.019913 18.44235,-66.021423 18.442325,-66.022197 18.442459,-66.026572 18.443552,-66.029472 18.444353,-66.031575 18.445035,-66.032026 18.445207,-66.032436 18.445429,-66.037316 18.449072,-66.037621 18.449354,-66.037894 18.44976,-66.039078 18.451517,-66.03926 18.451695,-66.039433 18.45174,-66.039876 18.451654,-66.041221 18.451119,-66.041848 18.450725,-66.044371 18.449307,-66.044833 18.449193,-66.04514 18.449176,-66.048787 18.449626,-66.051677 18.450012,-66.052088 18.450086,-66.052869 18.45037,-66.053662 18.45068,-66.054321 18.450856,-66.055302 18.451041,-66.05614 18.451136,-66.056225 18.451136,-66.060275 18.451617,-66.063743 18.452042,-66.06391 18.452033,-66.064053 18.451918,-66.065953 18.44998,-66.066262 18.449466,-66.068243 18.446271,-66.068312 18.446213,-66.068381 18.446213,-66.068472 18.446271,-66.071198 18.448333,-66.0726 18.449425,-66.073777 18.450332,-66.075559 18.451574,-66.077401 18.452687,-66.078601 18.453334,-66.079851 18.454144,-66.080581 18.454619,-66.08161 18.455089,-66.084919 18.456621,-66.085518 18.456941,-66.085708 18.457093,-66.085864 18.457245,-66.085954 18.457444,-66.086075 18.457826,-66.086298 18.458822,-66.086488 18.460054,-66.086561 18.460313,-66.086588 18.460391,-66.086748 18.460845,-66.087108 18.461148,-66.087737 18.461361,-66.088383 18.461805,-66.088411 18.461841,-66.088458 18.461839,-66.088779 18.461828,-66.089048 18.461858,-66.090177 18.462282,-66.09131 18.462727,-66.092974 18.463382,-66.093571 18.46364,-66.093836 18.463751,-66.094063 18.463757,-66.094513 18.463756,-66.095627 18.46383,-66.097224 18.463952,-66.098436 18.464029,-66.099656 18.464088,-66.100507 18.464153,-66.100971 18.464187,-66.102261 18.464292,-66.102952 18.464498,-66.103685 18.464676,-66.104492 18.464882,-66.10567 18.465211,-66.105743 18.465223,-66.105991 18.465263,-66.106201 18.465283,-66.106372 18.465254,-66.106527 18.465234,-66.106749 18.465251,-66.107094 18.465308,-66.107674 18.465238,-66.107742 18.465151,-66.107811 18.463942,-66.107855 18.463895,-66.107932 18.463891,-66.108582 18.463938,-66.11009 18.464017,-66.110462 18.464036,-66.11052 18.464082,-66.110497 18.464255,-66.110459 18.464309,-66.110399 18.464362,-66.110384 18.464423,-66.110469 18.46481)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T5','SAN_JUAN', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T5' and direction = 'ITURREGUI'; with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.110477 18.464836,-66.110514 18.464963,-66.110545 18.464994,-66.11061 18.465005,-66.110747 18.465003,-66.111069 18.464937,-66.11118 18.464867,-66.111053 18.464131,-66.110984 18.464037,-66.110777 18.463971,-66.109962 18.463965,-66.109454 18.463945,-66.107031 18.463815,-66.106911 18.463839,-66.106709 18.464108,-66.106142 18.465008,-66.106003 18.465082,-66.105767 18.465201,-66.105594 18.465162,-66.105144 18.465033,-66.104665 18.464903,-66.104528 18.464865,-66.103774 18.464668,-66.103051 18.464475,-66.1024 18.464275,-66.102165 18.464239,-66.100505 18.464126,-66.099514 18.464055,-66.098986 18.464031,-66.097965 18.463974,-66.096796 18.463888,-66.09573 18.463811,-66.094492 18.463719,-66.093917 18.463717,-66.092528 18.463171,-66.091048 18.462591,-66.090212 18.462262,-66.089539 18.462006,-66.089022 18.461819,-66.088716 18.461794,-66.088457 18.461814,-66.088417 18.461813,-66.088374 18.461824,-66.087984 18.461886,-66.087873 18.461878,-66.087709 18.461819,-66.087703 18.461812,-66.087693 18.4618,-66.087677 18.461779,-66.087505 18.461538,-66.087393 18.461232,-66.087367 18.46116,-66.087332 18.460314,-66.087325 18.459977,-66.086805 18.458008,-66.086587 18.457646,-66.086232 18.457338,-66.085873 18.457059,-66.08473 18.456479,-66.083554 18.455933,-66.081187 18.454855,-66.080624 18.454594,-66.079698 18.453987,-66.078437 18.453158,-66.076465 18.452076,-66.074524 18.450821,-66.071716 18.448667,-66.069211 18.446743,-66.068433 18.446165,-66.068308 18.446128,-66.068208 18.446173,-66.068027 18.446453,-66.065975 18.449736,-66.065667 18.450152,-66.063944 18.451934,-66.063819 18.451992,-66.063685 18.452,-66.063265 18.451955,-66.060597 18.451623,-66.058522 18.451336,-66.056477 18.451106,-66.055667 18.451053,-66.054784 18.450905,-66.053658 18.450632,-66.052332 18.450097,-66.051705 18.449949,-66.050883 18.449855,-66.047437 18.449383,-66.045047 18.449124,-66.04474 18.449132,-66.044437 18.44921,-66.043135 18.449896,-66.041267 18.451017,-66.040669 18.451283,-66.039889 18.451579,-66.039668 18.451648,-66.039525 18.451648,-66.039391 18.451644,-66.039257 18.451615,-66.039175 18.451525,-66.03816 18.450022,-66.037576 18.4492,-66.03704 18.448777,-66.033886 18.446384,-66.032708 18.44551,-66.032363 18.445294,-66.031255 18.444841,-66.02987 18.444409,-66.027819 18.443834,-66.026284 18.443377,-66.024094 18.442803,-66.022942 18.442548,-66.022032 18.44235,-66.021459 18.442268,-66.02068 18.442251,-66.019183 18.442325,-66.018373 18.442333,-66.017532 18.442296,-66.016044 18.442003,-66.014821 18.441769,-66.014553 18.441666,-66.014466 18.441576,-66.014449 18.441465,-66.014475 18.441338,-66.014574 18.441212,-66.014783 18.441114,-66.016098 18.440859,-66.017088 18.440534,-66.022066 18.438346,-66.022689 18.438097,-66.022694 18.438095,-66.022694 18.438095,-66.022992 18.438523,-66.023191 18.438679,-66.02339 18.438716,-66.023598 18.438675,-66.023736 18.438552,-66.023805 18.438432,-66.023823 18.438256,-66.023758 18.438071,-66.023667 18.437969,-66.023507 18.437886,-66.023256 18.43787,-66.022702 18.438091,-66.022694 18.438095,-66.021643 18.436586,-66.020692 18.435357,-66.020399 18.434752,-66.020328 18.434565,-66.020305 18.434451,-66.020342 18.434315,-66.020489 18.434155,-66.020656 18.434089,-66.020846 18.434096,-66.021004 18.434162,-66.021156 18.434373,-66.021169 18.434556,-66.021109 18.43471,-66.020925 18.434926,-66.020512 18.435172,-66.020125 18.435343,-66.01965 18.435492,-66.019007 18.4356,-66.018485 18.435632,-66.018047 18.435637,-66.017171 18.435673,-66.016855 18.435716,-66.016537 18.435854,-66.016166 18.436037,-66.015915 18.436116,-66.015589 18.436175,-66.012301 18.436385,-66.011996 18.436424,-66.010801 18.436606,-66.0102 18.436671,-66.009624 18.436709,-66.009123 18.436721,-66.008651 18.43668,-66.008216 18.436632,-66.007643 18.436531,-66.007045 18.436419,-66.005775 18.436356,-66.005267 18.436326,-66.004771 18.436345,-66.004586 18.436427,-66.004471 18.436602,-66.004486 18.437792,-66.004535 18.437996,-66.004669 18.438249,-66.005245 18.438903,-66.005385 18.439023,-66.005524 18.439029,-66.007496 18.43824,-66.008867 18.437655,-66.009691 18.437273,-66.010952 18.436856,-66.011704 18.436637,-66.012162 18.436537,-66.013196 18.436456,-66.015284 18.436325,-66.015737 18.436272,-66.016098 18.436208,-66.016461 18.436028,-66.016827 18.435833,-66.017244 18.435743,-66.017517 18.435727,-66.018843 18.435687,-66.019396 18.435625,-66.019947 18.435521,-66.020525 18.43529,-66.020943 18.435071,-66.021081 18.434982,-66.021223 18.434916,-66.021363 18.434893,-66.021525 18.434938,-66.02161 18.434984,-66.021695 18.435072,-66.021775 18.435213,-66.021787 18.435403,-66.021719 18.435555,-66.021591 18.435679,-66.021439 18.435732,-66.021263 18.435739,-66.021148 18.435707,-66.020998 18.435587,-66.020799 18.435391,-66.020539 18.434997,-66.019835 18.434026,-66.019328 18.433348,-66.018391 18.432525,-66.018169 18.432424,-66.017673 18.43224,-66.016903 18.432051,-66.016163 18.431916,-66.015474 18.431858,-66.015401 18.431821,-66.015358 18.431723,-66.015127 18.430813,-66.014751 18.42905,-66.014699 18.428988,-66.014612 18.428972,-66.014431 18.428996,-66.01363 18.429167,-66.012345 18.42944,-66.011934 18.429527,-66.011709 18.429535,-66.008548 18.42937,-66.008006 18.42932,-66.006839 18.429213,-66.003775 18.428917,-66.003706 18.428937,-66.003676 18.428995,-66.003401 18.431465,-66.003379 18.431547,-66.003349 18.431584,-66.003284 18.431596,-66.003037 18.4316,-66.001395 18.431567,-66.0011 18.43153,-65.999917 18.431353,-65.99961 18.431337,-65.999363 18.431312,-65.9988 18.431193,-65.994675 18.429993,-65.992 18.429182,-65.991702 18.429037,-65.991429 18.428823,-65.990876 18.428192,-65.990747 18.427999,-65.990647 18.427919,-65.990474 18.427849,-65.990318 18.427808,-65.990223 18.427718,-65.990111 18.42755,-65.989733 18.426848,-65.989346 18.425311,-65.988851 18.422682,-65.988719 18.422207,-65.988724 18.422129,-65.988762 18.422076,-65.988866 18.422056,-65.991318 18.421496,-65.991447 18.421516,-65.991499 18.421623,-65.991538 18.421824,-65.991568 18.421931,-65.991685 18.421968,-65.992083 18.42187)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T5','ITURREGUI', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
